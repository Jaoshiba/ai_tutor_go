<!doctype html><html lang="en"><head><title data-rh="true">สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว !!! | by Bozz Srinikorn | Medium</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" name="apple-itunes-app" content="app-id=828256236, app-argument=/review-%E0%B8%AA%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%87-api-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-fastapi-%E0%B9%80%E0%B8%A3%E0%B9%87%E0%B8%A7-%E0%B9%81%E0%B8%A3%E0%B8%87-%E0%B8%9F%E0%B8%B4%E0%B9%89%E0%B8%A7-%E0%B9%86-148b10416a70, affiliate-data=pt=698524&amp;ct=smart_app_banner&amp;mt=8"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2020-10-18T14:50:10.934Z"/><meta data-rh="true" name="title" content="สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว !!! | by Bozz Srinikorn | Medium"/><meta data-rh="true" property="og:title" content="[Review] สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว ๆ"/><meta data-rh="true" property="al:android:url" content="medium://p/148b10416a70"/><meta data-rh="true" property="al:ios:url" content="medium://p/148b10416a70"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="ประมาณว่า มีประกาศรับสมัคร Dev ที่มีประสบการณ์กับ FastAPI เกิน 4 ปี ซึ่งความเป็นจริง FastAPI เพิ่งมาประมาณปี 2019 เอง ทำให้แม้แต่คนที่เป็น Contributor หลักเอง ก็ยังมีประสบการณ์ไม่ถึง ทั้ง ๆ…"/><meta data-rh="true" property="og:description" content="เริ่มต้นเขียน API ด้วย Python และ FastAPI ฟิ้ว ฟิ้ว ๆ"/><meta data-rh="true" property="og:url" content="https://p-srinikorn.medium.com/review-%E0%B8%AA%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%87-api-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-fastapi-%E0%B9%80%E0%B8%A3%E0%B9%87%E0%B8%A7-%E0%B9%81%E0%B8%A3%E0%B8%87-%E0%B8%9F%E0%B8%B4%E0%B9%89%E0%B8%A7-%E0%B9%86-148b10416a70"/><meta data-rh="true" property="al:web:url" content="https://p-srinikorn.medium.com/review-%E0%B8%AA%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%87-api-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-fastapi-%E0%B9%80%E0%B8%A3%E0%B9%87%E0%B8%A7-%E0%B9%81%E0%B8%A3%E0%B8%87-%E0%B8%9F%E0%B8%B4%E0%B9%89%E0%B8%A7-%E0%B9%86-148b10416a70"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/resize:fit:1023/1*du7p50wS_fIsaC_lR18qsg.png"/><meta data-rh="true" property="article:author" content="https://p-srinikorn.medium.com"/><meta data-rh="true" name="author" content="Bozz Srinikorn"/><meta data-rh="true" name="robots" content="index,noarchive,follow,max-image-preview:large"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" property="twitter:title" content="[Review] สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว ๆ"/><meta data-rh="true" name="twitter:site" content="@Medium"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/148b10416a70"/><meta data-rh="true" property="twitter:description" content="เริ่มต้นเขียน API ด้วย Python และ FastAPI ฟิ้ว ฟิ้ว ๆ"/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/resize:fit:1023/1*du7p50wS_fIsaC_lR18qsg.png"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:label1" content="Reading time"/><meta data-rh="true" name="twitter:data1" content="8 min read"/><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/5d8de952517e8160e40ef9841c781cdc14a5db313057fa3c3de41c6f5b494b19"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:304:304/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:240:240/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:152:152/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:120:120/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="mask-icon" href="https://miro.medium.com/v2/resize:fill:1000:1000/7*GAOKVe--MXbEJmV9230oOQ.png" color="#171717"/><link data-rh="true" rel="preconnect" href="https://glyph.medium.com" crossOrigin=""/><link data-rh="true" rel="manifest" href="/manifest.json"/><link data-rh="true" rel="preconnect" href="https://www.google.com"/><link data-rh="true" rel="preconnect" href="https://www.gstatic.com" crossOrigin=""/><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" rel="author" href="https://p-srinikorn.medium.com"/><link data-rh="true" rel="canonical" href="https://p-srinikorn.medium.com/review-สร้าง-api-ด้วย-fastapi-เร็ว-แรง-ฟิ้ว-ๆ-148b10416a70"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/148b10416a70"/><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@id":"https://p-srinikorn.medium.com/review-สร้าง-api-ด้วย-fastapi-เร็ว-แรง-ฟิ้ว-ๆ-148b10416a70","@type":"SocialMediaPosting","image":["https://miro.medium.com/1*du7p50wS_fIsaC_lR18qsg.png"],"url":"https://p-srinikorn.medium.com/review-สร้าง-api-ด้วย-fastapi-เร็ว-แรง-ฟิ้ว-ๆ-148b10416a70","dateCreated":"2020-09-08T14:16:23Z","datePublished":"2020-09-08T14:16:23Z","dateModified":"2020-10-18T14:50:10Z","headline":"สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว !!!","name":"สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว !!!","description":"สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว !!!\nเริ่มต้นเขียน API ด้วย Python และ FastAPI ฟิ้ว ฟิ้ว …","identifier":"148b10416a70","author":{"@context":"https://schema.org","@id":"https://medium.com/@p-srinikorn","@type":"Person","identifier":"p-srinikorn","name":"Bozz Srinikorn","url":"https://medium.com/@p-srinikorn"},"creator":{"@context":"https://schema.org","@id":"https://medium.com/@p-srinikorn","@type":"Person","identifier":"p-srinikorn","name":"Bozz Srinikorn","url":"https://medium.com/@p-srinikorn"},"publisher":{"@context":"https://schema.org","@type":"Organization","@id":"https://medium.com","name":"Medium","url":"https://medium.com","logo":{"@type":"ImageObject","width":500,"height":110,"url":"https://miro.medium.com/v2/resize:fit:500/7%2AV1_7XP4snlmqrc_0Njontw.png"}},"mainEntityOfPage":"https://p-srinikorn.medium.com/review-สร้าง-api-ด้วย-fastapi-เร็ว-แรง-ฟิ้ว-ๆ-148b10416a70","isAccessibleForFree":true}</script><script data-rh="true" src="https://www.google.com/recaptcha/enterprise.js?render=6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp" async="true"></script><style type="text/css" data-fela-rehydration="588" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs {background: #fff;color: black;
}/* Gray DOCTYPE selectors like WebKit */
.xml .hljs-meta {color: #c0c0c0;
}.hljs-comment,
.hljs-quote {color: #007400;
}.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {color: #aa0d91;
}.hljs-variable,
.hljs-template-variable {color: #3F6E74;
}.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {color: #c41a16;
}.hljs-regexp,
.hljs-link {color: #0E0EFF;
}.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {color: #1c00cf;
}.hljs-section,
.hljs-meta {color: #643820;
}.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {color: #5c2699;
}.hljs-attr {color: #836C28;
}.hljs-subst {color: #000;
}.hljs-formula {background-color: #eee;font-style: italic;
}.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd;
}.hljs-selector-id,
.hljs-selector-class {color: #9b703f;
}.hljs-doctag,
.hljs-strong {font-weight: bold;
}.hljs-emphasis {font-style: italic;
}
</style><style type="text/css" data-fela-rehydration="588" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}</style><style type="text/css" data-fela-rehydration="588" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.d{display:none}.m{display:block}.n{position:sticky}.o{top:0}.p{z-index:500}.q{padding:0 24px}.r{align-items:center}.s{border-bottom:solid 1px #F2F2F2}.z{height:41px}.ab{line-height:20px}.ac{display:flex}.ae{height:57px}.af{flex:1 0 auto}.ag{color:inherit}.ah{fill:inherit}.ai{font-size:inherit}.aj{border:none}.ak{font-family:inherit}.al{letter-spacing:inherit}.am{font-weight:inherit}.an{padding:0}.ao{margin:0}.ap{cursor:pointer}.aq:disabled{cursor:not-allowed}.ar:disabled{color:#6B6B6B}.as:disabled{fill:#6B6B6B}.av{width:auto}.aw path{fill:#242424}.ax{height:25px}.ay{margin-left:24px}.az{border-radius:20px}.ba{width:240px}.bb{background:#F9F9F9}.bc path{fill:#6B6B6B}.be{outline:none}.bf{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.bg{font-size:14px}.bh{width:100%}.bi{padding:10px 20px 10px 0}.bj{background-color:transparent}.bk{color:#242424}.bl::placeholder{color:#6B6B6B}.bm{display:inline-block}.bn{margin-left:12px}.bo{margin-right:12px}.bp{border-radius:4px}.bq{height:24px}.bw{background-color:#F9F9F9}.bx{border-radius:50%}.by{height:32px}.bz{width:32px}.ca{flex:1 1 auto}.cb{justify-content:center}.ch{max-width:680px}.ci{min-width:0}.cj{animation:k1 1.2s ease-in-out infinite}.ck{height:100vh}.cl{margin-bottom:16px}.cm{margin-top:48px}.cn{align-items:flex-start}.co{flex-direction:column}.cp{justify-content:space-between}.cq{margin-bottom:24px}.cw{width:80%}.cx{background-color:#F2F2F2}.dd{height:44px}.de{width:44px}.df{margin:auto 0}.dg{margin-bottom:4px}.dh{height:16px}.di{width:120px}.dj{width:80px}.dp{margin-bottom:8px}.dq{width:96%}.dr{width:98%}.ds{width:81%}.dt{margin-left:8px}.du{color:#6B6B6B}.dv{font-size:13px}.dw{height:100%}.ep{color:#FFFFFF}.eq{fill:#FFFFFF}.er{background:#1A8917}.es{border-color:#1A8917}.ew:disabled{cursor:inherit !important}.ex:disabled{opacity:0.3}.ey:disabled:hover{background:#1A8917}.ez:disabled:hover{border-color:#1A8917}.fa{border-radius:99em}.fb{border-width:1px}.fc{border-style:solid}.fd{box-sizing:border-box}.fe{text-decoration:none}.ff{text-align:center}.fg{margin-left:16px}.fh{border:inherit}.fk{margin-right:32px}.fl{position:relative}.fm{fill:#6B6B6B}.fp{background:transparent}.fq svg{margin-left:4px}.fr svg{fill:#6B6B6B}.ft{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.05)}.fu{position:absolute}.gb{margin:0 24px}.gf{background:rgba(255, 255, 255, 1)}.gg{border:1px solid #F2F2F2}.gh{box-shadow:0 1px 4px #F2F2F2}.gi{max-height:100vh}.gj{overflow-y:auto}.gk{left:0}.gl{top:calc(100vh + 100px)}.gm{bottom:calc(100vh + 100px)}.gn{width:10px}.go{pointer-events:none}.gp{word-break:break-word}.gq{word-wrap:break-word}.gr:after{display:block}.gs:after{content:""}.gt:after{clear:both}.gu{line-height:1.23}.gv{letter-spacing:0}.gw{font-style:normal}.gx{font-weight:700}.ih{gap:12px}.ii{align-items:baseline}.ij{width:36px}.ik{height:36px}.il{border:2px solid rgba(255, 255, 255, 1)}.im{z-index:0}.in{box-shadow:none}.io{border:1px solid rgba(0, 0, 0, 0.05)}.ip{margin-bottom:2px}.iq{flex-wrap:nowrap}.is{width:12px}.it{flex-wrap:wrap}.iu{padding-left:8px}.iv{padding-right:8px}.jw> *{flex-shrink:0}.jx{overflow-x:scroll}.jy::-webkit-scrollbar{display:none}.jz{scrollbar-width:none}.ka{-ms-overflow-style:none}.kb{width:74px}.kc{flex-direction:row}.kd{z-index:2}.ke{margin-right:4px}.kh{-webkit-user-select:none}.ki{border:0}.kj{fill:rgba(117, 117, 117, 1)}.km{outline:0}.kn{user-select:none}.ko> svg{pointer-events:none}.kx{cursor:progress}.ky{margin-left:4px}.kz{margin-top:0px}.la{opacity:1}.lb{padding:4px 0}.le{width:16px}.lg{padding:8px 2px}.lh svg{color:#6B6B6B}.ly{box-shadow:inset 3px 0 0 0 #242424}.lz{padding-left:23px}.ma{margin-left:-20px}.mb{line-height:1.58}.mc{letter-spacing:-0.004em}.md{font-style:italic}.me{font-family:source-serif-pro, Georgia, Cambria, "Times New Roman", Times, serif}.mz{margin-bottom:-0.46em}.na{margin-left:auto}.nb{margin-right:auto}.nc{max-width:1023px}.ni{clear:both}.nk{cursor:zoom-in}.nl{z-index:auto}.nn{width:1px}.no{height:1px}.np{margin:-1px}.nq{overflow:hidden}.nr{clip:rect(0, 0, 0, 0)}.ns{white-space:nowrap}.nt{border-width:0}.nu{max-width:100%}.nv{height:auto}.nw{margin-top:10px}.nx{max-width:728px}.oa{margin-top:32px}.ob{margin-bottom:14px}.oc{padding-top:24px}.od{padding-bottom:10px}.oe{background-color:#000000}.of{height:3px}.og{width:3px}.oh{margin-right:20px}.oi{max-width:500px}.oj{line-height:1.12}.ok{letter-spacing:-0.022em}.ol{font-weight:600}.pg{margin-bottom:-0.28em}.pm{max-width:377px}.pn{max-width:471px}.po{max-width:639px}.pp{max-width:837px}.pq{max-width:842px}.pw{text-decoration:underline}.px{margin:auto}.py{padding-bottom:100%}.pz{height:0}.qa{max-width:748px}.qb{max-width:864px}.qc{max-width:1414px}.qd{max-width:1548px}.qe{max-width:589px}.qf{max-width:479px}.qg{max-width:538px}.qh{max-width:1024px}.qi{max-width:1514px}.qr{max-width:1655px}.qs{padding-top:5px}.qt{padding-bottom:5px}.qu{max-width:1400px}.qv{max-width:800px}.qw{max-width:719px}.qx{max-width:556px}.qy{max-width:1218px}.qz{max-width:1062px}.ra{max-width:826px}.rb{max-width:1840px}.rc{max-width:681px}.rd{max-width:959px}.re{overflow-x:auto}.rf{font-family:source-code-pro, Menlo, Monaco, "Courier New", Courier, monospace}.rg{padding:20px}.rh{border-radius:0}.ri{background:#F2F2F2}.rj{line-height:1.18}.rk{font-size:16px}.rl{margin-top:-0.09em}.rm{margin-bottom:-0.09em}.rn{white-space:pre-wrap}.ro{min-width:fit-content}.rp{max-width:524px}.rq{max-width:740px}.rr{max-width:1670px}.rs{max-width:601px}.rt{max-width:531px}.ru{max-width:1501px}.rv{max-width:1131px}.rw{margin-bottom:26px}.rx{margin-top:6px}.ry{margin-top:8px}.rz{margin-right:8px}.sa{padding:8px 16px}.sb{border-radius:100px}.sc{transition:background 300ms ease}.se{border-top:none}.sf{margin-bottom:50px}.sg{height:52px}.sh{max-height:52px}.si{box-sizing:content-box}.sj{position:static}.sk{z-index:1}.sm{max-width:155px}.ss{flex:0 0 auto}.st{margin-bottom:64px}.tg{height:48px}.th{width:48px}.tj{height:64px}.tk{width:64px}.tl{align-self:flex-end}.tp{padding-right:4px}.tq{font-weight:500}.ud{margin:0 8px}.ue{margin-top:16px}.uk{height:0px}.ul{gap:18px}.um{fill:rgba(61, 61, 61, 1)}.uo{padding-bottom:20px}.up{border-bottom:1px solid #F2F2F2}.uv{fill:#242424}.uw{background:0}.ux{border-color:#242424}.uz:disabled:hover{color:#242424}.va:disabled:hover{fill:#242424}.vb:disabled:hover{border-color:#242424}.vm{border-bottom:solid 1px #E5E5E5}.vn{margin-top:72px}.vo{padding:24px 0}.vp{margin-bottom:0px}.vq{margin-right:16px}.at:hover:not(:disabled){color:rgba(25, 25, 25, 1)}.au:hover:not(:disabled){fill:rgba(25, 25, 25, 1)}.et:hover{background:#156D12}.eu:hover{border-color:#156D12}.ev:hover{cursor:pointer}.fn:hover{color:#242424}.fo:hover{fill:#242424}.fs:hover svg{fill:#242424}.fv:hover{background-color:rgba(0, 0, 0, 0.1)}.ir:hover{text-decoration:underline}.kl:hover{fill:rgba(8, 8, 8, 1)}.lc:hover{fill:#000000}.ld:hover p{color:#000000}.lf:hover{color:#000000}.li:hover svg{color:#000000}.sd:hover{background-color:#F2F2F2}.ti:hover{background-color:none}.un:hover{fill:rgba(25, 25, 25, 1)}.uy:hover{border-color:#242424}.bd:focus-within path{fill:#242424}.kk:focus{fill:rgba(8, 8, 8, 1)}.lj:focus svg{color:#000000}.nm:focus{transform:scale(1.01)}.kp:active{border-style:none}</style><style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (min-width: 1080px)">.e{display:none}.bv{width:64px}.cg{margin:0 64px}.cv{height:48px}.dc{margin-bottom:52px}.do{margin-bottom:48px}.ef{font-size:14px}.eg{line-height:20px}.em{font-size:13px}.eo{padding:5px 12px}.fj{display:flex}.ga{margin-bottom:50px}.ge{max-width:680px}.hs{font-size:42px}.ht{margin-top:1.19em}.hu{margin-bottom:32px}.hv{line-height:52px}.hw{letter-spacing:-0.011em}.if{align-items:center}.ig{flex-direction:row}.ji{border-top:solid 1px #F2F2F2}.jj{border-bottom:solid 1px #F2F2F2}.jk{margin:32px 0 0}.jl{padding:3px 8px}.ju> *{margin-right:24px}.jv> :last-child{margin-right:0}.kw{margin-top:0px}.mv{font-size:20px}.mw{margin-top:2.14em}.mx{line-height:32px}.my{letter-spacing:-0.003em}.nh{margin-top:56px}.pc{font-size:24px}.pd{margin-top:1.25em}.pe{line-height:30px}.pf{letter-spacing:-0.016em}.pl{margin-top:0.94em}.pv{margin-top:1.95em}.qq{max-width:1192px}.sr{display:inline-block}.sw{margin-bottom:0}.sx{margin-right:20px}.tm{max-width:500px}.ub{line-height:24px}.uc{letter-spacing:0}.uj{margin-bottom:88px}.uu{margin:40px 0 16px}.vg{width:min-width}.vl{padding-top:72px}</style><style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.f{display:none}.kv{margin-top:0px}.ny{margin-left:auto}.nz{text-align:center}.sq{display:inline-block}</style><style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (max-width: 903.98px)">.g{display:none}.ku{margin-top:0px}.sp{display:inline-block}</style><style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (max-width: 727.98px)">.h{display:none}.ks{margin-top:0px}.kt{margin-right:0px}.so{display:inline-block}</style><style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (max-width: 551.98px)">.i{display:none}.t{display:flex}.u{justify-content:space-between}.br{width:24px}.cc{margin:0 24px}.cr{height:40px}.cy{margin-bottom:44px}.dk{margin-bottom:32px}.dx{font-size:13px}.dy{line-height:20px}.eh{padding:0px 8px 1px}.fw{margin-bottom:2px}.gy{font-size:32px}.gz{margin-top:1.01em}.ha{margin-bottom:24px}.hb{line-height:38px}.hc{letter-spacing:-0.014em}.hx{align-items:flex-start}.hy{flex-direction:column-reverse}.iw{margin:24px -24px 0}.ix{padding:0}.jm> *{margin-right:8px}.jn> :last-child{margin-right:24px}.kf{margin-left:0px}.kq{margin-top:0px}.kr{margin-right:0px}.lk{border:1px solid #F2F2F2}.ll{border-radius:99em}.lm{padding:0px 16px 0px 12px}.ln{height:38px}.lo{align-items:center}.lq svg{margin-right:8px}.mf{font-size:18px}.mg{margin-top:1.56em}.mh{line-height:28px}.mi{letter-spacing:-0.003em}.nd{margin-top:40px}.om{font-size:20px}.on{margin-top:0.93em}.oo{line-height:24px}.op{letter-spacing:0}.ph{margin-top:0.67em}.pr{margin-top:1.2em}.qj{margin:0}.qk{max-width:100%}.sn{display:inline-block}.sv{flex-direction:column}.te{margin-bottom:20px}.tf{margin-right:0}.tr{font-size:24px}.ts{line-height:30px}.tt{letter-spacing:-0.016em}.uf{margin-bottom:64px}.uq{margin:32px 0 16px}.vc{width:100%}.vh{padding-top:48px}.lp:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.j{display:none}.bu{width:64px}.cf{margin:0 64px}.cu{height:48px}.db{margin-bottom:52px}.dn{margin-bottom:48px}.ed{font-size:14px}.ee{line-height:20px}.ek{font-size:13px}.el{padding:5px 12px}.fi{display:flex}.fz{margin-bottom:50px}.gd{max-width:680px}.hn{font-size:42px}.ho{margin-top:1.19em}.hp{margin-bottom:32px}.hq{line-height:52px}.hr{letter-spacing:-0.011em}.id{align-items:center}.ie{flex-direction:row}.je{border-top:solid 1px #F2F2F2}.jf{border-bottom:solid 1px #F2F2F2}.jg{margin:32px 0 0}.jh{padding:3px 8px}.js> *{margin-right:24px}.jt> :last-child{margin-right:0}.mr{font-size:20px}.ms{margin-top:2.14em}.mt{line-height:32px}.mu{letter-spacing:-0.003em}.ng{margin-top:56px}.oy{font-size:24px}.oz{margin-top:1.25em}.pa{line-height:30px}.pb{letter-spacing:-0.016em}.pk{margin-top:0.94em}.pu{margin-top:1.95em}.qp{max-width:1192px}.sy{margin-bottom:0}.sz{margin-right:20px}.tn{max-width:500px}.tz{line-height:24px}.ua{letter-spacing:0}.ui{margin-bottom:88px}.ut{margin:40px 0 16px}.vf{width:min-width}.vk{padding-top:72px}</style><style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.k{display:none}.x{display:flex}.y{justify-content:space-between}.bt{width:64px}.ce{margin:0 48px}.ct{height:48px}.da{margin-bottom:52px}.dm{margin-bottom:48px}.eb{font-size:13px}.ec{line-height:20px}.ej{padding:0px 8px 1px}.fy{margin-bottom:50px}.gc{max-width:680px}.hi{font-size:42px}.hj{margin-top:1.19em}.hk{margin-bottom:32px}.hl{line-height:52px}.hm{letter-spacing:-0.011em}.ib{align-items:center}.ic{flex-direction:row}.ja{border-top:solid 1px #F2F2F2}.jb{border-bottom:solid 1px #F2F2F2}.jc{margin:32px 0 0}.jd{padding:3px 8px}.jq> *{margin-right:24px}.jr> :last-child{margin-right:0}.mn{font-size:20px}.mo{margin-top:2.14em}.mp{line-height:32px}.mq{letter-spacing:-0.003em}.nf{margin-top:56px}.ou{font-size:24px}.ov{margin-top:1.25em}.ow{line-height:30px}.ox{letter-spacing:-0.016em}.pj{margin-top:0.94em}.pt{margin-top:1.95em}.qn{margin:0}.qo{max-width:100%}.ta{margin-bottom:0}.tb{margin-right:20px}.to{max-width:500px}.tx{line-height:24px}.ty{letter-spacing:0}.uh{margin-bottom:88px}.us{margin:40px 0 16px}.ve{width:min-width}.vj{padding-top:72px}</style><style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.l{display:none}.v{display:flex}.w{justify-content:space-between}.bs{width:24px}.cd{margin:0 24px}.cs{height:40px}.cz{margin-bottom:44px}.dl{margin-bottom:32px}.dz{font-size:13px}.ea{line-height:20px}.ei{padding:0px 8px 1px}.fx{margin-bottom:2px}.hd{font-size:32px}.he{margin-top:1.01em}.hf{margin-bottom:24px}.hg{line-height:38px}.hh{letter-spacing:-0.014em}.hz{align-items:flex-start}.ia{flex-direction:column-reverse}.iy{margin:24px 0 0}.iz{padding:0}.jo> *{margin-right:8px}.jp> :last-child{margin-right:8px}.kg{margin-left:0px}.lr{border:1px solid #F2F2F2}.ls{border-radius:99em}.lt{padding:0px 16px 0px 12px}.lu{height:38px}.lv{align-items:center}.lx svg{margin-right:8px}.mj{font-size:18px}.mk{margin-top:1.56em}.ml{line-height:28px}.mm{letter-spacing:-0.003em}.ne{margin-top:40px}.oq{font-size:20px}.or{margin-top:0.93em}.os{line-height:24px}.ot{letter-spacing:0}.pi{margin-top:0.67em}.ps{margin-top:1.2em}.ql{margin:0}.qm{max-width:100%}.su{flex-direction:column}.tc{margin-bottom:20px}.td{margin-right:0}.tu{font-size:24px}.tv{line-height:30px}.tw{letter-spacing:-0.016em}.ug{margin-bottom:64px}.ur{margin:32px 0 16px}.vd{width:100%}.vi{padding-top:48px}.lw:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="print">.sl{display:none}</style><style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.nj{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}</style></head><body><div id="root"><div class="a b c"><a href="/sitemap/sitemap.xml" class="d">Sitemap</a><div class="e f g h i j k l"></div><script>document.domain = document.domain;</script><div class="m c"><div class="m n o p c"><div class="q r s t u v w x y j e z ab"><a class="du ah dv bf al b an ao ap aq ar as at au t v x j e r dw ab" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F148b10416a70&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderUser&amp;%7Estage=mobileNavBar&amp;source=post_page---top_nav_layout_nav-----------------------------------------" rel="noopener follow">Open in app<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10" class="dt"><path fill="currentColor" d="M.985 8.485a.375.375 0 1 0 .53.53zM8.75 1.25h.375A.375.375 0 0 0 8.75.875zM8.375 6.5a.375.375 0 1 0 .75 0zM3.5.875a.375.375 0 1 0 0 .75zm-1.985 8.14 7.5-7.5-.53-.53-7.5 7.5zm6.86-7.765V6.5h.75V1.25zM3.5 1.625h5.25v-.75H3.5z"></path></svg></a><div class="ac r"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span data-dd-action-name="Susi presentation tracker global_nav"><button class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton">Sign up</button></span></p><div class="fg m"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span data-dd-action-name="Susi presentation tracker global_nav"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fp-srinikorn.medium.com%2Freview-%25E0%25B8%25AA%25E0%25B8%25A3%25E0%25B9%2589%25E0%25B8%25B2%25E0%25B8%2587-api-%25E0%25B8%2594%25E0%25B9%2589%25E0%25B8%25A7%25E0%25B8%25A2-fastapi-%25E0%25B9%2580%25E0%25B8%25A3%25E0%25B9%2587%25E0%25B8%25A7-%25E0%25B9%2581%25E0%25B8%25A3%25E0%25B8%2587-%25E0%25B8%259F%25E0%25B8%25B4%25E0%25B9%2589%25E0%25B8%25A7-%25E0%25B9%2586-148b10416a70&amp;source=post_page---top_nav_layout_nav-----------------------global_nav------------------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="q r s ac ae"><div class="ac r af"><a class="ag ah ai aj ak al am an ao ap aq ar as at au ac" aria-label="Homepage" data-testid="headerMediumLogo" href="https://medium.com/?source=post_page---top_nav_layout_nav-----------------------------------------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="719" height="160" fill="none" aria-labelledby="wordmark-medium-desc" viewBox="0 0 719 160" class="av aw ax"><desc id="wordmark-medium-desc">Medium Logo</desc><path fill="#242424" d="m174.104 9.734.215-.047V8.02H130.39L89.6 103.89 48.81 8.021H1.472v1.666l.212.047c8.018 1.81 12.09 4.509 12.09 14.242V137.93c0 9.734-4.087 12.433-12.106 14.243l-.212.047v1.671h32.118v-1.665l-.213-.048c-8.018-1.809-12.089-4.509-12.089-14.242V30.586l52.399 123.305h2.972l53.925-126.743V140.75c-.687 7.688-4.721 10.062-11.982 11.701l-.215.05v1.652h55.948v-1.652l-.215-.05c-7.269-1.639-11.4-4.013-12.087-11.701l-.037-116.774h.037c0-9.733 4.071-12.432 12.087-14.242m25.555 75.488c.915-20.474 8.268-35.252 20.606-35.507 3.806.063 6.998 1.312 9.479 3.714 5.272 5.118 7.751 15.812 7.368 31.793zm-.553 5.77h65.573v-.275c-.186-15.656-4.721-27.834-13.466-36.196-7.559-7.227-18.751-11.203-30.507-11.203h-.263c-6.101 0-13.584 1.48-18.909 4.16-6.061 2.807-11.407 7.003-15.855 12.511-7.161 8.874-11.499 20.866-12.554 34.343q-.05.606-.092 1.212a50 50 0 0 0-.065 1.151 85.807 85.807 0 0 0-.094 5.689c.71 30.524 17.198 54.917 46.483 54.917 25.705 0 40.675-18.791 44.407-44.013l-1.886-.664c-6.557 13.556-18.334 21.771-31.738 20.769-18.297-1.369-32.314-19.922-31.042-42.395m139.722 41.359c-2.151 5.101-6.639 7.908-12.653 7.908s-11.513-4.129-15.418-11.63c-4.197-8.053-6.405-19.436-6.405-32.92 0-28.067 8.729-46.22 22.24-46.22 5.657 0 10.111 2.807 12.236 7.704zm43.499 20.008c-8.019-1.897-12.089-4.722-12.089-14.951V1.309l-48.716 14.353v1.757l.299-.024c6.72-.543 11.278.386 13.925 2.83 2.072 1.915 3.082 4.853 3.082 8.987v18.66c-4.803-3.067-10.516-4.56-17.448-4.56-14.059 0-26.909 5.92-36.176 16.672-9.66 11.205-14.767 26.518-14.767 44.278-.003 31.72 15.612 53.039 38.851 53.039 13.595 0 24.533-7.449 29.54-20.013v16.865h43.711v-1.746zM424.1 19.819c0-9.904-7.468-17.374-17.375-17.374-9.859 0-17.573 7.632-17.573 17.374s7.721 17.374 17.573 17.374c9.907 0 17.375-7.47 17.375-17.374m11.499 132.546c-8.019-1.897-12.089-4.722-12.089-14.951h-.035V43.635l-43.714 12.551v1.705l.263.024c9.458.842 12.047 4.1 12.047 15.152v81.086h43.751v-1.746zm112.013 0c-8.018-1.897-12.089-4.722-12.089-14.951V43.635l-41.621 12.137v1.71l.246.026c7.733.813 9.967 4.257 9.967 15.36v59.279c-2.578 5.102-7.415 8.131-13.274 8.336-9.503 0-14.736-6.419-14.736-18.073V43.638l-43.714 12.55v1.703l.262.024c9.459.84 12.05 4.097 12.05 15.152v50.17a56.3 56.3 0 0 0 .91 10.444l.787 3.423c3.701 13.262 13.398 20.197 28.59 20.197 12.868 0 24.147-7.966 29.115-20.43v17.311h43.714v-1.747zm169.818 1.788v-1.749l-.213-.05c-8.7-2.006-12.089-5.789-12.089-13.49v-63.79c0-19.89-11.171-31.761-29.883-31.761-13.64 0-25.141 7.882-29.569 20.16-3.517-13.01-13.639-20.16-28.606-20.16-13.146 0-23.449 6.938-27.869 18.657V43.643L545.487 55.68v1.715l.263.024c9.345.829 12.047 4.181 12.047 14.95v81.784h40.787v-1.746l-.215-.053c-6.941-1.631-9.181-4.606-9.181-12.239V66.998c1.836-4.289 5.537-9.37 12.853-9.37 9.086 0 13.692 6.296 13.692 18.697v77.828h40.797v-1.746l-.215-.053c-6.94-1.631-9.18-4.606-9.18-12.239V75.066a42 42 0 0 0-.578-7.26c1.947-4.661 5.86-10.177 13.475-10.177 9.214 0 13.691 6.114 13.691 18.696v77.828z"></path></svg></a><div class="ay i"><div class="ac aj az ba bb r bc bd"><div class="bm" aria-hidden="false" aria-describedby="searchResults" aria-labelledby="searchResults" aria-haspopup="listbox" role="listbox"></div><div class="bn bo ac"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div><input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="aj be bf bg ab bh bi bj bk bl" placeholder="Search" value=""/></div></div></div><div class="i l x fi fj"><div class="fk ac"><span data-dd-action-name="Susi presentation tracker new_post_topnav"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" data-testid="headerWriteButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---top_nav_layout_nav-----------------------new_post_topnav------------------" rel="noopener follow"><div class="bf b bg ab du fl fm ac r fn fo"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Write"><path fill="currentColor" d="M14 4a.5.5 0 0 0 0-1zm7 6a.5.5 0 0 0-1 0zm-7-7H4v1h10zM3 4v16h1V4zm1 17h16v-1H4zm17-1V10h-1v10zm-1 1a1 1 0 0 0 1-1h-1zM3 20a1 1 0 0 0 1 1v-1zM4 3a1 1 0 0 0-1 1h1z"></path><path stroke="currentColor" d="m17.5 4.5-8.458 8.458a.25.25 0 0 0-.06.098l-.824 2.47a.25.25 0 0 0 .316.316l2.47-.823a.25.25 0 0 0 .098-.06L19.5 6.5m-2-2 2.323-2.323a.25.25 0 0 1 .354 0l1.646 1.646a.25.25 0 0 1 0 .354L19.5 6.5m-2-2 2 2"></path></svg><div class="dt m">Write</div></div></a></span></div></div><div class="l k j e"><div class="fk ac"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" data-testid="headerSearchButton" href="https://medium.com/search?source=post_page---top_nav_layout_nav-----------------------------------------" rel="noopener follow"><div class="bf b bg ab du fl fm ac r fn fo"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Search"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div></a></div></div><div class="fk i l k"><div class="ac r"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span data-dd-action-name="Susi presentation tracker global_nav"><button class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton">Sign up</button></span></p><div class="fg m"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span data-dd-action-name="Susi presentation tracker global_nav"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fp-srinikorn.medium.com%2Freview-%25E0%25B8%25AA%25E0%25B8%25A3%25E0%25B9%2589%25E0%25B8%25B2%25E0%25B8%2587-api-%25E0%25B8%2594%25E0%25B9%2589%25E0%25B8%25A7%25E0%25B8%25A2-fastapi-%25E0%25B9%2580%25E0%25B8%25A3%25E0%25B9%2587%25E0%25B8%25A7-%25E0%25B9%2581%25E0%25B8%25A3%25E0%25B8%2587-%25E0%25B8%259F%25E0%25B8%25B4%25E0%25B9%2589%25E0%25B8%25A7-%25E0%25B9%2586-148b10416a70&amp;source=post_page---top_nav_layout_nav-----------------------global_nav------------------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="m" aria-hidden="false"><button class="aj fp an ac r ap fl fq fr fs" aria-label="user options menu" data-testid="headerUserIcon"><div class="m fl"><img alt="" class="m fd bx by bz cx" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32" height="32" loading="lazy" role="presentation"/><div class="ft bx m by bz fu o aj fv"></div></div></button></div></div></div><div class="ac"><div class="ca bh"><div class="m"><div class="fw fx fy fz ga m"><div class="ac cb"><div class="ci bh gb gc gd ge"></div></div><article><div class="m"><div class="m"><span class="m"></span><section><div><div class="fu gk gl gm gn go"></div><div class="gp gq gr gs gt"><div class="ac cb"><div class="ci bh gb gc gd ge"><div><h1 id="7932" class="pw-post-title gu gv gw bf gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw bk" data-testid="storyTitle">สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว !!!</h1><div><div class="speechify-ignore ac cp"><div class="speechify-ignore bh m"><div class="ac hx hy hz ia ib ic id ie if ig ih"><div class="ac r ih"><div class="ac ii"><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><a rel="noopener follow" href="/?source=post_page---byline--148b10416a70---------------------------------------" data-discover="true"><div class="m ij ik bx il im"><div class="m fl"><img alt="Bozz Srinikorn" class="m fd bx by bz cx" src="https://miro.medium.com/v2/resize:fill:64:64/1*J_JBV3DJjWXzoq2zpzSHFQ.jpeg" width="32" height="32" loading="lazy" data-testid="authorPhoto"/><div class="in bx m by bz fu o io fv"></div></div></div></a></div></div></div></div><span class="bf b bg ab bk"><div class="ip ac r"><div class="ac r iq"><div class="ac r"><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><span class="bf b bg ab bk"><a class="ag ah ai fh ak al am an ao ap aq ar as ir" data-testid="authorName" rel="noopener follow" href="/?source=post_page---byline--148b10416a70---------------------------------------" data-discover="true">Bozz Srinikorn</a></span></div></div></div></div><div class="is bm"></div></div></div></span></div><div class="ac r it"><span class="bf b bg ab du"><div class="ac af"><span data-testid="storyReadTime">8 min read</span><div class="iu iv m" aria-hidden="true"><span class="m" aria-hidden="true"><span class="bf b bg ab du">·</span></span></div><span data-testid="storyPublishDate">Sep 8, 2020</span></div></span></div></div><div class="ac cp iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl"><div class="i l x fi fj r"><div class="kb m"><div class="ac r kc kd"><div class="pw-multi-vote-icon fl ke kf kg kh"><span data-dd-action-name="Susi presentation tracker clap_footer"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" data-testid="headerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F148b10416a70&amp;operation=register&amp;redirect=https%3A%2F%2Fp-srinikorn.medium.com%2Freview-%25E0%25B8%25AA%25E0%25B8%25A3%25E0%25B9%2589%25E0%25B8%25B2%25E0%25B8%2587-api-%25E0%25B8%2594%25E0%25B9%2589%25E0%25B8%25A7%25E0%25B8%25A2-fastapi-%25E0%25B9%2580%25E0%25B8%25A3%25E0%25B9%2587%25E0%25B8%25A7-%25E0%25B9%2581%25E0%25B8%25A3%25E0%25B8%2587-%25E0%25B8%259F%25E0%25B8%25B4%25E0%25B9%2589%25E0%25B8%25A7-%25E0%25B9%2586-148b10416a70&amp;user=Bozz+Srinikorn&amp;userId=ec6cad91b3d3&amp;source=---header_actions--148b10416a70---------------------clap_footer------------------" rel="noopener follow"><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><div class="ki ap kj kk kl km an kn ko kp kh" role="presentation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></div></a></span></div><div class="pw-multi-vote-count m kq kr ks kt ku kv kw"><p class="bf b dv ab du"><span class="kx">--</span></p></div></div></div><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><button class="ap ki la lb ac r fm lc ld" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="kz"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bf b dv ab du"><span class="pw-responses-count ky kz">1</span></p></button></div></div></div></div><div class="ac r jm jn jo jp jq jr js jt ju jv jw jx jy jz ka"><div class="le l k j e"></div><div class="i l"><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><span data-dd-action-name="Susi presentation tracker bookmark_footer"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" data-testid="headerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F148b10416a70&amp;operation=register&amp;redirect=https%3A%2F%2Fp-srinikorn.medium.com%2Freview-%25E0%25B8%25AA%25E0%25B8%25A3%25E0%25B9%2589%25E0%25B8%25B2%25E0%25B8%2587-api-%25E0%25B8%2594%25E0%25B9%2589%25E0%25B8%25A7%25E0%25B8%25A2-fastapi-%25E0%25B9%2580%25E0%25B8%25A3%25E0%25B9%2587%25E0%25B8%25A7-%25E0%25B9%2581%25E0%25B8%25A3%25E0%25B8%2587-%25E0%25B8%259F%25E0%25B8%25B4%25E0%25B9%2589%25E0%25B8%25A7-%25E0%25B9%2586-148b10416a70&amp;source=---header_actions--148b10416a70---------------------bookmark_footer------------------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lf" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="ag fm ai fh ak al am lg ao ap aq ex lh li ld lj lk ll lm ln t lo lp lq lr ls lt lu v lv lw lx"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg><div class="k j e"><p class="bf b bg ab du">Share</p></div></button></div></div></div></div></div></div></div></div></div></div><blockquote class="ly lz ma"><p id="3421" class="mb mc md me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เริ่มต้นเขียน API ด้วย Python และ FastAPI ฟิ้ว ฟิ้ว ๆ</p></blockquote><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb nc"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*du7p50wS_fIsaC_lR18qsg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*du7p50wS_fIsaC_lR18qsg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*du7p50wS_fIsaC_lR18qsg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*du7p50wS_fIsaC_lR18qsg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*du7p50wS_fIsaC_lR18qsg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*du7p50wS_fIsaC_lR18qsg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*du7p50wS_fIsaC_lR18qsg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*du7p50wS_fIsaC_lR18qsg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*du7p50wS_fIsaC_lR18qsg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*du7p50wS_fIsaC_lR18qsg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*du7p50wS_fIsaC_lR18qsg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*du7p50wS_fIsaC_lR18qsg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*du7p50wS_fIsaC_lR18qsg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*du7p50wS_fIsaC_lR18qsg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="253" loading="eager" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">FastAPI</figcaption></figure></div></div></div><div class="ac cb oa ob oc od" role="separator"><span class="oe bx bm of og oh"></span><span class="oe bx bm of og oh"></span><span class="oe bx bm of og"></span></div><div class="gp gq gr gs gt"><div class="ac cb"><div class="ci bh gb gc gd ge"><p id="2e4e" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ก่อนอื่น ขอเล่นมุกก่อน</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb oi"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*UJQzNNHjCXJTCy2D.jpg 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*UJQzNNHjCXJTCy2D.jpg 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*UJQzNNHjCXJTCy2D.jpg 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*UJQzNNHjCXJTCy2D.jpg 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*UJQzNNHjCXJTCy2D.jpg 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*UJQzNNHjCXJTCy2D.jpg 1100w, https://miro.medium.com/v2/resize:fit:1000/format:webp/0*UJQzNNHjCXJTCy2D.jpg 1000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 500px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*UJQzNNHjCXJTCy2D.jpg 640w, https://miro.medium.com/v2/resize:fit:720/0*UJQzNNHjCXJTCy2D.jpg 720w, https://miro.medium.com/v2/resize:fit:750/0*UJQzNNHjCXJTCy2D.jpg 750w, https://miro.medium.com/v2/resize:fit:786/0*UJQzNNHjCXJTCy2D.jpg 786w, https://miro.medium.com/v2/resize:fit:828/0*UJQzNNHjCXJTCy2D.jpg 828w, https://miro.medium.com/v2/resize:fit:1100/0*UJQzNNHjCXJTCy2D.jpg 1100w, https://miro.medium.com/v2/resize:fit:1000/0*UJQzNNHjCXJTCy2D.jpg 1000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 500px"/><img alt="" class="bh nu nv c" width="500" height="531" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">FastAPI meme</figcaption></figure><p id="7308" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เดาว่าหลายคนอาจจะเคยเห็นโพสนี้ผ่าน feed กันมาบ้างแล้ว</p><p id="9f0a" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ประมาณว่า มีประกาศรับสมัคร Dev ที่มีประสบการณ์กับ FastAPI เกิน 4 ปี ซึ่งความเป็นจริง FastAPI เพิ่งมาประมาณปี 2019 เอง ทำให้แม้แต่คนที่เป็น Contributor หลักเอง ก็ยังมีประสบการณ์ไม่ถึง ทั้ง ๆ ที่ตัวเองเป็นสร้างเองนะ ฮ่า ๆ</p></div></div></div><div class="ac cb oa ob oc od" role="separator"><span class="oe bx bm of og oh"></span><span class="oe bx bm of og oh"></span><span class="oe bx bm of og"></span></div><div class="gp gq gr gs gt"><div class="ac cb"><div class="ci bh gb gc gd ge"><h1 id="cd4b" class="oj ok gw bf ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg bk">FastAPI คืออะไร</h1><p id="1478" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">คือ Framework สำหรับการสร้าง API เขียนด้วย Python โดยมี uvicorn เป็นตัว จัดการ run server และด้วยความที่ใช้ uvicorn ที่เป็น ASGI ทำให้รองรับการทำงานแบบ Asynchronous ไปโดยปริยาย</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb pm"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*xQHtjLAeyZOJQEHPmxz_Vw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*xQHtjLAeyZOJQEHPmxz_Vw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*xQHtjLAeyZOJQEHPmxz_Vw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*xQHtjLAeyZOJQEHPmxz_Vw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*xQHtjLAeyZOJQEHPmxz_Vw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*xQHtjLAeyZOJQEHPmxz_Vw.png 1100w, https://miro.medium.com/v2/resize:fit:754/format:webp/1*xQHtjLAeyZOJQEHPmxz_Vw.png 754w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 377px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*xQHtjLAeyZOJQEHPmxz_Vw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*xQHtjLAeyZOJQEHPmxz_Vw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*xQHtjLAeyZOJQEHPmxz_Vw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*xQHtjLAeyZOJQEHPmxz_Vw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*xQHtjLAeyZOJQEHPmxz_Vw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*xQHtjLAeyZOJQEHPmxz_Vw.png 1100w, https://miro.medium.com/v2/resize:fit:754/1*xQHtjLAeyZOJQEHPmxz_Vw.png 754w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 377px"/><img alt="" class="bh nu nv c" width="377" height="205" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Install Package</figcaption></figure><p id="868f" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk"><strong class="me gx">ตัวอย่าง code สร้าง API เริ่มต้นง่าย ๆ</strong></p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb pn"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*AaID2XLPUCuDbcs2Oivh1g.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*AaID2XLPUCuDbcs2Oivh1g.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*AaID2XLPUCuDbcs2Oivh1g.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*AaID2XLPUCuDbcs2Oivh1g.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*AaID2XLPUCuDbcs2Oivh1g.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*AaID2XLPUCuDbcs2Oivh1g.png 1100w, https://miro.medium.com/v2/resize:fit:942/format:webp/1*AaID2XLPUCuDbcs2Oivh1g.png 942w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 471px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*AaID2XLPUCuDbcs2Oivh1g.png 640w, https://miro.medium.com/v2/resize:fit:720/1*AaID2XLPUCuDbcs2Oivh1g.png 720w, https://miro.medium.com/v2/resize:fit:750/1*AaID2XLPUCuDbcs2Oivh1g.png 750w, https://miro.medium.com/v2/resize:fit:786/1*AaID2XLPUCuDbcs2Oivh1g.png 786w, https://miro.medium.com/v2/resize:fit:828/1*AaID2XLPUCuDbcs2Oivh1g.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*AaID2XLPUCuDbcs2Oivh1g.png 1100w, https://miro.medium.com/v2/resize:fit:942/1*AaID2XLPUCuDbcs2Oivh1g.png 942w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 471px"/><img alt="" class="bh nu nv c" width="471" height="312" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example of API via FastAPI</figcaption></figure><p id="845b" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk"><strong class="me gx">Run server</strong></p><p id="86df" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">วิธี run server ก็ง่าย ๆ จะใช้ __main__ หรือใช้ uvicorn command ก็ได้ รวมถึงถ้าใครเคยใช้ gunicorn มาก่อน FastAPI ก็รองรับนะ</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb po"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*6BeDRVOLopHJNBSLLFMRyQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*6BeDRVOLopHJNBSLLFMRyQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*6BeDRVOLopHJNBSLLFMRyQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*6BeDRVOLopHJNBSLLFMRyQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*6BeDRVOLopHJNBSLLFMRyQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*6BeDRVOLopHJNBSLLFMRyQ.png 1100w, https://miro.medium.com/v2/resize:fit:1278/format:webp/1*6BeDRVOLopHJNBSLLFMRyQ.png 1278w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 639px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*6BeDRVOLopHJNBSLLFMRyQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*6BeDRVOLopHJNBSLLFMRyQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*6BeDRVOLopHJNBSLLFMRyQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*6BeDRVOLopHJNBSLLFMRyQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*6BeDRVOLopHJNBSLLFMRyQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*6BeDRVOLopHJNBSLLFMRyQ.png 1100w, https://miro.medium.com/v2/resize:fit:1278/1*6BeDRVOLopHJNBSLLFMRyQ.png 1278w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 639px"/><img alt="" class="bh nu nv c" width="639" height="384" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI with Uvicorn</figcaption></figure><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb pp"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*6LDUm6xp0P1ou20BGjB4HQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*6LDUm6xp0P1ou20BGjB4HQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*6LDUm6xp0P1ou20BGjB4HQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*6LDUm6xp0P1ou20BGjB4HQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*6LDUm6xp0P1ou20BGjB4HQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*6LDUm6xp0P1ou20BGjB4HQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6LDUm6xp0P1ou20BGjB4HQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*6LDUm6xp0P1ou20BGjB4HQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*6LDUm6xp0P1ou20BGjB4HQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*6LDUm6xp0P1ou20BGjB4HQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*6LDUm6xp0P1ou20BGjB4HQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*6LDUm6xp0P1ou20BGjB4HQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*6LDUm6xp0P1ou20BGjB4HQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*6LDUm6xp0P1ou20BGjB4HQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="93" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Run server via python execute command</figcaption></figure><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb pq"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*gNho70dcAQSLGumTuqtZCA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*gNho70dcAQSLGumTuqtZCA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*gNho70dcAQSLGumTuqtZCA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*gNho70dcAQSLGumTuqtZCA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*gNho70dcAQSLGumTuqtZCA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*gNho70dcAQSLGumTuqtZCA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gNho70dcAQSLGumTuqtZCA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*gNho70dcAQSLGumTuqtZCA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*gNho70dcAQSLGumTuqtZCA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*gNho70dcAQSLGumTuqtZCA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*gNho70dcAQSLGumTuqtZCA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*gNho70dcAQSLGumTuqtZCA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*gNho70dcAQSLGumTuqtZCA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*gNho70dcAQSLGumTuqtZCA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="88" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Run server via Uvicorn Command</figcaption></figure><p id="8d40" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จะเห็นได้ว่าเป็นการสร้าง server ที่ Lightweight มาก ๆ และไม่ซับซ้อน แค่ Import เข้ามา เรียก class จากนั้นก็ลุยได้เลย ลักษณะจะคล้าย Flask ถ้าใครเคยเขียน Flask มา จะต้องชอบ FastAPI อย่างแน่นอน (มั้งนะ)</p><h1 id="8d19" class="oj ok gw bf ol om pr oo op oq ps os ot ou pt ow ox oy pu pa pb pc pv pe pf pg bk">มาดู Feature ของ FastAPI บ้าง</h1><p id="b091" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">ก่อนอื่นเลย เพื่อให้เห็นภาพมากขึ้น ผมจะ mockup project ขึ้นมา แล้วนำ Feature ของ FastAPI มาใช้ประกอบประมาณ 20% จะได้เห็น code ด้วยไปเลย</p><p id="0892" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เราจะลอง mockup ทำ API สำหรับ movies store อารมณ์ประมาณเป็นร้านซื้อขาย viedeo ง่าย ๆ กัน</p><p id="b578" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">โดย code ที่เห็นต่อไปนี้จะเป็นเพียง sample เท่านั้นเพื่อให้เห็นภาพของ Feature มากขึ้น ส่วนใครอยากเห็นของเต็มแบบขนาดเอาไป deploy ใช้ได้เลย สามารถไปดูได้ที่ GitHub ของผม<a class="ag pw" href="https://github.com/bozzlab/fastapi-movies" rel="noopener ugc nofollow" target="_blank">ที่นี่</a></p><p id="6a9d" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เพราะอีกบทความนึงจะพูดถึงการทำ CI/CD บน Cloud Build ของ Google Cloud เราจะนำ FastAPI ไป deploy แบบ Serverless ของ GCP <a class="ag pw" href="https://medium.com/@p.srinikorn/%E0%B8%AA%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%87-ci-cd-pipeline-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-google-cloud-build-%E0%B8%A0%E0%B8%B2%E0%B8%A2%E0%B9%83%E0%B8%99-5-%E0%B8%99%E0%B8%B2%E0%B8%97%E0%B8%B5-56abf2472567" rel="noopener">คลิกอ่านที่นี่</a></p></div></div></div><div class="ac cb oa ob oc od" role="separator"><span class="oe bx bm of og oh"></span><span class="oe bx bm of og oh"></span><span class="oe bx bm of og"></span></div><div class="gp gq gr gs gt"><div class="ac cb"><div class="ci bh gb gc gd ge"><h1 id="93eb" class="oj ok gw bf ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg bk">1. HTTP Method ทั่วไป [Request and Response]</h1><p id="1dfe" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">เรามาดูตัวอย่าง code สำหรับ method http ที่ใช้เป็นประจำในการทำ API รวมถึงวิธีรับ Request ไม่ว่าจะเป็น Header, Cookie, Body, File และวิธี Response ต่าง ๆ ที่ FastAPI มีให้เราใช้แบบสำเร็จรูป</p><p id="9427" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เริ่มต้นจากสิ่งง่าย ๆ นี้ก่อน</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example code API</figcaption></figure><p id="b970" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ที่นี้ลองใช้ curl ในการยิง request ดู ก็พบว่าใช้ได้ปกติ เรียบง่าย</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qa"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*OYeQOOpa1FoEl7GBCc_eXQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*OYeQOOpa1FoEl7GBCc_eXQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*OYeQOOpa1FoEl7GBCc_eXQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*OYeQOOpa1FoEl7GBCc_eXQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*OYeQOOpa1FoEl7GBCc_eXQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*OYeQOOpa1FoEl7GBCc_eXQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OYeQOOpa1FoEl7GBCc_eXQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*OYeQOOpa1FoEl7GBCc_eXQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*OYeQOOpa1FoEl7GBCc_eXQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*OYeQOOpa1FoEl7GBCc_eXQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*OYeQOOpa1FoEl7GBCc_eXQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*OYeQOOpa1FoEl7GBCc_eXQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*OYeQOOpa1FoEl7GBCc_eXQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*OYeQOOpa1FoEl7GBCc_eXQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="126" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Mock request via cURL</figcaption></figure><p id="e0f6" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ตัวอย่าง code ด้านบนเป็น GET Method ซึ่งเราสามารถกำหนด HTTP Method ผ่าน @app.method ได้เลย ไม่ว่าจะเป็น GET, POST, PUT, PATCH, DELETE</p><p id="ce4a" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk"><strong class="me gx">Query String</strong></p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example code — Query String</figcaption></figure><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qb"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*OHkap0JLBVFvDuqGXk8TEA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*OHkap0JLBVFvDuqGXk8TEA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*OHkap0JLBVFvDuqGXk8TEA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*OHkap0JLBVFvDuqGXk8TEA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*OHkap0JLBVFvDuqGXk8TEA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*OHkap0JLBVFvDuqGXk8TEA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OHkap0JLBVFvDuqGXk8TEA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*OHkap0JLBVFvDuqGXk8TEA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*OHkap0JLBVFvDuqGXk8TEA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*OHkap0JLBVFvDuqGXk8TEA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*OHkap0JLBVFvDuqGXk8TEA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*OHkap0JLBVFvDuqGXk8TEA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*OHkap0JLBVFvDuqGXk8TEA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*OHkap0JLBVFvDuqGXk8TEA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="111" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL with Query String</figcaption></figure><p id="3e18" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ในส่วนนี้ผมได้ทำการยิง request ไปและมี query string ชื่อ <strong class="me gx">name=Parasite</strong> เพื่อค้นหาข้อมูลด้วยชื่อหนังและให้ return ข้อมูลกลับมา</p><p id="c05c" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จะเห็นว่า แค่เพิ่ม argument ใน function ของ API และกำหนด type ก็สามารถใช้ได้แล้ว ส่วน None ก็คือ เรา define default value ของ param นี้ไว้ หรือจะสื่อในทำนองว่า field นี้ non-required นะ</p><blockquote class="ly lz ma"><p id="58b7" class="mb mc md me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">แต่ถ้าอยากทำให้ field นี้ required ล่ะ ทำอย่างไร</p></blockquote><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — Query String request</figcaption></figure><p id="3768" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เราก็แค่เอา None ออกเท่านั้น เหมือนว่าเราไม่ได้ define default value ของ param ตัวนั้นไว้</p><p id="87c0" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">โอเคที่นี้มาลองยิง request อีกรอบ ทั้งใส่และไม่ใส่ field name</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qb"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*oxBMoquaSWDDxBXqCu2_qw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*oxBMoquaSWDDxBXqCu2_qw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*oxBMoquaSWDDxBXqCu2_qw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*oxBMoquaSWDDxBXqCu2_qw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*oxBMoquaSWDDxBXqCu2_qw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*oxBMoquaSWDDxBXqCu2_qw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oxBMoquaSWDDxBXqCu2_qw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*oxBMoquaSWDDxBXqCu2_qw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*oxBMoquaSWDDxBXqCu2_qw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*oxBMoquaSWDDxBXqCu2_qw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*oxBMoquaSWDDxBXqCu2_qw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*oxBMoquaSWDDxBXqCu2_qw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*oxBMoquaSWDDxBXqCu2_qw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*oxBMoquaSWDDxBXqCu2_qw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="212" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL with Query String with required field</figcaption></figure><p id="9feb" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จะเห็นว่า ถ้าไม่ได้ใส่ name ใน query string, API ก็จะทำการ return error กลับมาให้เลย</p><h1 id="e94c" class="oj ok gw bf ol om pr oo op oq ps os ot ou pt ow ox oy pu pa pb pc pv pe pf pg bk">Header</h1><p id="344d" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">ก่อนที่เราจะรับ header เราต้องทำการ import Header เข้ามาก่อน โดยเราสามารถ import จาก FastAPI ได้เลย ตามรูปครับ</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — Header Request</figcaption></figure><p id="4be5" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เรามาต่อกันที่ API <strong class="me gx">/member</strong> โดย path นี้จะมีหน้าที่เช็คว่าลูกค้าที่เข้ามาใช้งานมีข้อมูลในระบบแล้วหรือยัง</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qc"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*FV1VNWe-w_ApcWIegyDaDQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*FV1VNWe-w_ApcWIegyDaDQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*FV1VNWe-w_ApcWIegyDaDQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*FV1VNWe-w_ApcWIegyDaDQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*FV1VNWe-w_ApcWIegyDaDQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*FV1VNWe-w_ApcWIegyDaDQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FV1VNWe-w_ApcWIegyDaDQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*FV1VNWe-w_ApcWIegyDaDQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*FV1VNWe-w_ApcWIegyDaDQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*FV1VNWe-w_ApcWIegyDaDQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*FV1VNWe-w_ApcWIegyDaDQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*FV1VNWe-w_ApcWIegyDaDQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*FV1VNWe-w_ApcWIegyDaDQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*FV1VNWe-w_ApcWIegyDaDQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="327" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL — Header required</figcaption></figure><p id="1a26" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จากตรงนี้เราก็จะเห็นว่าการรับ Header นั้นก็ง่าย ๆ สามารถใช้ Header() ได้เลยทันที โดยเรากำหนดให้ชื่อ key ของ Header ตัวนั้น ๆ และกำหนดค่าที่รับมาเป็น type string ได้เลย ส่วนถ้าอยากให้เป็น non-required ใน function ก็ใส่ None ใน Header แบบนี้ <strong class="me gx">Header(…) =&gt; Header(None)</strong></p><h1 id="4a1b" class="oj ok gw bf ol om pr oo op oq ps os ot ou pt ow ox oy pu pa pb pc pv pe pf pg bk"><strong class="am">Cookie</strong></h1><p id="11ed" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">ต่อจาก Header ก่อนหน้า เราเห็นแล้วว่าถ้าสมมุติต้องการจะรับค่า Header จาก Client เราก็สามารถทำได้ง่าย ๆ ที่นี้เราจะมาดูตัวต่อไปที่สำคัญเช่นกันก็คือ Cookie</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — Cookie</figcaption></figure><p id="5679" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ก่อนอื่นให้เรา import <strong class="me gx">Cookie</strong> เข้ามาก่อน ตามด้านบน แล้วมาต่อกันที่ <strong class="me gx">check_token </strong>จะเห็นว่าลักษณะจะคล้าย ๆ เหมือน function ที่ผ่านมาเกือบทั้งหมด เพียงแค่เปลี่ยน argument ให้รับค่าจาก <strong class="me gx">Cookie </strong>เท่านั้น</p><p id="2d21" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ลอง curl ดูหน่อย ใช้ได้จริงไหม</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qd"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*QDd8bq5bHCtOucMslxk_dA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*QDd8bq5bHCtOucMslxk_dA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*QDd8bq5bHCtOucMslxk_dA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*QDd8bq5bHCtOucMslxk_dA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*QDd8bq5bHCtOucMslxk_dA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*QDd8bq5bHCtOucMslxk_dA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QDd8bq5bHCtOucMslxk_dA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*QDd8bq5bHCtOucMslxk_dA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*QDd8bq5bHCtOucMslxk_dA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*QDd8bq5bHCtOucMslxk_dA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*QDd8bq5bHCtOucMslxk_dA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*QDd8bq5bHCtOucMslxk_dA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*QDd8bq5bHCtOucMslxk_dA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*QDd8bq5bHCtOucMslxk_dA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="299" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL — Cookie</figcaption></figure><h1 id="f3c8" class="oj ok gw bf ol om pr oo op oq ps os ot ou pt ow ox oy pu pa pb pc pv pe pf pg bk">Body</h1><p id="000d" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">เราลองใช้ GET มาเยอะละ ทีนี้ลองเปลี่ยนเป็นฝั่ง POST บ้าง</p><p id="d376" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ก่อนอื่นที่จะทำการรับ body ผมอยากแนะนำ lib ตัวนึงที่ทาง FastAPI มักจะใช้ร่วมกันเพื่อรับ body message โดยมีชื่อว่า <strong class="me gx">pydantic </strong>ซึ่งจะถูกนำมาใช้เพื่อให้งานของเราพัฒนาได้ง่ายขึ้นหรือจะมองเป็น class object ก็ได้นะ</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — Body</figcaption></figure><p id="08a5" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เราจะเห็น <strong class="me gx">MoviesObject</strong> ที่เป็น class มี field name และ genre ที่เป็น type string อยู่นั้น โดยคราว ๆ ในตอนนี้เราจะใช้มันทำหน้าที่เป็น object เพื่อเราให้สามารถทำการ reference type ได้ จาก param ที่เราได้รับค่าจาก body ซึ่งถ้าใครเขียน Python แล้วสนใจวิธีการสร้าง object ด้วย <strong class="me gx">pydantic</strong> ก็สามารถไปหาอ่านเพิ่มเติมได้</p><p id="2087" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เรากลับมาดูตรง <strong class="me gx">insert_movies() </strong>ที่เป็น function สำหรับการเพิ่ม ข้อมูล video เข้าไป โดยมี argument <strong class="me gx">req_body</strong> ที่จะมี type เป็น <strong class="me gx">MoviesObject </strong>และรับค่าจาก <strong class="me gx">Body(…) </strong>ในขณะเดียวกันก็มี <strong class="me gx">x_username</strong> จาก <strong class="me gx">Header</strong> เช่นกัน</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb qe"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*c7mxbjbCtVhbP5DMu3sXBw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*c7mxbjbCtVhbP5DMu3sXBw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*c7mxbjbCtVhbP5DMu3sXBw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*c7mxbjbCtVhbP5DMu3sXBw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*c7mxbjbCtVhbP5DMu3sXBw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*c7mxbjbCtVhbP5DMu3sXBw.png 1100w, https://miro.medium.com/v2/resize:fit:1178/format:webp/1*c7mxbjbCtVhbP5DMu3sXBw.png 1178w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 589px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*c7mxbjbCtVhbP5DMu3sXBw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*c7mxbjbCtVhbP5DMu3sXBw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*c7mxbjbCtVhbP5DMu3sXBw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*c7mxbjbCtVhbP5DMu3sXBw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*c7mxbjbCtVhbP5DMu3sXBw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*c7mxbjbCtVhbP5DMu3sXBw.png 1100w, https://miro.medium.com/v2/resize:fit:1178/1*c7mxbjbCtVhbP5DMu3sXBw.png 1178w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 589px"/><img alt="" class="bh nu nv c" width="589" height="384" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL — Header and Body</figcaption></figure><p id="de8f" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ข้อดีของการใช้ BaseModel มาช่วยในการรับ body message คือเราสามารถคุม schema (JSON) ได้ง่ายขึ้น เพราะเรากำหนดได้ว่า field ไหนเป็น required หรือ non-required รวมถึง type ของ field และสามารถกำหนด default value ได้ด้วย</p><p id="2afe" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เช่น ถ้า client ส่ง JSON มาไม่ครบ ก็จะ return error กลับไปเลย</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb qf"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*q8CMO011yFXJOzvl0nHWHw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*q8CMO011yFXJOzvl0nHWHw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*q8CMO011yFXJOzvl0nHWHw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*q8CMO011yFXJOzvl0nHWHw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*q8CMO011yFXJOzvl0nHWHw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*q8CMO011yFXJOzvl0nHWHw.png 1100w, https://miro.medium.com/v2/resize:fit:958/format:webp/1*q8CMO011yFXJOzvl0nHWHw.png 958w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 479px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*q8CMO011yFXJOzvl0nHWHw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*q8CMO011yFXJOzvl0nHWHw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*q8CMO011yFXJOzvl0nHWHw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*q8CMO011yFXJOzvl0nHWHw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*q8CMO011yFXJOzvl0nHWHw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*q8CMO011yFXJOzvl0nHWHw.png 1100w, https://miro.medium.com/v2/resize:fit:958/1*q8CMO011yFXJOzvl0nHWHw.png 958w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 479px"/><img alt="" class="bh nu nv c" width="479" height="456" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL — Header and Body, Error Format</figcaption></figure><p id="4f8b" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ถ้ากรณีเราต้องการกำหนด default value สำหรับ field นั้น ๆ เองก็สามารถทำได้ง่าย ๆ ตาม code ด้านล่าง</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code —Body with Pydantic model</figcaption></figure><p id="308b" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จะเห็นว่า field name มี default value เป็น <strong class="me gx">untitled</strong> แล้ว ทีนี้ลองยิง request แบบไม่ตรงตาม schema บ้าง โดยผมจะไม่ส่ง field name ไป</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb qg"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*-r91CiE5wsmSI7j6cv3VVA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*-r91CiE5wsmSI7j6cv3VVA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*-r91CiE5wsmSI7j6cv3VVA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*-r91CiE5wsmSI7j6cv3VVA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*-r91CiE5wsmSI7j6cv3VVA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*-r91CiE5wsmSI7j6cv3VVA.png 1100w, https://miro.medium.com/v2/resize:fit:1076/format:webp/1*-r91CiE5wsmSI7j6cv3VVA.png 1076w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 538px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*-r91CiE5wsmSI7j6cv3VVA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*-r91CiE5wsmSI7j6cv3VVA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*-r91CiE5wsmSI7j6cv3VVA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*-r91CiE5wsmSI7j6cv3VVA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*-r91CiE5wsmSI7j6cv3VVA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*-r91CiE5wsmSI7j6cv3VVA.png 1100w, https://miro.medium.com/v2/resize:fit:1076/1*-r91CiE5wsmSI7j6cv3VVA.png 1076w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 538px"/><img alt="" class="bh nu nv c" width="538" height="384" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL — Header and Body with non-full format</figcaption></figure><p id="226a" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จะเห็นว่าไม่มีการ return 422 กลับมาเลย เพราะเราปรับ field ให้เป็น non-required แล้ว แถมก็ตั้ง default value ของ field name ไว้ ทุกอย่างเลยใช้ได้ปกติ</p><p id="4da0" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เพิ่มเติมเราจะเห็น <strong class="me gx">genre</strong> ที่เป็น field แนวตัวเลือกได้ ก็คงจะนึกถึง Enum กัน โดยตัว <strong class="me gx">Pydantic</strong> ก็ support ในส่วนนี้ด้วยลองไปดูกัน</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code —Body with Pydantic Enum Model</figcaption></figure><p id="f502" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">โดยเราจะต้องทำการ import Enum ตามรูป และสร้าง class object ขึ้นมาเพื่อให้เป็น reference สำหรับ ประเภทของ video</p><p id="b8e4" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ทีนี้ลองมายิง request กันดู</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb po"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*Lh9yY2Whocbvo0Bc1u8FCA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*Lh9yY2Whocbvo0Bc1u8FCA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*Lh9yY2Whocbvo0Bc1u8FCA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*Lh9yY2Whocbvo0Bc1u8FCA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*Lh9yY2Whocbvo0Bc1u8FCA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Lh9yY2Whocbvo0Bc1u8FCA.png 1100w, https://miro.medium.com/v2/resize:fit:1278/format:webp/1*Lh9yY2Whocbvo0Bc1u8FCA.png 1278w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 639px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*Lh9yY2Whocbvo0Bc1u8FCA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*Lh9yY2Whocbvo0Bc1u8FCA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*Lh9yY2Whocbvo0Bc1u8FCA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*Lh9yY2Whocbvo0Bc1u8FCA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*Lh9yY2Whocbvo0Bc1u8FCA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*Lh9yY2Whocbvo0Bc1u8FCA.png 1100w, https://miro.medium.com/v2/resize:fit:1278/1*Lh9yY2Whocbvo0Bc1u8FCA.png 1278w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 639px"/><img alt="" class="bh nu nv c" width="639" height="384" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL — Cookie and Body with enum format</figcaption></figure><p id="a4b6" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">แล้วถ้าสมมุติ gerne ที่ client ส่งมา ไม่ได้มีอยู่ใน list ที่เรากำหนดไว้ล่ะ จะเกิดอะไรขึ้น</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qh"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="288" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL — Cookie and Body with enum format, error</figcaption></figure><p id="2020" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ก็จะเห็นว่า client ได้รับ return error กลับไปนั้นเอง</p><h1 id="fc36" class="oj ok gw bf ol om pr oo op oq ps os ot ou pt ow ox oy pu pa pb pc pv pe pf pg bk">File</h1><p id="44f0" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">มาต่อเนื่องกันกับฝั่ง POST แต่คราวนี้มาดูพวก Body ที่ไม่ใช่ JSON บ้าง</p><p id="180c" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เราจะมาดูที่การอ่าน File ไม่ว่าจะเป็นอะไรก็ตาม ในตัวอย่างนี้จะลอง test ด้วยการ upload รูปเข้าไป แล้วให้ return ชื่อไฟล์ กับ size ตามมา</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — File, UploadFile</figcaption></figure><p id="cfc2" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ก่อนอื่นให้เรา import <strong class="me gx">File</strong> และ <strong class="me gx">UploadFile</strong> เข้ามาก่อน จากนั้นให้มาดูที่ <strong class="me gx">insert_image_profile</strong>() แล้วก็ยิง request ดู</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qi"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*Tf6vH5ggDXrqwZDpDfp7ow.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*Tf6vH5ggDXrqwZDpDfp7ow.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*Tf6vH5ggDXrqwZDpDfp7ow.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*Tf6vH5ggDXrqwZDpDfp7ow.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*Tf6vH5ggDXrqwZDpDfp7ow.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Tf6vH5ggDXrqwZDpDfp7ow.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tf6vH5ggDXrqwZDpDfp7ow.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*Tf6vH5ggDXrqwZDpDfp7ow.png 640w, https://miro.medium.com/v2/resize:fit:720/1*Tf6vH5ggDXrqwZDpDfp7ow.png 720w, https://miro.medium.com/v2/resize:fit:750/1*Tf6vH5ggDXrqwZDpDfp7ow.png 750w, https://miro.medium.com/v2/resize:fit:786/1*Tf6vH5ggDXrqwZDpDfp7ow.png 786w, https://miro.medium.com/v2/resize:fit:828/1*Tf6vH5ggDXrqwZDpDfp7ow.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*Tf6vH5ggDXrqwZDpDfp7ow.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*Tf6vH5ggDXrqwZDpDfp7ow.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="339" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL — POST File</figcaption></figure><p id="0b37" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ในตรงนี้ถ้าใครลองแล้วใช้ไม่ได้หรือเกิด error ฝั่ง server ให้ลองเช็คว่าใน environment ของเรามี <strong class="me gx">python-multipart</strong> แล้วหรือยัง</p><h1 id="e3a1" class="oj ok gw bf ol om pr oo op oq ps os ot ou pt ow ox oy pu pa pb pc pv pe pf pg bk">Response</h1><p id="a607" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">ตอนนี้เราเห็น GET / POST แบบเบื้องต้นไปบ้างละ ในหัวข้อนี้จะพูดถึงการปรับแก้ไข Response message บ้าง</p><p id="e7ab" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">โดยต้องย้อนกลับไปนิดนึงว่าตัว FastAPI ใช้ <strong class="me gx">Starlette</strong> มา develop ตัว Framework ต่อ ซึ่ง starlette ก็เป็น framework สำหรับทำ web service เหมือนกัน ทำให้เราสามารถเรียกใช้ method ของ starlette ได้เลยโดยไม่ต้องลง package starlette เลย (เพราะถูกลงมาให้ตอนลง FastAPI)</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — Response and Starlette</figcaption></figure><p id="9bc5" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">โดยครั้งก่อน <strong class="me gx">/movies</strong> ของเราเป็นการ POST เพื่อแก้ไข object ใน server แต่เราอยากเปลี่ยน status code จาก 200 OK ให้เป็น 201 Created สามารถทำง่าย ๆ ด้วยการ import <strong class="me gx">starlette.response</strong> เข้ามา แล้วเรียกใช้ <strong class="me gx">JSONResponse</strong> แล้วปรับแก้ตรงส่วน return ของ function</p><p id="cf18" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ทีนี้ลองยิง request ดู</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb po"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*Yb1ecCwmg-YThvAAN2hbPg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*Yb1ecCwmg-YThvAAN2hbPg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*Yb1ecCwmg-YThvAAN2hbPg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*Yb1ecCwmg-YThvAAN2hbPg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*Yb1ecCwmg-YThvAAN2hbPg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Yb1ecCwmg-YThvAAN2hbPg.png 1100w, https://miro.medium.com/v2/resize:fit:1278/format:webp/1*Yb1ecCwmg-YThvAAN2hbPg.png 1278w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 639px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*Yb1ecCwmg-YThvAAN2hbPg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*Yb1ecCwmg-YThvAAN2hbPg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*Yb1ecCwmg-YThvAAN2hbPg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*Yb1ecCwmg-YThvAAN2hbPg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*Yb1ecCwmg-YThvAAN2hbPg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*Yb1ecCwmg-YThvAAN2hbPg.png 1100w, https://miro.medium.com/v2/resize:fit:1278/1*Yb1ecCwmg-YThvAAN2hbPg.png 1278w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 639px"/><img alt="" class="bh nu nv c" width="639" height="384" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL — POST with 201 Created</figcaption></figure><p id="305a" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จะเห็นว่า status code กลายเป็น 201 Created แล้ว</p><p id="116a" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เพิ่มเติมใน<strong class="me gx"> starlette.response</strong> ไม่ได้มีแค่ <strong class="me gx">JSONResponse</strong> อันที่จริงมีมากกว่านั้นเยอะมาก เช่น <strong class="me gx">PlainTextReponse</strong>, <strong class="me gx">HTMLResponse</strong>, <strong class="me gx">FileResponse</strong>, <strong class="me gx">StreamingResponse</strong> บลา ๆ เยอะมากให้เราเรียกมาใช้ได้เลยตามความต้องการ</p></div></div></div><div class="ac cb oa ob oc od" role="separator"><span class="oe bx bm of og oh"></span><span class="oe bx bm of og oh"></span><span class="oe bx bm of og"></span></div><div class="gp gq gr gs gt"><div class="ac cb"><div class="ci bh gb gc gd ge"><h1 id="5254" class="oj ok gw bf ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg bk">2. API Documents</h1><p id="283c" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">นับว่าเป็นของดีของเจ้าตัว FastAPI เลย เพราะว่าถ้าหากใครเคยประสบปัญหาเวลาคุยกับทีมหรือเพื่อนร่วมงาน ไม่ว่าจะเป็น Backend ด้วยกันเอง หรือ Frontend ที่จะคอยถามข้อมูลประว่า path ไหนทำอะไร รับอะไร return อะไร ต้อง auth ไหม วิธีการแก้ปัญหาก็มักจะจบที่ทำ document กลางขึ้นมา เพื่อให้ทุกคนในทีมได้รับรู้อย่างเท่ากัน</p><blockquote class="ly lz ma"><p id="5cb5" class="mb mc md me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">แต่ประเด็นมันอยู่ตรงที่เราจะทำ document รึเปล่า 5555555</p></blockquote></div></div><div class="ni"><div class="ac cb"><div class="qj qk ql qm qn qo cf qp cg qq ci bh"><figure class="nd ne nf ng nh ni qs qt paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qr"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*L74Lq_SNTKEtN0f-MBY0dQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*L74Lq_SNTKEtN0f-MBY0dQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*L74Lq_SNTKEtN0f-MBY0dQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*L74Lq_SNTKEtN0f-MBY0dQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*L74Lq_SNTKEtN0f-MBY0dQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*L74Lq_SNTKEtN0f-MBY0dQ.png 1100w, https://miro.medium.com/v2/resize:fit:2000/1*L74Lq_SNTKEtN0f-MBY0dQ.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh nu nv c" width="1000" height="368" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">FastAPI documents</figcaption></figure></div></div></div><div class="ac cb"><div class="ci bh gb gc gd ge"><p id="acc1" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">หลายคนอาจจะรู้จักตัว swagger ที่ใช้ YAML มาช่วยเขียน docs ให้เรา ซึ่งก็ช่วยได้ดีระดับนึง แต่พองานเรา scale ใหญ่ขึ้นก็จะมีปัญหาขึ้นมา ประมาณว่า <strong class="me gx">ขี้เกียจ</strong></p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qu"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*WKz-Gna7ytImaEHy.jpg 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*WKz-Gna7ytImaEHy.jpg 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*WKz-Gna7ytImaEHy.jpg 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*WKz-Gna7ytImaEHy.jpg 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*WKz-Gna7ytImaEHy.jpg 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*WKz-Gna7ytImaEHy.jpg 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WKz-Gna7ytImaEHy.jpg 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*WKz-Gna7ytImaEHy.jpg 640w, https://miro.medium.com/v2/resize:fit:720/0*WKz-Gna7ytImaEHy.jpg 720w, https://miro.medium.com/v2/resize:fit:750/0*WKz-Gna7ytImaEHy.jpg 750w, https://miro.medium.com/v2/resize:fit:786/0*WKz-Gna7ytImaEHy.jpg 786w, https://miro.medium.com/v2/resize:fit:828/0*WKz-Gna7ytImaEHy.jpg 828w, https://miro.medium.com/v2/resize:fit:1100/0*WKz-Gna7ytImaEHy.jpg 1100w, https://miro.medium.com/v2/resize:fit:1400/0*WKz-Gna7ytImaEHy.jpg 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="197" loading="lazy" role="presentation"/></picture></div></div></figure><p id="36a1" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">แต่ถ้าคุณใช้ FastAPI จะไม่เจอปัญหาพวกนั้น เราแค่ทำหน้าที่ dev อย่างเดียว เพราะ FastAPI จะ generate docs ให้เราทันที</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qv"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*gkOCrICOFr093WsK.gif 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*gkOCrICOFr093WsK.gif 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*gkOCrICOFr093WsK.gif 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*gkOCrICOFr093WsK.gif 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*gkOCrICOFr093WsK.gif 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*gkOCrICOFr093WsK.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gkOCrICOFr093WsK.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*gkOCrICOFr093WsK.gif 640w, https://miro.medium.com/v2/resize:fit:720/0*gkOCrICOFr093WsK.gif 720w, https://miro.medium.com/v2/resize:fit:750/0*gkOCrICOFr093WsK.gif 750w, https://miro.medium.com/v2/resize:fit:786/0*gkOCrICOFr093WsK.gif 786w, https://miro.medium.com/v2/resize:fit:828/0*gkOCrICOFr093WsK.gif 828w, https://miro.medium.com/v2/resize:fit:1100/0*gkOCrICOFr093WsK.gif 1100w, https://miro.medium.com/v2/resize:fit:1400/0*gkOCrICOFr093WsK.gif 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="394" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example of API default document</figcaption></figure><p id="408d" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">แค่เรา run server ขึ้นมาแล้วเปลี่ยน path ไปที่ <strong class="me gx">/docs </strong>อย่างของผมเป็น <strong class="me gx">0.0.0.0:8080/docs </strong>เพียงเท่านี้เราก็จะได้หน้า documents ของ API ขึ้นมาแล้วครับ สามารถใช้ Test ได้ด้วย อันนี้โคตรดี</p></div></div><div class="ni"><div class="ac cb"><div class="qj qk ql qm qn qo cf qp cg qq ci bh"><figure class="nd ne nf ng nh ni qs qt paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qr"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/1*L74Lq_SNTKEtN0f-MBY0dQ.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*L74Lq_SNTKEtN0f-MBY0dQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*L74Lq_SNTKEtN0f-MBY0dQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*L74Lq_SNTKEtN0f-MBY0dQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*L74Lq_SNTKEtN0f-MBY0dQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*L74Lq_SNTKEtN0f-MBY0dQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*L74Lq_SNTKEtN0f-MBY0dQ.png 1100w, https://miro.medium.com/v2/resize:fit:2000/1*L74Lq_SNTKEtN0f-MBY0dQ.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh nu nv c" width="1000" height="368" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">FastAPI documents</figcaption></figure></div></div></div></div><div class="ac cb oa ob oc od" role="separator"><span class="oe bx bm of og oh"></span><span class="oe bx bm of og oh"></span><span class="oe bx bm of og"></span></div><div class="gp gq gr gs gt"><div class="ac cb"><div class="ci bh gb gc gd ge"><h1 id="5e7d" class="oj ok gw bf ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg bk"><strong class="am">ตัวอย่างแบบชัด ๆ</strong></h1><blockquote class="ly lz ma"><p id="12fc" class="mb mc md me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk"><strong class="me gx">GET [Query String]</strong></p></blockquote><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qw"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*lzWucXxjCvAf6pccagdTIA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*lzWucXxjCvAf6pccagdTIA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*lzWucXxjCvAf6pccagdTIA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*lzWucXxjCvAf6pccagdTIA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*lzWucXxjCvAf6pccagdTIA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*lzWucXxjCvAf6pccagdTIA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lzWucXxjCvAf6pccagdTIA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*lzWucXxjCvAf6pccagdTIA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*lzWucXxjCvAf6pccagdTIA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*lzWucXxjCvAf6pccagdTIA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*lzWucXxjCvAf6pccagdTIA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*lzWucXxjCvAf6pccagdTIA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*lzWucXxjCvAf6pccagdTIA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*lzWucXxjCvAf6pccagdTIA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="858" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">FastAPI document — GET Method | request and response</figcaption></figure><blockquote class="ly lz ma"><p id="ad98" class="mb mc md me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk"><strong class="me gx">POST [JSON]</strong></p></blockquote><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb qx"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*e7mF8HRMBjp7MCP9VsjKaw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*e7mF8HRMBjp7MCP9VsjKaw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*e7mF8HRMBjp7MCP9VsjKaw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*e7mF8HRMBjp7MCP9VsjKaw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*e7mF8HRMBjp7MCP9VsjKaw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*e7mF8HRMBjp7MCP9VsjKaw.png 1100w, https://miro.medium.com/v2/resize:fit:1112/format:webp/1*e7mF8HRMBjp7MCP9VsjKaw.png 1112w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 556px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*e7mF8HRMBjp7MCP9VsjKaw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*e7mF8HRMBjp7MCP9VsjKaw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*e7mF8HRMBjp7MCP9VsjKaw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*e7mF8HRMBjp7MCP9VsjKaw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*e7mF8HRMBjp7MCP9VsjKaw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*e7mF8HRMBjp7MCP9VsjKaw.png 1100w, https://miro.medium.com/v2/resize:fit:1112/1*e7mF8HRMBjp7MCP9VsjKaw.png 1112w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 556px"/><img alt="" class="bh nu nv c" width="556" height="426" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">FastAPI document — POST Method | request</figcaption></figure></div></div><div class="ni"><div class="ac cb"><div class="qj qk ql qm qn qo cf qp cg qq ci bh"><figure class="nd ne nf ng nh ni qs qt paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qy"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*E3CkmZlZHxXPhZze-J0YzQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*E3CkmZlZHxXPhZze-J0YzQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*E3CkmZlZHxXPhZze-J0YzQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*E3CkmZlZHxXPhZze-J0YzQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*E3CkmZlZHxXPhZze-J0YzQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*E3CkmZlZHxXPhZze-J0YzQ.png 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/1*E3CkmZlZHxXPhZze-J0YzQ.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*E3CkmZlZHxXPhZze-J0YzQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*E3CkmZlZHxXPhZze-J0YzQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*E3CkmZlZHxXPhZze-J0YzQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*E3CkmZlZHxXPhZze-J0YzQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*E3CkmZlZHxXPhZze-J0YzQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*E3CkmZlZHxXPhZze-J0YzQ.png 1100w, https://miro.medium.com/v2/resize:fit:2000/1*E3CkmZlZHxXPhZze-J0YzQ.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh nu nv c" width="1000" height="394" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">FastAPI document — POST Method | response</figcaption></figure></div></div></div><div class="ac cb"><div class="ci bh gb gc gd ge"><blockquote class="ly lz ma"><p id="aa4f" class="mb mc md me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk"><strong class="me gx">POST [File]</strong></p></blockquote><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb qz"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*Ne0XJyeRTeWGduOzf8-cvA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*Ne0XJyeRTeWGduOzf8-cvA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*Ne0XJyeRTeWGduOzf8-cvA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*Ne0XJyeRTeWGduOzf8-cvA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*Ne0XJyeRTeWGduOzf8-cvA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Ne0XJyeRTeWGduOzf8-cvA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ne0XJyeRTeWGduOzf8-cvA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*Ne0XJyeRTeWGduOzf8-cvA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*Ne0XJyeRTeWGduOzf8-cvA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*Ne0XJyeRTeWGduOzf8-cvA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*Ne0XJyeRTeWGduOzf8-cvA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*Ne0XJyeRTeWGduOzf8-cvA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*Ne0XJyeRTeWGduOzf8-cvA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*Ne0XJyeRTeWGduOzf8-cvA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="598" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">FastAPI document — POST File | request and response</figcaption></figure></div></div></div><div class="ac cb oa ob oc od" role="separator"><span class="oe bx bm of og oh"></span><span class="oe bx bm of og oh"></span><span class="oe bx bm of og"></span></div><div class="gp gq gr gs gt"><div class="ac cb"><div class="ci bh gb gc gd ge"><p id="844e" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ซึ่งใน docs สามารถบ่งบอกลักษณะของ request ในรูป cURL ได้ แล้วก็มีบอกว่า path function นี้จะ return อะไรไปบ้าง ในระดับ object เลยทีเดียว และก็สามารถแต่งเติมได้ตามอิสระ เช่นจะเขียนอธิบาย path ว่าให้รับอะไรบ้าง โดยเราสามารถเขียนได้ใน code ของ function เราเลย</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — API docs modifeid</figcaption></figure><p id="33fa" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เราสามารถลองปรับแต่งหน้าตา API docs ได้ตามต้องการ ตั้งแต่ <strong class="me gx">app </strong>ที่เพิ่ม title , description, version และ<strong class="me gx"> insert_movies()</strong> เพิ่มคำอธิบายภายใต้ function จากนั้นให้เราไปดูที่ <strong class="me gx">/docs</strong></p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb ra"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*gh_8ZGEaCH_Ek46YWr9BMQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="527" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example of API document with Modified</figcaption></figure><p id="bb3b" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จะเห็นว่า document ของตัว FastAPI อ้างอิงตาม code เราแทบจะเป๊ะ ๆ ๆ</p><p id="6f91" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เพิ่มเติมโดยอันที่จริงปรับแต่งได้มากกว่านี้หรือถ้าใครอยากเข้าไปในระดับ JSON เลยก็ให้ไปที่ <strong class="me gx">/openapi.json </strong>ได้เลย</p><p id="ed77" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เพิ่มเติมอีกรอบ ถ้าใครเบื่อหน้าตา<strong class="me gx"> /docs</strong> ให้ลองเปลี่ยนไปที่ <strong class="me gx">/redoc</strong> จะได้ style อีกแบบนึง</p></div></div><div class="ni"><div class="ac cb"><div class="qj qk ql qm qn qo cf qp cg qq ci bh"><figure class="nd ne nf ng nh ni qs qt paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb rb"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*HoKGMMO-LLvsiKcPfaHVuA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*HoKGMMO-LLvsiKcPfaHVuA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*HoKGMMO-LLvsiKcPfaHVuA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*HoKGMMO-LLvsiKcPfaHVuA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*HoKGMMO-LLvsiKcPfaHVuA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*HoKGMMO-LLvsiKcPfaHVuA.png 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/1*HoKGMMO-LLvsiKcPfaHVuA.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*HoKGMMO-LLvsiKcPfaHVuA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*HoKGMMO-LLvsiKcPfaHVuA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*HoKGMMO-LLvsiKcPfaHVuA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*HoKGMMO-LLvsiKcPfaHVuA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*HoKGMMO-LLvsiKcPfaHVuA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*HoKGMMO-LLvsiKcPfaHVuA.png 1100w, https://miro.medium.com/v2/resize:fit:2000/1*HoKGMMO-LLvsiKcPfaHVuA.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh nu nv c" width="1000" height="568" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">FastAPI Documents — Redoc</figcaption></figure></div></div></div><div class="ac cb"><div class="ci bh gb gc gd ge"><p id="7f41" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ในส่วนของการ modify API docs ลูกเล่นค่อนข้างเยอะ ถ้าเราต้องจะปรับแต่งก็สามารถทำได้ หรือลองศึกษา OpenAPI เพิ่มเติมดูครับ</p><p id="f338" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">โดย path ทางเข้าของ API docs สามารถเปลี่ยนชื่อได้หรือแม้กระทั่งจะปิดการใช้มันก็สามารถทำได้เช่นกัน</p></div></div></div><div class="ac cb oa ob oc od" role="separator"><span class="oe bx bm of og oh"></span><span class="oe bx bm of og oh"></span><span class="oe bx bm of og"></span></div><div class="gp gq gr gs gt"><div class="ac cb"><div class="ci bh gb gc gd ge"><h1 id="6dd4" class="oj ok gw bf ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg bk"><strong class="am">3. Dependencies, </strong>Middleware, Router</h1><p id="6a3c" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">หลังจากที่เราผ่านการสร้าง API ในและวิธีใช้งาน Document เบื้องต้นแล้ว ผมมี feature ที่อยากจะนำเสนอ คือ <strong class="me gx">Router</strong> และ <strong class="me gx">Dependencies</strong></p><h1 id="4a6e" class="oj ok gw bf ol om pr oo op oq ps os ot ou pt ow ox oy pu pa pb pc pv pe pf pg bk">Middleware</h1><p id="1071" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">แต่ก่อนอื่นอยากให้เห็นวิธีการใช้งาน Middleware ของ FastAPI สักหน่อย</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb rc"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*t0h02I7Rz31BzkQVOPuTcw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*t0h02I7Rz31BzkQVOPuTcw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*t0h02I7Rz31BzkQVOPuTcw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*t0h02I7Rz31BzkQVOPuTcw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*t0h02I7Rz31BzkQVOPuTcw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*t0h02I7Rz31BzkQVOPuTcw.png 1100w, https://miro.medium.com/v2/resize:fit:1362/format:webp/1*t0h02I7Rz31BzkQVOPuTcw.png 1362w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 681px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*t0h02I7Rz31BzkQVOPuTcw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*t0h02I7Rz31BzkQVOPuTcw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*t0h02I7Rz31BzkQVOPuTcw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*t0h02I7Rz31BzkQVOPuTcw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*t0h02I7Rz31BzkQVOPuTcw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*t0h02I7Rz31BzkQVOPuTcw.png 1100w, https://miro.medium.com/v2/resize:fit:1362/1*t0h02I7Rz31BzkQVOPuTcw.png 1362w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 681px"/><img alt="" class="bh nu nv c" width="681" height="312" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">FastAPI middleware</figcaption></figure><p id="bbc2" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">อันนี้เป็นตัวอย่างง่าย ๆ ก็คือเราปรับแต่งตัว middleware ว่าให้ทำการ เพิ่ม Header ชื่อ <strong class="me gx">X-Process-Time</strong> ซึ่งก็คือระยะเวลาตั้งแต่ client request เข้ามา จนกระทั่ง response กลับไปหา client</p><p id="e95e" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ทดลองยิง request ดู</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb rd"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*AOOKrquVE5Q-S-89piISAw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*AOOKrquVE5Q-S-89piISAw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*AOOKrquVE5Q-S-89piISAw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*AOOKrquVE5Q-S-89piISAw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*AOOKrquVE5Q-S-89piISAw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*AOOKrquVE5Q-S-89piISAw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AOOKrquVE5Q-S-89piISAw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*AOOKrquVE5Q-S-89piISAw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*AOOKrquVE5Q-S-89piISAw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*AOOKrquVE5Q-S-89piISAw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*AOOKrquVE5Q-S-89piISAw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*AOOKrquVE5Q-S-89piISAw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*AOOKrquVE5Q-S-89piISAw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*AOOKrquVE5Q-S-89piISAw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="122" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">request via cURL to look up Header[“X-Process-Time”]</figcaption></figure><p id="ef42" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จะเห็นว่า server return Header ที่ชื่อ x-process-time มาด้วย ซึ่งเป็นหน่วยระยะเวลาของกระบวน request จนกระทั่งจบ response</p><h1 id="7464" class="oj ok gw bf ol om pr oo op oq ps os ot ou pt ow ox oy pu pa pb pc pv pe pf pg bk">Router</h1><p id="ab11" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">พอเรางานเริ่ม scale ใหญ่ขึ้นเรื่อย ๆ ก็จะเกิดปัญหาให้ยุ่งเหยิงกันนิดหน่อย ถ้าเราไม่ได้จัดระเบียบไว้ตั้งแต่ตอน design</p><p id="4843" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ก่อนอื่นผมอยากให้เห็น structure ของ project ก่อน</p><pre class="nd ne nf ng nh re rf rg rh aj ri bk"><span id="f899" class="rj ok gw rf b rk rl rm m rn ro">.<br/>├── app<br/>│   ├── api<br/>│   │   ├── member.py<br/>│   │   └── movies.py<br/>│   ├── db.py<br/>│   ├── handlers.py<br/>│   ├── helper.py<br/>│   └── model.py<br/>├── main.py<br/>├── Pipfile<br/>├── Pipfile.lock<br/>├── README.md<br/>├── requirements.txt<br/>└── test_main.py</span></pre><p id="a07d" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ผมจะยกตัวอย่างตัว <strong class="me gx">member.py </strong>ว่าการประกาศ <strong class="me gx">APIRouter</strong>() นั้นทำอย่างไรในเบื้องต้น</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — Router declare as decorator</figcaption></figure><p id="5137" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เริ่มต้นคือให้เรา Import APIRouter เข้ามา แล้ว assign ใส่ตัวแปรตัวนึงไว้ เพื่อให้เราใช้ในการสร้าง API Path กับ function</p><p id="a851" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">และฝั่ง <strong class="me gx">handler.py </strong>จะเป็นไฟล์ที่กำหนด <strong class="me gx">Router </strong>ซึ่งจะ<strong class="me gx"> </strong>import<strong class="me gx"> </strong>api/….py เข้ามา</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — Router in handlers</figcaption></figure><p id="38bc" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ถ้าใครอยากเห็น code เต็มใน GitHub <a class="ag pw" href="https://github.com/bozzlab/fastapi-movies" rel="noopener ugc nofollow" target="_blank">คลิกที่นี้</a>เลยครับ</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb rp"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*k1KkDxU50lYj3_LUzRwBiA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*k1KkDxU50lYj3_LUzRwBiA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*k1KkDxU50lYj3_LUzRwBiA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*k1KkDxU50lYj3_LUzRwBiA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*k1KkDxU50lYj3_LUzRwBiA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*k1KkDxU50lYj3_LUzRwBiA.png 1100w, https://miro.medium.com/v2/resize:fit:1048/format:webp/1*k1KkDxU50lYj3_LUzRwBiA.png 1048w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 524px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*k1KkDxU50lYj3_LUzRwBiA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*k1KkDxU50lYj3_LUzRwBiA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*k1KkDxU50lYj3_LUzRwBiA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*k1KkDxU50lYj3_LUzRwBiA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*k1KkDxU50lYj3_LUzRwBiA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*k1KkDxU50lYj3_LUzRwBiA.png 1100w, https://miro.medium.com/v2/resize:fit:1048/1*k1KkDxU50lYj3_LUzRwBiA.png 1048w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 524px"/><img alt="" class="bh nu nv c" width="524" height="284" loading="lazy" role="presentation"/></picture></div></figure><p id="8611" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ถ้ามองเป็นภาพจะเห็นเป็นลักษณะตามรูปด้านบน คือเราไม่จำเป็นจะต้องเขียน <strong class="me gx">/api/v1</strong> ที่ function การทำงาน api ของเราในทุก ๆ ครั้ง เราจะให้ router ใน handler จัดการในส่วนนี้รวมถึงการระบุ path prefix ของ API เรา</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb rq"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*WMil0LeQIzB8eRkLr3IFzg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*WMil0LeQIzB8eRkLr3IFzg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*WMil0LeQIzB8eRkLr3IFzg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*WMil0LeQIzB8eRkLr3IFzg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*WMil0LeQIzB8eRkLr3IFzg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*WMil0LeQIzB8eRkLr3IFzg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WMil0LeQIzB8eRkLr3IFzg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*WMil0LeQIzB8eRkLr3IFzg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*WMil0LeQIzB8eRkLr3IFzg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*WMil0LeQIzB8eRkLr3IFzg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*WMil0LeQIzB8eRkLr3IFzg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*WMil0LeQIzB8eRkLr3IFzg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*WMil0LeQIzB8eRkLr3IFzg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*WMil0LeQIzB8eRkLr3IFzg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="466" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — Prefix API Path</figcaption></figure><p id="6781" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ซึ่งอ้างอิงจากครั้งก่อน code เราเป็นยังไง API docs เราเป็นอย่างนั้น โดยปริยาย</p></div></div><div class="ni"><div class="ac cb"><div class="qj qk ql qm qn qo cf qp cg qq ci bh"><figure class="nd ne nf ng nh ni qs qt paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb rr"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*CBtYfXFj4QekN5ESfsQ_Nw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*CBtYfXFj4QekN5ESfsQ_Nw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*CBtYfXFj4QekN5ESfsQ_Nw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*CBtYfXFj4QekN5ESfsQ_Nw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*CBtYfXFj4QekN5ESfsQ_Nw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*CBtYfXFj4QekN5ESfsQ_Nw.png 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/1*CBtYfXFj4QekN5ESfsQ_Nw.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*CBtYfXFj4QekN5ESfsQ_Nw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*CBtYfXFj4QekN5ESfsQ_Nw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*CBtYfXFj4QekN5ESfsQ_Nw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*CBtYfXFj4QekN5ESfsQ_Nw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*CBtYfXFj4QekN5ESfsQ_Nw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*CBtYfXFj4QekN5ESfsQ_Nw.png 1100w, https://miro.medium.com/v2/resize:fit:2000/1*CBtYfXFj4QekN5ESfsQ_Nw.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh nu nv c" width="1000" height="629" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">FastAPI documents with Router organized</figcaption></figure></div></div></div><div class="ac cb"><div class="ci bh gb gc gd ge"><p id="fe5a" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">อย่างภาพด้านบนคือผมได้ทำการแบ่ง member กับ movies เป็นคนละ router กัน</p><p id="27a5" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ซึ่งในเคสนี้อาจจะมองเห็นภาพเล็กไปนิดนึง ถ้าสมมุติถ้างานใหญ่ขึ้น ตามรูปด้านล่าง จะเป็นประโยชน์มาก ในการแบ่งหน้าที่ของแต่ละ API service อย่างชัดเจน ไม่ตีกัน ไม่ต้องมาลุ้นว่า code เราจะไปอยู่ผิดที่ผิดทางไหม</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb rs"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*i2IdEqkzeASguhh8Q7VVag.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*i2IdEqkzeASguhh8Q7VVag.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*i2IdEqkzeASguhh8Q7VVag.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*i2IdEqkzeASguhh8Q7VVag.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*i2IdEqkzeASguhh8Q7VVag.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*i2IdEqkzeASguhh8Q7VVag.png 1100w, https://miro.medium.com/v2/resize:fit:1202/format:webp/1*i2IdEqkzeASguhh8Q7VVag.png 1202w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 601px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*i2IdEqkzeASguhh8Q7VVag.png 640w, https://miro.medium.com/v2/resize:fit:720/1*i2IdEqkzeASguhh8Q7VVag.png 720w, https://miro.medium.com/v2/resize:fit:750/1*i2IdEqkzeASguhh8Q7VVag.png 750w, https://miro.medium.com/v2/resize:fit:786/1*i2IdEqkzeASguhh8Q7VVag.png 786w, https://miro.medium.com/v2/resize:fit:828/1*i2IdEqkzeASguhh8Q7VVag.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*i2IdEqkzeASguhh8Q7VVag.png 1100w, https://miro.medium.com/v2/resize:fit:1202/1*i2IdEqkzeASguhh8Q7VVag.png 1202w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 601px"/><img alt="" class="bh nu nv c" width="601" height="629" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example of Router Path Prefix</figcaption></figure><h1 id="fec4" class="oj ok gw bf ol om pr oo op oq ps os ot ou pt ow ox oy pu pa pb pc pv pe pf pg bk"><strong class="am">Dependencies</strong></h1><p id="bc22" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">ถ้ากรณีที่เรามี function ที่ต้องคอยเช็ค header ในทุก ๆ request ที่เข้ามาใน path นั้น ๆ อยู่แล้ว หรือ function ที่ซ้ำซ้อนแบบใช้ทุกที่ วิธีแก้ไข ก็คงไม่พ้นทำ decorator หรือจะ Inherit class หลักมาก่อนแล้วค่อย implement แต่ถ้าใช้ FastAPI เราไม่ต้องกังวลเรื่องนี้ เพราะอะไรไปดูกัน (เขียนเองยังรู้สึกอวย)</p><p id="2213" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ต่อจากตัวก่อน <strong class="me gx">router </strong>ให้ลองคิดตามดูว่าถ้าทุก function API ต้องการ validate header ก่อน execute API นั้น function ที่ว่าควรจะอยู่ตรงไหน</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — Dependencies</figcaption></figure><p id="a2a5" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จาก code ตัวอย่างคือ เราต้อง import <strong class="me gx">Depends</strong> เข้ามาก่อน แล้วให้เพิ่ม dependencies ให้กับ router ของ movies ซึ่งก็คือ <strong class="me gx">get_x_card_id_token() </strong>ส่งผลให้ต่อไปนี่้ทุก ๆ ครั้งที่มีการ request เข้ามาที่ api ของ movies จะทำการ validate header ก่อน ว่ามี <strong class="me gx">X-Card-ID</strong> อยู่ใน header หรือไม่ และค่าของ <strong class="me gx">X-Card-ID </strong>นั้นถูกต้องตรงกับ database รึเปล่า ถ้าไม่มีหรือมีแล้วก็ไม่ถูกก็จะ return 400 กลับไป</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div class="na nb rt"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*iQ_CSr_yQ_PuXqH_Awzexg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*iQ_CSr_yQ_PuXqH_Awzexg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*iQ_CSr_yQ_PuXqH_Awzexg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*iQ_CSr_yQ_PuXqH_Awzexg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*iQ_CSr_yQ_PuXqH_Awzexg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*iQ_CSr_yQ_PuXqH_Awzexg.png 1100w, https://miro.medium.com/v2/resize:fit:1062/format:webp/1*iQ_CSr_yQ_PuXqH_Awzexg.png 1062w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 531px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*iQ_CSr_yQ_PuXqH_Awzexg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*iQ_CSr_yQ_PuXqH_Awzexg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*iQ_CSr_yQ_PuXqH_Awzexg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*iQ_CSr_yQ_PuXqH_Awzexg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*iQ_CSr_yQ_PuXqH_Awzexg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*iQ_CSr_yQ_PuXqH_Awzexg.png 1100w, https://miro.medium.com/v2/resize:fit:1062/1*iQ_CSr_yQ_PuXqH_Awzexg.png 1062w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 531px"/><img alt="" class="bh nu nv c" width="531" height="304" loading="lazy" role="presentation"/></picture></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Diagram API Router with Depedencies function</figcaption></figure></div></div></div><div class="ac cb oa ob oc od" role="separator"><span class="oe bx bm of og oh"></span><span class="oe bx bm of og oh"></span><span class="oe bx bm of og"></span></div><div class="gp gq gr gs gt"><div class="ac cb"><div class="ci bh gb gc gd ge"><h1 id="e68b" class="oj ok gw bf ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg bk"><strong class="am">4. Testing</strong></h1><p id="2bf0" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">การทำ test ถือว่าเป็นเรื่องจำเป็นในการทำ software อยู่แล้ว ยกเว้นเราจะไม่ทำ ฮ่า ๆ ถ้าใครเคยเขียน test ด้วย python ก็น่าจะคุ้นเคยกับตัว <strong class="me gx">unittest </strong>และ<strong class="me gx"> pytest </strong>ซึ่งก็ใช้กันอย่างแพร่หลาย โดย FastAPI ก็มีตัวช่วยให้ test api ให้ง่ายขึ้นเหมือนกัน (โคตรขาย เอาตรง ๆ ใช้ postman ก็ได้)</p><figure class="nd ne nf ng nh ni"><div class="px nq m fl"><div class="py pz m"></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Example FastAPI code — Testing</figcaption></figure><p id="b34c" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">เริ่มต้นด้วยการสร้างไฟล์ <strong class="me gx">test_xx.py</strong> ตามที่เราต้อง แต่ต้องขึ้นด้วย <strong class="me gx">test_</strong> และภายชื่อ function ก็ต้องขึ้นต้นด้วย <strong class="me gx">test_</strong> เหมือนกันครับ</p><p id="76eb" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ต่อด้วย import <strong class="me gx">app</strong> ของเรามาก่อนและ <strong class="me gx">fastapi.testclient</strong> เพื่อให้เราทำการ mockup app และ request ขึ้นมาได้</p><p id="9f30" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จากนั้นก็ทำเขียน test ตาม testcase ของเรา อย่างตัวอย่าง code ด้านบนคือทดสอบว่า /api/v1/member สามารถทำงานได้ถูกต้องตามที่เราต้องการหรือไม่</p><p id="11cf" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ทั้งนี้ผมใช้ <strong class="me gx">pytest</strong> ช่วยเพื่อให้เห็นภาพมากขึ้นว่า testcase ของเราทำงานเป็นอย่างไรบ้าง ตามรูปด้านล่าง</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb ru"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*TFCheQi40DSOH2BMDTDAPA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*TFCheQi40DSOH2BMDTDAPA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*TFCheQi40DSOH2BMDTDAPA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*TFCheQi40DSOH2BMDTDAPA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*TFCheQi40DSOH2BMDTDAPA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*TFCheQi40DSOH2BMDTDAPA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TFCheQi40DSOH2BMDTDAPA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*TFCheQi40DSOH2BMDTDAPA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*TFCheQi40DSOH2BMDTDAPA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*TFCheQi40DSOH2BMDTDAPA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*TFCheQi40DSOH2BMDTDAPA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*TFCheQi40DSOH2BMDTDAPA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*TFCheQi40DSOH2BMDTDAPA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*TFCheQi40DSOH2BMDTDAPA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="351" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">Pytest , Testing with FastAPI</figcaption></figure><p id="79a0" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">จะเห็นว่าผ่านหมด 20 testcase ก็ไม่แปลกแหละ ผมเขียนเอง อันไหน error ก็ลบไป ล้อเล่น</p></div></div></div><div class="ac cb oa ob oc od" role="separator"><span class="oe bx bm of og oh"></span><span class="oe bx bm of og oh"></span><span class="oe bx bm of og"></span></div><div class="gp gq gr gs gt"><div class="ac cb"><div class="ci bh gb gc gd ge"><h1 id="cd55" class="oj ok gw bf ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg bk"><strong class="am">5. Deployment</strong></h1><p id="bf48" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">อันนี้มีได้หลายท่ามาก ๆ ให้มองว่า FastAPI เป็นแค่ application ทั่วไปก็ยังได้ ไม่ได้มีอะไรซับซ้อน ซึ่งก็แล้วแต่ความต้องการว่าจะเอา project เราไป host ไว้ที่ไหน ไม่ว่าจะเป็น stateless หรือ stateful ก็ได้ทั้งนั้น จะใช้ gunicorn เหมือน Flask และ Django ก็ได้</p><p id="f521" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">แต่ท่าที่ผมจะใช้คือ</p><p id="02db" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk"><strong class="me gx">Cloud Build ทำ CI/CD แล้ว deploy บน Cloud Run</strong></p><p id="62a4" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">และทุกอย่างจะอยู่บน <strong class="me gx">Google Cloud </strong>ซึ่งก็จะมีพวก GitHub / Docker / Google Cloud บลา ๆ ผสมอยู่ด้วย ตาม flow รูปด้านล่าง</p><figure class="nd ne nf ng nh ni na nb paragraph-image"><div role="button" tabindex="0" class="nj nk fl nl bh nm"><span class="fu nn no an np nq nr ns nt speechify-ignore">Press enter or click to view image in full size</span><div class="na nb rv"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*l9ghcPRhNzwRnrJD6BE7gA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*l9ghcPRhNzwRnrJD6BE7gA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*l9ghcPRhNzwRnrJD6BE7gA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*l9ghcPRhNzwRnrJD6BE7gA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*l9ghcPRhNzwRnrJD6BE7gA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*l9ghcPRhNzwRnrJD6BE7gA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l9ghcPRhNzwRnrJD6BE7gA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*l9ghcPRhNzwRnrJD6BE7gA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*l9ghcPRhNzwRnrJD6BE7gA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*l9ghcPRhNzwRnrJD6BE7gA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*l9ghcPRhNzwRnrJD6BE7gA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*l9ghcPRhNzwRnrJD6BE7gA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*l9ghcPRhNzwRnrJD6BE7gA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*l9ghcPRhNzwRnrJD6BE7gA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh nu nv c" width="700" height="348" loading="lazy" role="presentation"/></picture></div></div><figcaption class="nw ff nx na nb ny nz bf b bg ab du">CI/CD Workflow</figcaption></figure><p id="e817" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ดังนั้นถ้าใครมีความคุ้นเคย Docker/ Container หรือ GitLab CI/CD, AWS CodeBuild พวกนี้ ก็ตามไปอ่านได้ครับ <a class="ag pw" href="https://medium.com/p/56abf2472567/edit" rel="noopener">คลิกที่นี่</a> ถือว่าเปิดโลกฝั่ง Google Cloud</p></div></div></div><div class="ac cb oa ob oc od" role="separator"><span class="oe bx bm of og oh"></span><span class="oe bx bm of og oh"></span><span class="oe bx bm of og"></span></div><div class="gp gq gr gs gt"><div class="ac cb"><div class="ci bh gb gc gd ge"><h1 id="a954" class="oj ok gw bf ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg bk">Conclusion</h1><p id="c4a0" class="pw-post-body-paragraph mb mc gw me b mf ph mh mi mj pi ml mm mn pj mp mq mr pk mt mu mv pl mx my mz gp bk">สิ่งที่ผมเขียนมาทั้งหมดนี้เป็นเพียงประมาณ 10–20 % ของเจ้าตัว FastAPI เท่านั้น ยังไม่ได้ลงลึงอะไรมาก แต่อย่างน้อยคิดว่าน่าจะพอช่วยเหลือคนที่กำลังเริ่มต้นกับ framework ตัวนี้ได้ ด้วยความที่ FastAPI เพิ่งมาไม่นานประมาณปลายปี 2019 ทำให้คนยังไม่รู้จักแพร่หลายเท่า Flask หรือ Django แน่นอน แต่คิดว่าอนาคตมาคงมาแน่ ๆ (เดาล้วน ๆ )</p><p id="3e7d" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ส่วน Feature อื่น ๆ ที่สำคัญ เช่น WebSocket, GraphQL บลา ๆ ผมจะทดลองใช้ดู เผื่ออนาคตได้ใช้ขึ้นมาจริง ๆแล้วถ้าเวิคจะมาเขียนเป็นบล็อคแชร์ให้ทุกคนอ่านอีกทีครับ</p><p id="b1ca" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ทั้งนี้ ถ้าบทความนี้ ผิดพลาดในส่วนใด ๆ สามารถทักท้วงหรือคอมเม้นกันได้ครับ</p><p id="b302" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">อ่อ ถ้าใครสนใจจะลองทำ CI/CD ต่อ ลอง<a class="ag pw" href="https://medium.com/@p.srinikorn/%E0%B8%AA%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%87-ci-cd-pipeline-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-google-cloud-build-%E0%B8%A0%E0%B8%B2%E0%B8%A2%E0%B9%83%E0%B8%99-5-%E0%B8%99%E0%B8%B2%E0%B8%97%E0%B8%B5-56abf2472567" rel="noopener">อ่านอันนี้</a>ได้ครับ</p><p id="a4e0" class="pw-post-body-paragraph mb mc gw me b mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz gp bk">ขอบคุณครับ</p></div></div></div></div></section></div></div></article></div><div class="ac cb"><div class="ci bh gb gc gd ge"><div class="rw rx ac it"><div class="ry ac"><a class="rz aj an ap" href="https://medium.com/tag/fastapi?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><div class="sa fl cx sb gg sc sd bf b bg ab bk ns">Fastapi</div></a></div><div class="ry ac"><a class="rz aj an ap" href="https://medium.com/tag/python?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><div class="sa fl cx sb gg sc sd bf b bg ab bk ns">Python</div></a></div><div class="ry ac"><a class="rz aj an ap" href="https://medium.com/tag/api?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><div class="sa fl cx sb gg sc sd bf b bg ab bk ns">API</div></a></div><div class="ry ac"><a class="rz aj an ap" href="https://medium.com/tag/rest-api?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><div class="sa fl cx sb gg sc sd bf b bg ab bk ns">Rest Api</div></a></div><div class="ry ac"><a class="rz aj an ap" href="https://medium.com/tag/flask?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><div class="sa fl cx sb gg sc sd bf b bg ab bk ns">Flask</div></a></div></div></div></div><div class="m"></div><footer class="se sf sg sh si ac r sj sk c"><div class="m af"><div class="ac cb"><div class="ci bh gb gc gd ge"><div class="ac cp sl"><div class="ac r kc"><div class="sm m"><span class="m sn so sp f e"><div class="ac r kc kd"><div class="pw-multi-vote-icon fl ke kf kg kh"><span data-dd-action-name="Susi presentation tracker clap_footer"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F148b10416a70&amp;operation=register&amp;redirect=https%3A%2F%2Fp-srinikorn.medium.com%2Freview-%25E0%25B8%25AA%25E0%25B8%25A3%25E0%25B9%2589%25E0%25B8%25B2%25E0%25B8%2587-api-%25E0%25B8%2594%25E0%25B9%2589%25E0%25B8%25A7%25E0%25B8%25A2-fastapi-%25E0%25B9%2580%25E0%25B8%25A3%25E0%25B9%2587%25E0%25B8%25A7-%25E0%25B9%2581%25E0%25B8%25A3%25E0%25B8%2587-%25E0%25B8%259F%25E0%25B8%25B4%25E0%25B9%2589%25E0%25B8%25A7-%25E0%25B9%2586-148b10416a70&amp;user=Bozz+Srinikorn&amp;userId=ec6cad91b3d3&amp;source=---footer_actions--148b10416a70---------------------clap_footer------------------" rel="noopener follow"><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><div class="ki ap kj kk kl km an kn ko kp kh" role="presentation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></div></a></span></div><div class="pw-multi-vote-count m kq kr ks kt ku kv kw"><p class="bf b dv ab du"><span class="kx">--</span></p></div></div></span><span class="m i h g sq sr"><div class="ac r kc kd"><div class="pw-multi-vote-icon fl ke kf kg kh"><span data-dd-action-name="Susi presentation tracker clap_footer"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F148b10416a70&amp;operation=register&amp;redirect=https%3A%2F%2Fp-srinikorn.medium.com%2Freview-%25E0%25B8%25AA%25E0%25B8%25A3%25E0%25B9%2589%25E0%25B8%25B2%25E0%25B8%2587-api-%25E0%25B8%2594%25E0%25B9%2589%25E0%25B8%25A7%25E0%25B8%25A2-fastapi-%25E0%25B9%2580%25E0%25B8%25A3%25E0%25B9%2587%25E0%25B8%25A7-%25E0%25B9%2581%25E0%25B8%25A3%25E0%25B8%2587-%25E0%25B8%259F%25E0%25B8%25B4%25E0%25B9%2589%25E0%25B8%25A7-%25E0%25B9%2586-148b10416a70&amp;user=Bozz+Srinikorn&amp;userId=ec6cad91b3d3&amp;source=---footer_actions--148b10416a70---------------------clap_footer------------------" rel="noopener follow"><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><div class="ki ap kj kk kl km an kn ko kp kh" role="presentation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></div></a></span></div><div class="pw-multi-vote-count m kq kr ks kt ku kv kw"><p class="bf b dv ab du"><span class="kx">--</span></p></div></div></span></div><div class="ay ac"><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><button class="ap ki la lb ac r fm lc ld" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="kz"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bf b bg ab du"><span class="pw-responses-count ky kz">1</span></p></button></div></div></div></div></div><div class="ac r"><div class="oh m ss"><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><span data-dd-action-name="Susi presentation tracker bookmark_footer"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" data-testid="footerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F148b10416a70&amp;operation=register&amp;redirect=https%3A%2F%2Fp-srinikorn.medium.com%2Freview-%25E0%25B8%25AA%25E0%25B8%25A3%25E0%25B9%2589%25E0%25B8%25B2%25E0%25B8%2587-api-%25E0%25B8%2594%25E0%25B9%2589%25E0%25B8%25A7%25E0%25B8%25A2-fastapi-%25E0%25B9%2580%25E0%25B8%25A3%25E0%25B9%2587%25E0%25B8%25A7-%25E0%25B9%2581%25E0%25B8%25A3%25E0%25B8%2587-%25E0%25B8%259F%25E0%25B8%25B4%25E0%25B9%2589%25E0%25B8%25A7-%25E0%25B9%2586-148b10416a70&amp;source=---footer_actions--148b10416a70---------------------bookmark_footer------------------" rel="noopener follow"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lf" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div></div><div class="oh m ss"><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="ag fm ai fh ak al am lg ao ap aq ex lh li ld lj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></div></footer><div class="st m"><div class="ac cb"><div class="ci bh gb gc gd ge"><div class="ac ig ie ic su sv"><div class="sw sx sy sz ta tb tc td te tf ac cp"><div class="i l"><a tabindex="0" rel="noopener follow" href="/?source=post_page---post_author_info--148b10416a70---------------------------------------" data-discover="true"><div class="m fl"><img alt="Bozz Srinikorn" class="m fd bx tg th cx" src="https://miro.medium.com/v2/resize:fill:96:96/1*J_JBV3DJjWXzoq2zpzSHFQ.jpeg" width="48" height="48" loading="lazy"/><div class="ft bx m tg th fu o aj ti"></div></div></a></div><div class="k j e"><a tabindex="0" rel="noopener follow" href="/?source=post_page---post_author_info--148b10416a70---------------------------------------" data-discover="true"><div class="m fl"><img alt="Bozz Srinikorn" class="m fd bx tj tk cx" src="https://miro.medium.com/v2/resize:fill:128:128/1*J_JBV3DJjWXzoq2zpzSHFQ.jpeg" width="64" height="64" loading="lazy"/><div class="ft bx m tj tk fu o aj ti"></div></div></a></div><div class="k j e tl ss"><div class="ac"></div></div></div><div class="ac co ca"><div class="tm tn to qm qk m"><a class="ag ah ai ak al am an ao ap aq ar as at au ac r" rel="noopener follow" href="/?source=post_page---post_author_info--148b10416a70---------------------------------------" data-discover="true"><h2 class="pw-author-name bf tq tr ts tt tu tv tw mn tx ty mr tz ua mv ub uc bk"><span class="gp tp">Written by <!-- -->Bozz Srinikorn</span></h2></a><div class="ry ac ii"><div class="m ss"><span class="pw-follower-count bf b bg ab du"><a class="ag ah ai fh ak al am an ao ap aq ar as ir" rel="noopener follow" href="/followers?source=post_page---post_author_info--148b10416a70---------------------------------------" data-discover="true">93 followers</a></span></div><div class="bf b bg ab du ac rn"><span class="ud m" aria-hidden="true"><span class="bf b bg ab du">·</span></span><a class="ag ah ai fh ak al am an ao ap aq ar as ir" rel="noopener follow" href="/following?source=post_page---post_author_info--148b10416a70---------------------------------------" data-discover="true">149 following</a></div></div><div class="ue m"><p class="bf b bg ab bk"><a class="ag ah ai fh ak al am an ao ap aq ar as pw gq gp" href="http://bozzlab.github.io" rel="noopener  ugc nofollow">bozzlab.github.io</a> | Software/Data Engineer | Google Cloud Certified | AWS Certified</p></div></div></div><div class="i l"><div class="ac"></div></div></div></div></div></div><div class="uf ug uh ui uj m"><div class="uk bh s st"></div><div class="ac cb"><div class="ci bh gb gc gd ge"><div class="ac r cp"><h2 class="bf tq om oo op oq os ot ou ow ox oy pa pb pc pe pf bk">Responses (<!-- -->1<!-- -->)</h2><div class="ac ul"><div><div class="bm" aria-hidden="false" role="tooltip"><div tabindex="-1" class="be"><a class="um un" href="https://policy.medium.com/medium-rules-30e5502c4eb4?source=post_page---post_responses--148b10416a70---------------------------------------" rel="noopener follow" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" aria-label="Shield with a checkmark" viewBox="0 0 25 25"><path fill-rule="evenodd" d="M11.987 5.036a.754.754 0 0 1 .914-.01c.972.721 1.767 1.218 2.6 1.543.828.322 1.719.485 2.887.505a.755.755 0 0 1 .741.757c-.018 3.623-.43 6.256-1.449 8.21-1.034 1.984-2.662 3.209-4.966 4.083a.75.75 0 0 1-.537-.003c-2.243-.874-3.858-2.095-4.897-4.074-1.024-1.951-1.457-4.583-1.476-8.216a.755.755 0 0 1 .741-.757c1.195-.02 2.1-.182 2.923-.503.827-.322 1.6-.815 2.519-1.535m.468.903c-.897.69-1.717 1.21-2.623 1.564-.898.35-1.856.527-3.026.565.037 3.45.469 5.817 1.36 7.515.884 1.684 2.25 2.762 4.284 3.571 2.092-.81 3.465-1.89 4.344-3.575.886-1.698 1.299-4.065 1.334-7.512-1.149-.039-2.091-.217-2.99-.567-.906-.353-1.745-.873-2.683-1.561m-.009 9.155a2.672 2.672 0 1 0 0-5.344 2.672 2.672 0 0 0 0 5.344m0 1a3.672 3.672 0 1 0 0-7.344 3.672 3.672 0 0 0 0 7.344m-1.813-3.777.525-.526.916.917 1.623-1.625.526.526-2.149 2.152z" clip-rule="evenodd"></path></svg></a></div></div></div></div></div><div class="uo up uq ur us ut uu m"></div><div class="oa m"><button class="bf b bg ab bk sa uv uw ux lf lc uy ev ew ex uz va vb fa vc vd ve vf vg fb fc fd bm fe ff">See all responses</button></div></div></div></div><div class="vh vi vj vk vl m bw"><div class="i l k"><div class="uk bh vm vn"></div><div class="ac cb"><div class="ci bh gb gc gd ge"><div class="vo ac kc it"><div class="vp vq m"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" href="https://help.medium.com/hc/en-us?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><p class="bf b dv ab du">Help</p></a></div><div class="vp vq m"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" href="https://medium.statuspage.io/?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><p class="bf b dv ab du">Status</p></a></div><div class="vp vq m"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" href="https://medium.com/about?autoplay=1&amp;source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><p class="bf b dv ab du">About</p></a></div><div class="vp vq m"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" href="https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><p class="bf b dv ab du">Careers</p></a></div><div class="vp vq m"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" href="mailto:pressinquiries@medium.com" rel="noopener follow"><p class="bf b dv ab du">Press</p></a></div><div class="vp vq m"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" href="https://blog.medium.com/?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><p class="bf b dv ab du">Blog</p></a></div><div class="vp vq m"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><p class="bf b dv ab du">Privacy</p></a></div><div class="vp vq m"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" href="https://policy.medium.com/medium-rules-30e5502c4eb4?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><p class="bf b dv ab du">Rules</p></a></div><div class="vp vq m"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><p class="bf b dv ab du">Terms</p></a></div><div class="vp m"><a class="ag ah ai fh ak al am an ao ap aq ar as at au" href="https://speechify.com/medium?source=post_page-----148b10416a70---------------------------------------" rel="noopener follow"><p class="bf b dv ab du">Text to speech</p></a></div></div></div></div></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__="main-20250822-202538-95c3fbb66d"</script><script>window.__GRAPHQL_URI__ = "https://p-srinikorn.medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"algolia":{"queries":{}},"cache":{"experimentGroupSet":true,"reason":"","group":"enabled","tags":["group-edgeCachePosts","post-148b10416a70","user-ec6cad91b3d3","group-newLoNonMocUpsellExperimentGroup-group1"],"serverVariantState":"44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a","middlewareEnabled":true,"cacheStatus":"DYNAMIC","shouldUseCache":true,"vary":[],"pubFeaturingPostPageLabelEnabled":false,"shouldFollowPostQueryEnabled":false,"newLoNonMocUpsellExperimentGroup":"group1"},"client":{"hydrated":false,"isUs":false,"isNativeMedium":false,"isSafariMobile":false,"isSafari":false,"isFirefox":false,"routingEntity":{"type":"USER","id":"ec6cad91b3d3","explicit":true},"viewerIsBot":false},"debug":{"requestId":"356e3a31-4846-4b56-a9e3-96ee2178e24c","requestTag":"","hybridDevServices":[],"originalSpanCarrier":{"traceparent":"00-a386318b22776e2c602697e752dcb9fd-c980ad71c34d1d92-01"}},"multiVote":{"clapsPerPost":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":false},"hideGoogleOneTap":false,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Fp-srinikorn.medium.com\u002Freview-%E0%B8%AA%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%87-api-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-fastapi-%E0%B9%80%E0%B8%A3%E0%B9%87%E0%B8%A7-%E0%B9%81%E0%B8%A3%E0%B8%87-%E0%B8%9F%E0%B8%B4%E0%B9%89%E0%B8%A7-%E0%B9%86-148b10416a70","host":"p-srinikorn.medium.com","hostname":"p-srinikorn.medium.com","referrer":"","hasSetReferrer":false,"susiModal":{"step":null,"operation":"register"},"postRead":false,"partnerProgram":{"selectedCountryCode":null},"staticRouterContext":{"route":{"name":"ShowPostUnderUser"},"statusCode":200},"toastQueue":[],"currentToast":null,"queryString":"","currentHash":""},"config":{"nodeEnv":"production","version":"main-20250822-202538-95c3fbb66d","target":"production","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","iosAppId":"828256236","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","recaptchaEnterpriseKeyId":"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp","datadog":{"applicationId":"6702d87d-a7e0-42fe-bbcb-95b469547ea0","clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","rumToken":"pubf9cc52896502b9413b68ba36fc0c7162","context":{"deployment":{"target":"production","tag":"main-20250822-202538-95c3fbb66d","commit":"95c3fbb66d09cfa9e314c2aaa34a89e48e77e559"}},"datacenter":"us"},"googleAdsCode":"AW-17106321204","googleAnalyticsCode":"G-7JY7T788PK","googlePay":{"apiVersion":"2","apiVersionMinor":"0","merchantId":"BCR2DN6TV7EMTGBM","merchantName":"Medium","instanceMerchantId":"13685562959212738550"},"applePay":{"version":3},"signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumMastodonDomainName":"me.dm","mediumOwnedAndOperatedCollectionIds":["8a9336e5bb4","b7e45b22fec3","193b68bd4fba","8d6b8a439e32","54c98c43354d","3f6ecf56618","d944778ce714","92d2092dc598","ae2a65f35510","1285ba81cada","544c7006046e","fc8964313712","40187e704f1c","88d9857e584e","7b6769f2748b","bcc38c8f6edf","cef6983b292","cb8577c9149e","444d13b52878","713d7dbc99b0","ef8e90590e66","191186aaafa0","55760f21cdc5","9dc80918cc93","bdc4052bbdba","8ccfed20cbb2"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"topicToTagMappings":{"accessibility":"accessibility","addiction":"addiction","android-development":"android-development","art":"art","artificial-intelligence":"artificial-intelligence","astrology":"astrology","basic-income":"basic-income","beauty":"beauty","biotech":"biotech","blockchain":"blockchain","books":"books","business":"business","cannabis":"cannabis","cities":"cities","climate-change":"climate-change","comics":"comics","coronavirus":"coronavirus","creativity":"creativity","cryptocurrency":"cryptocurrency","culture":"culture","cybersecurity":"cybersecurity","data-science":"data-science","design":"design","digital-life":"digital-life","disability":"disability","economy":"economy","education":"education","equality":"equality","family":"family","feminism":"feminism","fiction":"fiction","film":"film","fitness":"fitness","food":"food","freelancing":"freelancing","future":"future","gadgets":"gadgets","gaming":"gaming","gun-control":"gun-control","health":"health","history":"history","humor":"humor","immigration":"immigration","ios-development":"ios-development","javascript":"javascript","justice":"justice","language":"language","leadership":"leadership","lgbtqia":"lgbtqia","lifestyle":"lifestyle","machine-learning":"machine-learning","makers":"makers","marketing":"marketing","math":"math","media":"media","mental-health":"mental-health","mindfulness":"mindfulness","money":"money","music":"music","neuroscience":"neuroscience","nonfiction":"nonfiction","outdoors":"outdoors","parenting":"parenting","pets":"pets","philosophy":"philosophy","photography":"photography","podcasts":"podcast","poetry":"poetry","politics":"politics","privacy":"privacy","product-management":"product-management","productivity":"productivity","programming":"programming","psychedelics":"psychedelics","psychology":"psychology","race":"race","relationships":"relationships","religion":"religion","remote-work":"remote-work","san-francisco":"san-francisco","science":"science","self":"self","self-driving-cars":"self-driving-cars","sexuality":"sexuality","social-media":"social-media","society":"society","software-engineering":"software-engineering","space":"space","spirituality":"spirituality","sports":"sports","startups":"startup","style":"style","technology":"technology","transportation":"transportation","travel":"travel","true-crime":"true-crime","tv":"tv","ux":"ux","venture-capital":"venture-capital","visual-design":"visual-design","work":"work","world":"world","writing":"writing"},"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"7*V1_7XP4snlmqrc_0Njontw.png","height":110,"width":500},"postLogo":{"imageId":"167cff2a3d17ac1e64d0762539978f2d54c0058886e8b3c8a03a725a83012ec0","height":630,"width":1200},"postPreviewImage":{"imageId":"bc1f8416df0cad099e43cda2872716e5864f18a73bda2a7547ea082aca9b5632","height":630,"width":1200}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":[],"COVID_APPLICABLE_TOPIC_NAMES":[],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":[],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Find out more about the U.S. election results here.","markups":[{"start":46,"end":50,"href":"https:\u002F\u002Fcookpolitical.com\u002F2020-national-popular-vote-tracker"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","braintree":{"enabled":true,"merchantId":"m56f8fqpf7ngnrd4","merchantAccountId":{"usd":"AMediumCorporation_instant","eur":"amediumcorporation_EUR","cad":"amediumcorporation_CAD"},"publicKey":"ds2nn34bg2z7j5gd","braintreeEnvironment":"production","dashboardUrl":"https:\u002F\u002Fwww.braintreegateway.com\u002Fmerchants","gracePeriodDurationInDays":14,"mediumMembershipPlanId":{"monthly":"ce105f8c57a3","monthlyV2":"e8a5e126-792b-4ee6-8fba-d574c1b02fc5","monthlyWithTrial":"d5ee3dbe3db8","monthlyPremium":"fa741a9b47a2","yearly":"a40ad4a43185","yearlyV2":"3815d7d6-b8ca-4224-9b8c-182f9047866e","yearlyStaff":"d74fb811198a","yearlyWithTrial":"b3bc7350e5c7","yearlyPremium":"e21bd2c12166","monthlyOneYearFree":"e6c0637a-2bad-4171-ab4f-3c268633d83c","monthly25PercentOffFirstYear":"235ecc62-0cdb-49ae-9378-726cd21c504b","monthly20PercentOffFirstYear":"ba518864-9c13-4a99-91ca-411bf0cac756","monthly15PercentOffFirstYear":"594c029b-9f89-43d5-88f8-8173af4e070e","monthly10PercentOffFirstYear":"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0","monthlyForStudents":"629ebe51-da7d-41fd-8293-34cd2f2030a8","yearlyOneYearFree":"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1","yearly25PercentOffFirstYear":"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34","yearly20PercentOffFirstYear":"47565488-435b-47f8-bf93-40d5fbe0ebc8","yearly15PercentOffFirstYear":"8259809b-0881-47d9-acf7-6c001c7f720f","yearly10PercentOffFirstYear":"9dd694fb-96e1-472c-8d9e-3c868d5c1506","yearlyForStudents":"e29345ef-ab1c-4234-95c5-70e50fe6bc23","monthlyCad":"p52orjkaceei","yearlyCad":"h4q9g2up9ktt"},"braintreeDiscountId":{"oneMonthFree":"MONTHS_FREE_01","threeMonthsFree":"MONTHS_FREE_03","sixMonthsFree":"MONTHS_FREE_06","fiftyPercentOffOneYear":"FIFTY_PERCENT_OFF_ONE_YEAR"},"3DSecureVersion":"2","defaultCurrency":"usd","providerPlanIdCurrency":{"4ycw":"usd","rz3b":"usd","3kqm":"usd","jzw6":"usd","c2q2":"usd","nnsw":"usd","q8qw":"usd","d9y6":"usd","fx7w":"cad","nwf2":"cad"}},"paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v","paypal":{"host":"https:\u002F\u002Fapi.paypal.com:443","clientMode":"production","serverMode":"live","webhookId":"4G466076A0294510S","monthlyPlan":{"planId":"P-9WR0658853113943TMU5FDQA","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlan":{"planId":"P-7N8963881P8875835MU5JOPQ","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com\u002Fredeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"},"oldMonthlyPlan":{"planId":"P-96U02458LM656772MJZUVH2Y","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlan":{"planId":"P-59P80963JF186412JJZU3SMI","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"monthlyPlanWithTrial":{"planId":"P-66C21969LR178604GJPVKUKY","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlanWithTrial":{"planId":"P-6XW32684EX226940VKCT2MFA","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oldMonthlyPlanNoSetupFee":{"planId":"P-4N046520HR188054PCJC7LJI","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlanNoSetupFee":{"planId":"P-7A4913502Y5181304CJEJMXQ","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"sdkUrl":"https:\u002F\u002Fwww.paypal.com\u002Fsdk\u002Fjs"},"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","log":{"json":true,"level":"info"},"imageUploadMaxSizeMb":25,"staffPicks":{"title":"Staff Picks","catalogId":"c7bc6e1ee00f"}},"session":{"xsrf":""}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","viewer":null,"collectionByDomainOrSlug({\"domainOrSlug\":\"p-srinikorn.medium.com\"})":null,"postResult({\"id\":\"148b10416a70\"})":{"__ref":"Post:148b10416a70"}},"LinkedAccounts:ec6cad91b3d3":{"__typename":"LinkedAccounts","mastodon":null,"id":"ec6cad91b3d3"},"NewsletterV3:8990c5f16dfc":{"__typename":"NewsletterV3","id":"8990c5f16dfc","type":"NEWSLETTER_TYPE_AUTHOR","slug":"ec6cad91b3d3","name":"ec6cad91b3d3","collection":null,"user":{"__ref":"User:ec6cad91b3d3"}},"User:ec6cad91b3d3":{"__typename":"User","id":"ec6cad91b3d3","name":"Bozz Srinikorn","username":"p-srinikorn","newsletterV3":{"__ref":"NewsletterV3:8990c5f16dfc"},"linkedAccounts":{"__ref":"LinkedAccounts:ec6cad91b3d3"},"isSuspended":false,"imageId":"1*J_JBV3DJjWXzoq2zpzSHFQ.jpeg","customDomainState":{"__typename":"CustomDomainState","live":{"__typename":"CustomDomain","domain":"p-srinikorn.medium.com"}},"hasSubdomain":true,"verifications":{"__typename":"VerifiedInfo","isBookAuthor":false},"socialStats":{"__typename":"SocialStats","followerCount":93,"followingCount":114,"collectionFollowingCount":35},"bio":"bozzlab.github.io | Software\u002FData Engineer | Google Cloud Certified | AWS Certified","membership":null,"allowNotes":true,"viewerEdge":{"__ref":"UserViewerEdge:userId:ec6cad91b3d3-viewerId:lo_5ed50fbc40f5"},"twitterScreenName":""},"Paragraph:606c442e7c56_0":{"__typename":"Paragraph","id":"606c442e7c56_0","name":"7932","type":"H3","href":null,"layout":null,"metadata":null,"text":"สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว !!!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_1":{"__typename":"Paragraph","id":"606c442e7c56_1","name":"3421","type":"BQ","href":null,"layout":null,"metadata":null,"text":"เริ่มต้นเขียน API ด้วย Python และ FastAPI ฟิ้ว ฟิ้ว ๆ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*du7p50wS_fIsaC_lR18qsg.png":{"__typename":"ImageMetadata","id":"1*du7p50wS_fIsaC_lR18qsg.png","originalHeight":369,"originalWidth":1023,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_2":{"__typename":"Paragraph","id":"606c442e7c56_2","name":"2689","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*du7p50wS_fIsaC_lR18qsg.png"},"text":"FastAPI","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_3":{"__typename":"Paragraph","id":"606c442e7c56_3","name":"2e4e","type":"P","href":null,"layout":null,"metadata":null,"text":"ก่อนอื่น ขอเล่นมุกก่อน","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*UJQzNNHjCXJTCy2D.jpg":{"__typename":"ImageMetadata","id":"0*UJQzNNHjCXJTCy2D.jpg","originalHeight":531,"originalWidth":500,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_4":{"__typename":"Paragraph","id":"606c442e7c56_4","name":"3f7e","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:0*UJQzNNHjCXJTCy2D.jpg"},"text":"FastAPI meme","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_5":{"__typename":"Paragraph","id":"606c442e7c56_5","name":"7308","type":"P","href":null,"layout":null,"metadata":null,"text":"เดาว่าหลายคนอาจจะเคยเห็นโพสนี้ผ่าน feed กันมาบ้างแล้ว","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_6":{"__typename":"Paragraph","id":"606c442e7c56_6","name":"9f0a","type":"P","href":null,"layout":null,"metadata":null,"text":"ประมาณว่า มีประกาศรับสมัคร Dev ที่มีประสบการณ์กับ FastAPI เกิน 4 ปี ซึ่งความเป็นจริง FastAPI เพิ่งมาประมาณปี 2019 เอง ทำให้แม้แต่คนที่เป็น Contributor หลักเอง ก็ยังมีประสบการณ์ไม่ถึง ทั้ง ๆ ที่ตัวเองเป็นสร้างเองนะ ฮ่า ๆ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_7":{"__typename":"Paragraph","id":"606c442e7c56_7","name":"cd4b","type":"H3","href":null,"layout":null,"metadata":null,"text":"FastAPI คืออะไร","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_8":{"__typename":"Paragraph","id":"606c442e7c56_8","name":"1478","type":"P","href":null,"layout":null,"metadata":null,"text":"คือ Framework สำหรับการสร้าง API เขียนด้วย Python โดยมี uvicorn เป็นตัว จัดการ run server และด้วยความที่ใช้ uvicorn ที่เป็น ASGI ทำให้รองรับการทำงานแบบ Asynchronous ไปโดยปริยาย","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*xQHtjLAeyZOJQEHPmxz_Vw.png":{"__typename":"ImageMetadata","id":"1*xQHtjLAeyZOJQEHPmxz_Vw.png","originalHeight":205,"originalWidth":377,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_9":{"__typename":"Paragraph","id":"606c442e7c56_9","name":"8ce4","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*xQHtjLAeyZOJQEHPmxz_Vw.png"},"text":"Install Package","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_10":{"__typename":"Paragraph","id":"606c442e7c56_10","name":"868f","type":"P","href":null,"layout":null,"metadata":null,"text":"ตัวอย่าง code สร้าง API เริ่มต้นง่าย ๆ","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":38,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*AaID2XLPUCuDbcs2Oivh1g.png":{"__typename":"ImageMetadata","id":"1*AaID2XLPUCuDbcs2Oivh1g.png","originalHeight":312,"originalWidth":471,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_11":{"__typename":"Paragraph","id":"606c442e7c56_11","name":"2f15","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*AaID2XLPUCuDbcs2Oivh1g.png"},"text":"Example of API via FastAPI","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_12":{"__typename":"Paragraph","id":"606c442e7c56_12","name":"845b","type":"P","href":null,"layout":null,"metadata":null,"text":"Run server","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":10,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_13":{"__typename":"Paragraph","id":"606c442e7c56_13","name":"86df","type":"P","href":null,"layout":null,"metadata":null,"text":"วิธี run server ก็ง่าย ๆ จะใช้ __main__ หรือใช้ uvicorn command ก็ได้ รวมถึงถ้าใครเคยใช้ gunicorn มาก่อน FastAPI ก็รองรับนะ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*6BeDRVOLopHJNBSLLFMRyQ.png":{"__typename":"ImageMetadata","id":"1*6BeDRVOLopHJNBSLLFMRyQ.png","originalHeight":384,"originalWidth":639,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_14":{"__typename":"Paragraph","id":"606c442e7c56_14","name":"9461","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*6BeDRVOLopHJNBSLLFMRyQ.png"},"text":"Example FastAPI with Uvicorn","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*6LDUm6xp0P1ou20BGjB4HQ.png":{"__typename":"ImageMetadata","id":"1*6LDUm6xp0P1ou20BGjB4HQ.png","originalHeight":111,"originalWidth":837,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_15":{"__typename":"Paragraph","id":"606c442e7c56_15","name":"d253","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*6LDUm6xp0P1ou20BGjB4HQ.png"},"text":"Run server via python execute command","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*gNho70dcAQSLGumTuqtZCA.png":{"__typename":"ImageMetadata","id":"1*gNho70dcAQSLGumTuqtZCA.png","originalHeight":105,"originalWidth":842,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_16":{"__typename":"Paragraph","id":"606c442e7c56_16","name":"9919","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*gNho70dcAQSLGumTuqtZCA.png"},"text":"Run server via Uvicorn Command","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_17":{"__typename":"Paragraph","id":"606c442e7c56_17","name":"8d40","type":"P","href":null,"layout":null,"metadata":null,"text":"จะเห็นได้ว่าเป็นการสร้าง server ที่ Lightweight มาก ๆ และไม่ซับซ้อน แค่ Import เข้ามา เรียก class จากนั้นก็ลุยได้เลย ลักษณะจะคล้าย Flask ถ้าใครเคยเขียน Flask มา จะต้องชอบ FastAPI อย่างแน่นอน (มั้งนะ)","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_18":{"__typename":"Paragraph","id":"606c442e7c56_18","name":"8d19","type":"H3","href":null,"layout":null,"metadata":null,"text":"มาดู Feature ของ FastAPI บ้าง","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_19":{"__typename":"Paragraph","id":"606c442e7c56_19","name":"b091","type":"P","href":null,"layout":null,"metadata":null,"text":"ก่อนอื่นเลย เพื่อให้เห็นภาพมากขึ้น ผมจะ mockup project ขึ้นมา แล้วนำ Feature ของ FastAPI มาใช้ประกอบประมาณ 20% จะได้เห็น code ด้วยไปเลย","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_20":{"__typename":"Paragraph","id":"606c442e7c56_20","name":"0892","type":"P","href":null,"layout":null,"metadata":null,"text":"เราจะลอง mockup ทำ API สำหรับ movies store อารมณ์ประมาณเป็นร้านซื้อขาย viedeo ง่าย ๆ กัน","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_21":{"__typename":"Paragraph","id":"606c442e7c56_21","name":"b578","type":"P","href":null,"layout":null,"metadata":null,"text":"โดย code ที่เห็นต่อไปนี้จะเป็นเพียง sample เท่านั้นเพื่อให้เห็นภาพของ Feature มากขึ้น ส่วนใครอยากเห็นของเต็มแบบขนาดเอาไป deploy ใช้ได้เลย สามารถไปดูได้ที่ GitHub ของผมที่นี่","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":167,"end":173,"href":"https:\u002F\u002Fgithub.com\u002Fbozzlab\u002Ffastapi-movies","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_22":{"__typename":"Paragraph","id":"606c442e7c56_22","name":"6a9d","type":"P","href":null,"layout":null,"metadata":null,"text":"เพราะอีกบทความนึงจะพูดถึงการทำ CI\u002FCD บน Cloud Build ของ Google Cloud เราจะนำ FastAPI ไป deploy แบบ Serverless ของ GCP คลิกอ่านที่นี่","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":118,"end":132,"href":"https:\u002F\u002Fmedium.com\u002F@p.srinikorn\u002F%E0%B8%AA%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%87-ci-cd-pipeline-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-google-cloud-build-%E0%B8%A0%E0%B8%B2%E0%B8%A2%E0%B9%83%E0%B8%99-5-%E0%B8%99%E0%B8%B2%E0%B8%97%E0%B8%B5-56abf2472567","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_23":{"__typename":"Paragraph","id":"606c442e7c56_23","name":"93eb","type":"H3","href":null,"layout":null,"metadata":null,"text":"1. HTTP Method ทั่วไป [Request and Response]","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_24":{"__typename":"Paragraph","id":"606c442e7c56_24","name":"1dfe","type":"P","href":null,"layout":null,"metadata":null,"text":"เรามาดูตัวอย่าง code สำหรับ method http ที่ใช้เป็นประจำในการทำ API รวมถึงวิธีรับ Request ไม่ว่าจะเป็น Header, Cookie, Body, File และวิธี Response ต่าง ๆ ที่ FastAPI มีให้เราใช้แบบสำเร็จรูป","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_25":{"__typename":"Paragraph","id":"606c442e7c56_25","name":"9427","type":"P","href":null,"layout":null,"metadata":null,"text":"เริ่มต้นจากสิ่งง่าย ๆ นี้ก่อน","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:68e7d8d4a48009a430cfb5cdbcf44977":{"__typename":"MediaResource","id":"68e7d8d4a48009a430cfb5cdbcf44977","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_26":{"__typename":"Paragraph","id":"606c442e7c56_26","name":"46a3","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example code API","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:68e7d8d4a48009a430cfb5cdbcf44977"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_27":{"__typename":"Paragraph","id":"606c442e7c56_27","name":"b970","type":"P","href":null,"layout":null,"metadata":null,"text":"ที่นี้ลองใช้ curl ในการยิง request ดู ก็พบว่าใช้ได้ปกติ เรียบง่าย","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*OYeQOOpa1FoEl7GBCc_eXQ.png":{"__typename":"ImageMetadata","id":"1*OYeQOOpa1FoEl7GBCc_eXQ.png","originalHeight":134,"originalWidth":748,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_28":{"__typename":"Paragraph","id":"606c442e7c56_28","name":"7e23","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*OYeQOOpa1FoEl7GBCc_eXQ.png"},"text":"Mock request via cURL","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_29":{"__typename":"Paragraph","id":"606c442e7c56_29","name":"e0f6","type":"P","href":null,"layout":null,"metadata":null,"text":"ตัวอย่าง code ด้านบนเป็น GET Method ซึ่งเราสามารถกำหนด HTTP Method ผ่าน @app.method ได้เลย ไม่ว่าจะเป็น GET, POST, PUT, PATCH, DELETE","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_30":{"__typename":"Paragraph","id":"606c442e7c56_30","name":"ce4a","type":"P","href":null,"layout":null,"metadata":null,"text":"Query String","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":12,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:33e652723d58ca3392b3cc9598404a77":{"__typename":"MediaResource","id":"33e652723d58ca3392b3cc9598404a77","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_31":{"__typename":"Paragraph","id":"606c442e7c56_31","name":"8ab7","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example code — Query String","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:33e652723d58ca3392b3cc9598404a77"}},"mixtapeMetadata":null},"ImageMetadata:1*OHkap0JLBVFvDuqGXk8TEA.png":{"__typename":"ImageMetadata","id":"1*OHkap0JLBVFvDuqGXk8TEA.png","originalHeight":136,"originalWidth":864,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_32":{"__typename":"Paragraph","id":"606c442e7c56_32","name":"ec91","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*OHkap0JLBVFvDuqGXk8TEA.png"},"text":"request via cURL with Query String","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_33":{"__typename":"Paragraph","id":"606c442e7c56_33","name":"3e18","type":"P","href":null,"layout":null,"metadata":null,"text":"ในส่วนนี้ผมได้ทำการยิง request ไปและมี query string ชื่อ name=Parasite เพื่อค้นหาข้อมูลด้วยชื่อหนังและให้ return ข้อมูลกลับมา","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":57,"end":70,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_34":{"__typename":"Paragraph","id":"606c442e7c56_34","name":"c05c","type":"P","href":null,"layout":null,"metadata":null,"text":"จะเห็นว่า แค่เพิ่ม argument ใน function ของ API และกำหนด type ก็สามารถใช้ได้แล้ว ส่วน None ก็คือ เรา define default value ของ param นี้ไว้ หรือจะสื่อในทำนองว่า field นี้ non-required นะ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_35":{"__typename":"Paragraph","id":"606c442e7c56_35","name":"58b7","type":"BQ","href":null,"layout":null,"metadata":null,"text":"แต่ถ้าอยากทำให้ field นี้ required ล่ะ ทำอย่างไร","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:be0af666352e2474e2056b2c155f6ddb":{"__typename":"MediaResource","id":"be0af666352e2474e2056b2c155f6ddb","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_36":{"__typename":"Paragraph","id":"606c442e7c56_36","name":"b930","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code — Query String request","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:be0af666352e2474e2056b2c155f6ddb"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_37":{"__typename":"Paragraph","id":"606c442e7c56_37","name":"3768","type":"P","href":null,"layout":null,"metadata":null,"text":"เราก็แค่เอา None ออกเท่านั้น เหมือนว่าเราไม่ได้ define default value ของ param ตัวนั้นไว้","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_38":{"__typename":"Paragraph","id":"606c442e7c56_38","name":"87c0","type":"P","href":null,"layout":null,"metadata":null,"text":"โอเคที่นี้มาลองยิง request อีกรอบ ทั้งใส่และไม่ใส่ field name","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*oxBMoquaSWDDxBXqCu2_qw.png":{"__typename":"ImageMetadata","id":"1*oxBMoquaSWDDxBXqCu2_qw.png","originalHeight":261,"originalWidth":864,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_39":{"__typename":"Paragraph","id":"606c442e7c56_39","name":"ba7c","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*oxBMoquaSWDDxBXqCu2_qw.png"},"text":"request via cURL with Query String with required field","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_40":{"__typename":"Paragraph","id":"606c442e7c56_40","name":"9feb","type":"P","href":null,"layout":null,"metadata":null,"text":"จะเห็นว่า ถ้าไม่ได้ใส่ name ใน query string, API ก็จะทำการ return error กลับมาให้เลย","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_41":{"__typename":"Paragraph","id":"606c442e7c56_41","name":"e94c","type":"H3","href":null,"layout":null,"metadata":null,"text":"Header","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_42":{"__typename":"Paragraph","id":"606c442e7c56_42","name":"344d","type":"P","href":null,"layout":null,"metadata":null,"text":"ก่อนที่เราจะรับ header เราต้องทำการ import Header เข้ามาก่อน โดยเราสามารถ import จาก FastAPI ได้เลย ตามรูปครับ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:9460b9ee1df839478af338770dc2ffbd":{"__typename":"MediaResource","id":"9460b9ee1df839478af338770dc2ffbd","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_43":{"__typename":"Paragraph","id":"606c442e7c56_43","name":"05b7","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code — Header Request","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:9460b9ee1df839478af338770dc2ffbd"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_44":{"__typename":"Paragraph","id":"606c442e7c56_44","name":"4be5","type":"P","href":null,"layout":null,"metadata":null,"text":"เรามาต่อกันที่ API \u002Fmember โดย path นี้จะมีหน้าที่เช็คว่าลูกค้าที่เข้ามาใช้งานมีข้อมูลในระบบแล้วหรือยัง","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":19,"end":26,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*FV1VNWe-w_ApcWIegyDaDQ.png":{"__typename":"ImageMetadata","id":"1*FV1VNWe-w_ApcWIegyDaDQ.png","originalHeight":660,"originalWidth":1414,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_45":{"__typename":"Paragraph","id":"606c442e7c56_45","name":"dda0","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*FV1VNWe-w_ApcWIegyDaDQ.png"},"text":"request via cURL — Header required","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_46":{"__typename":"Paragraph","id":"606c442e7c56_46","name":"1a26","type":"P","href":null,"layout":null,"metadata":null,"text":"จากตรงนี้เราก็จะเห็นว่าการรับ Header นั้นก็ง่าย ๆ สามารถใช้ Header() ได้เลยทันที โดยเรากำหนดให้ชื่อ key ของ Header ตัวนั้น ๆ และกำหนดค่าที่รับมาเป็น type string ได้เลย ส่วนถ้าอยากให้เป็น non-required ใน function ก็ใส่ None ใน Header แบบนี้ Header(…) =\u003E Header(None)","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":240,"end":265,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_47":{"__typename":"Paragraph","id":"606c442e7c56_47","name":"4a1b","type":"H3","href":null,"layout":null,"metadata":null,"text":"Cookie","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":6,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_48":{"__typename":"Paragraph","id":"606c442e7c56_48","name":"11ed","type":"P","href":null,"layout":null,"metadata":null,"text":"ต่อจาก Header ก่อนหน้า เราเห็นแล้วว่าถ้าสมมุติต้องการจะรับค่า Header จาก Client เราก็สามารถทำได้ง่าย ๆ ที่นี้เราจะมาดูตัวต่อไปที่สำคัญเช่นกันก็คือ Cookie","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:0b2249fcaa70a19aa1029e721300beb2":{"__typename":"MediaResource","id":"0b2249fcaa70a19aa1029e721300beb2","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_49":{"__typename":"Paragraph","id":"606c442e7c56_49","name":"6ee4","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code — Cookie","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:0b2249fcaa70a19aa1029e721300beb2"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_50":{"__typename":"Paragraph","id":"606c442e7c56_50","name":"5679","type":"P","href":null,"layout":null,"metadata":null,"text":"ก่อนอื่นให้เรา import Cookie เข้ามาก่อน ตามด้านบน แล้วมาต่อกันที่ check_token จะเห็นว่าลักษณะจะคล้าย ๆ เหมือน function ที่ผ่านมาเกือบทั้งหมด เพียงแค่เปลี่ยน argument ให้รับค่าจาก Cookie เท่านั้น","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":22,"end":28,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":66,"end":78,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":179,"end":186,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_51":{"__typename":"Paragraph","id":"606c442e7c56_51","name":"2d21","type":"P","href":null,"layout":null,"metadata":null,"text":"ลอง curl ดูหน่อย ใช้ได้จริงไหม","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*QDd8bq5bHCtOucMslxk_dA.png":{"__typename":"ImageMetadata","id":"1*QDd8bq5bHCtOucMslxk_dA.png","originalHeight":660,"originalWidth":1548,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_52":{"__typename":"Paragraph","id":"606c442e7c56_52","name":"db8d","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*QDd8bq5bHCtOucMslxk_dA.png"},"text":"request via cURL — Cookie","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_53":{"__typename":"Paragraph","id":"606c442e7c56_53","name":"f3c8","type":"H3","href":null,"layout":null,"metadata":null,"text":"Body","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_54":{"__typename":"Paragraph","id":"606c442e7c56_54","name":"000d","type":"P","href":null,"layout":null,"metadata":null,"text":"เราลองใช้ GET มาเยอะละ ทีนี้ลองเปลี่ยนเป็นฝั่ง POST บ้าง","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_55":{"__typename":"Paragraph","id":"606c442e7c56_55","name":"d376","type":"P","href":null,"layout":null,"metadata":null,"text":"ก่อนอื่นที่จะทำการรับ body ผมอยากแนะนำ lib ตัวนึงที่ทาง FastAPI มักจะใช้ร่วมกันเพื่อรับ body message โดยมีชื่อว่า pydantic ซึ่งจะถูกนำมาใช้เพื่อให้งานของเราพัฒนาได้ง่ายขึ้นหรือจะมองเป็น class object ก็ได้นะ","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":114,"end":123,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:b1ad4a5dd7c1f93fcfa3b8dc9ee89191":{"__typename":"MediaResource","id":"b1ad4a5dd7c1f93fcfa3b8dc9ee89191","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_56":{"__typename":"Paragraph","id":"606c442e7c56_56","name":"3851","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code — Body","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:b1ad4a5dd7c1f93fcfa3b8dc9ee89191"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_57":{"__typename":"Paragraph","id":"606c442e7c56_57","name":"08a5","type":"P","href":null,"layout":null,"metadata":null,"text":"เราจะเห็น MoviesObject ที่เป็น class มี field name และ genre ที่เป็น type string อยู่นั้น โดยคราว ๆ ในตอนนี้เราจะใช้มันทำหน้าที่เป็น object เพื่อเราให้สามารถทำการ reference type ได้ จาก param ที่เราได้รับค่าจาก body ซึ่งถ้าใครเขียน Python แล้วสนใจวิธีการสร้าง object ด้วย pydantic ก็สามารถไปหาอ่านเพิ่มเติมได้","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":10,"end":22,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":272,"end":280,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_58":{"__typename":"Paragraph","id":"606c442e7c56_58","name":"2087","type":"P","href":null,"layout":null,"metadata":null,"text":"เรากลับมาดูตรง insert_movies() ที่เป็น function สำหรับการเพิ่ม ข้อมูล video เข้าไป โดยมี argument req_body ที่จะมี type เป็น MoviesObject และรับค่าจาก Body(…) ในขณะเดียวกันก็มี x_username จาก Header เช่นกัน","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":15,"end":31,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":98,"end":106,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":125,"end":138,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":151,"end":159,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":177,"end":187,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":192,"end":198,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*c7mxbjbCtVhbP5DMu3sXBw.png":{"__typename":"ImageMetadata","id":"1*c7mxbjbCtVhbP5DMu3sXBw.png","originalHeight":384,"originalWidth":589,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_59":{"__typename":"Paragraph","id":"606c442e7c56_59","name":"8865","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*c7mxbjbCtVhbP5DMu3sXBw.png"},"text":"request via cURL — Header and Body","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_60":{"__typename":"Paragraph","id":"606c442e7c56_60","name":"de8f","type":"P","href":null,"layout":null,"metadata":null,"text":"ข้อดีของการใช้ BaseModel มาช่วยในการรับ body message คือเราสามารถคุม schema (JSON) ได้ง่ายขึ้น เพราะเรากำหนดได้ว่า field ไหนเป็น required หรือ non-required รวมถึง type ของ field และสามารถกำหนด default value ได้ด้วย","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_61":{"__typename":"Paragraph","id":"606c442e7c56_61","name":"2afe","type":"P","href":null,"layout":null,"metadata":null,"text":"เช่น ถ้า client ส่ง JSON มาไม่ครบ ก็จะ return error กลับไปเลย","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*q8CMO011yFXJOzvl0nHWHw.png":{"__typename":"ImageMetadata","id":"1*q8CMO011yFXJOzvl0nHWHw.png","originalHeight":456,"originalWidth":479,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_62":{"__typename":"Paragraph","id":"606c442e7c56_62","name":"afbe","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*q8CMO011yFXJOzvl0nHWHw.png"},"text":"request via cURL — Header and Body, Error Format","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_63":{"__typename":"Paragraph","id":"606c442e7c56_63","name":"4f8b","type":"P","href":null,"layout":null,"metadata":null,"text":"ถ้ากรณีเราต้องการกำหนด default value สำหรับ field นั้น ๆ เองก็สามารถทำได้ง่าย ๆ ตาม code ด้านล่าง","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:a75684160861b56b93ccada664b6542e":{"__typename":"MediaResource","id":"a75684160861b56b93ccada664b6542e","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_64":{"__typename":"Paragraph","id":"606c442e7c56_64","name":"10d3","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code —Body with Pydantic model","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:a75684160861b56b93ccada664b6542e"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_65":{"__typename":"Paragraph","id":"606c442e7c56_65","name":"308b","type":"P","href":null,"layout":null,"metadata":null,"text":"จะเห็นว่า field name มี default value เป็น untitled แล้ว ทีนี้ลองยิง request แบบไม่ตรงตาม schema บ้าง โดยผมจะไม่ส่ง field name ไป","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":43,"end":51,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*-r91CiE5wsmSI7j6cv3VVA.png":{"__typename":"ImageMetadata","id":"1*-r91CiE5wsmSI7j6cv3VVA.png","originalHeight":384,"originalWidth":538,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_66":{"__typename":"Paragraph","id":"606c442e7c56_66","name":"34fc","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*-r91CiE5wsmSI7j6cv3VVA.png"},"text":"request via cURL — Header and Body with non-full format","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_67":{"__typename":"Paragraph","id":"606c442e7c56_67","name":"226a","type":"P","href":null,"layout":null,"metadata":null,"text":"จะเห็นว่าไม่มีการ return 422 กลับมาเลย เพราะเราปรับ field ให้เป็น non-required แล้ว แถมก็ตั้ง default value ของ field name ไว้ ทุกอย่างเลยใช้ได้ปกติ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_68":{"__typename":"Paragraph","id":"606c442e7c56_68","name":"4da0","type":"P","href":null,"layout":null,"metadata":null,"text":"เพิ่มเติมเราจะเห็น genre ที่เป็น field แนวตัวเลือกได้ ก็คงจะนึกถึง Enum กัน โดยตัว Pydantic ก็ support ในส่วนนี้ด้วยลองไปดูกัน","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":19,"end":24,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":83,"end":91,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:ddbc9de3ef745c008fa16d8eb711fc94":{"__typename":"MediaResource","id":"ddbc9de3ef745c008fa16d8eb711fc94","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_69":{"__typename":"Paragraph","id":"606c442e7c56_69","name":"cec8","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code —Body with Pydantic Enum Model","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:ddbc9de3ef745c008fa16d8eb711fc94"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_70":{"__typename":"Paragraph","id":"606c442e7c56_70","name":"f502","type":"P","href":null,"layout":null,"metadata":null,"text":"โดยเราจะต้องทำการ import Enum ตามรูป และสร้าง class object ขึ้นมาเพื่อให้เป็น reference สำหรับ ประเภทของ video","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_71":{"__typename":"Paragraph","id":"606c442e7c56_71","name":"b8e4","type":"P","href":null,"layout":null,"metadata":null,"text":"ทีนี้ลองมายิง request กันดู","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*Lh9yY2Whocbvo0Bc1u8FCA.png":{"__typename":"ImageMetadata","id":"1*Lh9yY2Whocbvo0Bc1u8FCA.png","originalHeight":384,"originalWidth":639,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_72":{"__typename":"Paragraph","id":"606c442e7c56_72","name":"5906","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*Lh9yY2Whocbvo0Bc1u8FCA.png"},"text":"request via cURL — Cookie and Body with enum format","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_73":{"__typename":"Paragraph","id":"606c442e7c56_73","name":"a4b6","type":"P","href":null,"layout":null,"metadata":null,"text":"แล้วถ้าสมมุติ gerne ที่ client ส่งมา ไม่ได้มีอยู่ใน list ที่เรากำหนดไว้ล่ะ จะเกิดอะไรขึ้น","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png":{"__typename":"ImageMetadata","id":"1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png","originalHeight":420,"originalWidth":1024,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_74":{"__typename":"Paragraph","id":"606c442e7c56_74","name":"6cb6","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*-5Y8S0Yq6xN6Ql0lZ2FPKg.png"},"text":"request via cURL — Cookie and Body with enum format, error","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_75":{"__typename":"Paragraph","id":"606c442e7c56_75","name":"2020","type":"P","href":null,"layout":null,"metadata":null,"text":"ก็จะเห็นว่า client ได้รับ return error กลับไปนั้นเอง","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_76":{"__typename":"Paragraph","id":"606c442e7c56_76","name":"fc36","type":"H3","href":null,"layout":null,"metadata":null,"text":"File","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_77":{"__typename":"Paragraph","id":"606c442e7c56_77","name":"44f0","type":"P","href":null,"layout":null,"metadata":null,"text":"มาต่อเนื่องกันกับฝั่ง POST แต่คราวนี้มาดูพวก Body ที่ไม่ใช่ JSON บ้าง","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_78":{"__typename":"Paragraph","id":"606c442e7c56_78","name":"180c","type":"P","href":null,"layout":null,"metadata":null,"text":"เราจะมาดูที่การอ่าน File ไม่ว่าจะเป็นอะไรก็ตาม ในตัวอย่างนี้จะลอง test ด้วยการ upload รูปเข้าไป แล้วให้ return ชื่อไฟล์ กับ size ตามมา","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:0249f82174db1322f345d5b87ff6e468":{"__typename":"MediaResource","id":"0249f82174db1322f345d5b87ff6e468","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_79":{"__typename":"Paragraph","id":"606c442e7c56_79","name":"8cdb","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code — File, UploadFile","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:0249f82174db1322f345d5b87ff6e468"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_80":{"__typename":"Paragraph","id":"606c442e7c56_80","name":"cfc2","type":"P","href":null,"layout":null,"metadata":null,"text":"ก่อนอื่นให้เรา import File และ UploadFile เข้ามาก่อน จากนั้นให้มาดูที่ insert_image_profile() แล้วก็ยิง request ดู","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":22,"end":26,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":31,"end":41,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":71,"end":91,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*Tf6vH5ggDXrqwZDpDfp7ow.png":{"__typename":"ImageMetadata","id":"1*Tf6vH5ggDXrqwZDpDfp7ow.png","originalHeight":732,"originalWidth":1514,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_81":{"__typename":"Paragraph","id":"606c442e7c56_81","name":"a238","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*Tf6vH5ggDXrqwZDpDfp7ow.png"},"text":"request via cURL — POST File","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_82":{"__typename":"Paragraph","id":"606c442e7c56_82","name":"0b37","type":"P","href":null,"layout":null,"metadata":null,"text":"ในตรงนี้ถ้าใครลองแล้วใช้ไม่ได้หรือเกิด error ฝั่ง server ให้ลองเช็คว่าใน environment ของเรามี python-multipart แล้วหรือยัง","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":94,"end":110,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_83":{"__typename":"Paragraph","id":"606c442e7c56_83","name":"e3a1","type":"H3","href":null,"layout":null,"metadata":null,"text":"Response","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_84":{"__typename":"Paragraph","id":"606c442e7c56_84","name":"a607","type":"P","href":null,"layout":null,"metadata":null,"text":"ตอนนี้เราเห็น GET \u002F POST แบบเบื้องต้นไปบ้างละ ในหัวข้อนี้จะพูดถึงการปรับแก้ไข Response message บ้าง","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_85":{"__typename":"Paragraph","id":"606c442e7c56_85","name":"e7ab","type":"P","href":null,"layout":null,"metadata":null,"text":"โดยต้องย้อนกลับไปนิดนึงว่าตัว FastAPI ใช้ Starlette มา develop ตัว Framework ต่อ ซึ่ง starlette ก็เป็น framework สำหรับทำ web service เหมือนกัน ทำให้เราสามารถเรียกใช้ method ของ starlette ได้เลยโดยไม่ต้องลง package starlette เลย (เพราะถูกลงมาให้ตอนลง FastAPI)","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":42,"end":51,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:a71c7e3aca5f405b7e059ce51155776b":{"__typename":"MediaResource","id":"a71c7e3aca5f405b7e059ce51155776b","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_86":{"__typename":"Paragraph","id":"606c442e7c56_86","name":"b39c","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code — Response and Starlette","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:a71c7e3aca5f405b7e059ce51155776b"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_87":{"__typename":"Paragraph","id":"606c442e7c56_87","name":"9bc5","type":"P","href":null,"layout":null,"metadata":null,"text":"โดยครั้งก่อน \u002Fmovies ของเราเป็นการ POST เพื่อแก้ไข object ใน server แต่เราอยากเปลี่ยน status code จาก 200 OK ให้เป็น 201 Created สามารถทำง่าย ๆ ด้วยการ import starlette.response เข้ามา แล้วเรียกใช้ JSONResponse แล้วปรับแก้ตรงส่วน return ของ function","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":13,"end":20,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":159,"end":177,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":198,"end":210,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_88":{"__typename":"Paragraph","id":"606c442e7c56_88","name":"cf18","type":"P","href":null,"layout":null,"metadata":null,"text":"ทีนี้ลองยิง request ดู","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*Yb1ecCwmg-YThvAAN2hbPg.png":{"__typename":"ImageMetadata","id":"1*Yb1ecCwmg-YThvAAN2hbPg.png","originalHeight":384,"originalWidth":639,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_89":{"__typename":"Paragraph","id":"606c442e7c56_89","name":"3535","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*Yb1ecCwmg-YThvAAN2hbPg.png"},"text":"request via cURL — POST with 201 Created","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_90":{"__typename":"Paragraph","id":"606c442e7c56_90","name":"305a","type":"P","href":null,"layout":null,"metadata":null,"text":"จะเห็นว่า status code กลายเป็น 201 Created แล้ว","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_91":{"__typename":"Paragraph","id":"606c442e7c56_91","name":"116a","type":"P","href":null,"layout":null,"metadata":null,"text":"เพิ่มเติมใน starlette.response ไม่ได้มีแค่ JSONResponse อันที่จริงมีมากกว่านั้นเยอะมาก เช่น PlainTextReponse, HTMLResponse, FileResponse, StreamingResponse บลา ๆ เยอะมากให้เราเรียกมาใช้ได้เลยตามความต้องการ","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":11,"end":30,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":43,"end":55,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":92,"end":108,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":110,"end":122,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":124,"end":136,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":138,"end":155,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_92":{"__typename":"Paragraph","id":"606c442e7c56_92","name":"5254","type":"H3","href":null,"layout":null,"metadata":null,"text":"2. API Documents","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_93":{"__typename":"Paragraph","id":"606c442e7c56_93","name":"283c","type":"P","href":null,"layout":null,"metadata":null,"text":"นับว่าเป็นของดีของเจ้าตัว FastAPI เลย เพราะว่าถ้าหากใครเคยประสบปัญหาเวลาคุยกับทีมหรือเพื่อนร่วมงาน ไม่ว่าจะเป็น Backend ด้วยกันเอง หรือ Frontend ที่จะคอยถามข้อมูลประว่า path ไหนทำอะไร รับอะไร return อะไร ต้อง auth ไหม วิธีการแก้ปัญหาก็มักจะจบที่ทำ document กลางขึ้นมา เพื่อให้ทุกคนในทีมได้รับรู้อย่างเท่ากัน","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_94":{"__typename":"Paragraph","id":"606c442e7c56_94","name":"5cb5","type":"BQ","href":null,"layout":null,"metadata":null,"text":"แต่ประเด็นมันอยู่ตรงที่เราจะทำ document รึเปล่า 5555555","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*L74Lq_SNTKEtN0f-MBY0dQ.png":{"__typename":"ImageMetadata","id":"1*L74Lq_SNTKEtN0f-MBY0dQ.png","originalHeight":608,"originalWidth":1655,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_95":{"__typename":"Paragraph","id":"606c442e7c56_95","name":"6432","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:1*L74Lq_SNTKEtN0f-MBY0dQ.png"},"text":"FastAPI documents","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_96":{"__typename":"Paragraph","id":"606c442e7c56_96","name":"acc1","type":"P","href":null,"layout":null,"metadata":null,"text":"หลายคนอาจจะรู้จักตัว swagger ที่ใช้ YAML มาช่วยเขียน docs ให้เรา ซึ่งก็ช่วยได้ดีระดับนึง แต่พองานเรา scale ใหญ่ขึ้นก็จะมีปัญหาขึ้นมา ประมาณว่า ขี้เกียจ","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":143,"end":151,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*WKz-Gna7ytImaEHy.jpg":{"__typename":"ImageMetadata","id":"0*WKz-Gna7ytImaEHy.jpg","originalHeight":392,"originalWidth":1400,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_97":{"__typename":"Paragraph","id":"606c442e7c56_97","name":"583e","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:0*WKz-Gna7ytImaEHy.jpg"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_98":{"__typename":"Paragraph","id":"606c442e7c56_98","name":"36a1","type":"P","href":null,"layout":null,"metadata":null,"text":"แต่ถ้าคุณใช้ FastAPI จะไม่เจอปัญหาพวกนั้น เราแค่ทำหน้าที่ dev อย่างเดียว เพราะ FastAPI จะ generate docs ให้เราทันที","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*gkOCrICOFr093WsK.gif":{"__typename":"ImageMetadata","id":"0*gkOCrICOFr093WsK.gif","originalHeight":450,"originalWidth":800,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_99":{"__typename":"Paragraph","id":"606c442e7c56_99","name":"c2ed","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:0*gkOCrICOFr093WsK.gif"},"text":"Example of API default document","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_100":{"__typename":"Paragraph","id":"606c442e7c56_100","name":"408d","type":"P","href":null,"layout":null,"metadata":null,"text":"แค่เรา run server ขึ้นมาแล้วเปลี่ยน path ไปที่ \u002Fdocs อย่างของผมเป็น 0.0.0.0:8080\u002Fdocs เพียงเท่านี้เราก็จะได้หน้า documents ของ API ขึ้นมาแล้วครับ สามารถใช้ Test ได้ด้วย อันนี้โคตรดี","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":47,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":68,"end":86,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_101":{"__typename":"Paragraph","id":"606c442e7c56_101","name":"319e","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:1*L74Lq_SNTKEtN0f-MBY0dQ.png"},"text":"FastAPI documents","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_102":{"__typename":"Paragraph","id":"606c442e7c56_102","name":"5e7d","type":"H3","href":null,"layout":null,"metadata":null,"text":"ตัวอย่างแบบชัด ๆ","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":16,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_103":{"__typename":"Paragraph","id":"606c442e7c56_103","name":"12fc","type":"BQ","href":null,"layout":null,"metadata":null,"text":"GET [Query String]","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*lzWucXxjCvAf6pccagdTIA.png":{"__typename":"ImageMetadata","id":"1*lzWucXxjCvAf6pccagdTIA.png","originalHeight":881,"originalWidth":719,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_104":{"__typename":"Paragraph","id":"606c442e7c56_104","name":"e358","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*lzWucXxjCvAf6pccagdTIA.png"},"text":"FastAPI document — GET Method | request and response","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_105":{"__typename":"Paragraph","id":"606c442e7c56_105","name":"ad98","type":"BQ","href":null,"layout":null,"metadata":null,"text":"POST [JSON]","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":11,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*e7mF8HRMBjp7MCP9VsjKaw.png":{"__typename":"ImageMetadata","id":"1*e7mF8HRMBjp7MCP9VsjKaw.png","originalHeight":426,"originalWidth":556,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_106":{"__typename":"Paragraph","id":"606c442e7c56_106","name":"a61e","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*e7mF8HRMBjp7MCP9VsjKaw.png"},"text":"FastAPI document — POST Method | request","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*E3CkmZlZHxXPhZze-J0YzQ.png":{"__typename":"ImageMetadata","id":"1*E3CkmZlZHxXPhZze-J0YzQ.png","originalHeight":479,"originalWidth":1218,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_107":{"__typename":"Paragraph","id":"606c442e7c56_107","name":"e60a","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:1*E3CkmZlZHxXPhZze-J0YzQ.png"},"text":"FastAPI document — POST Method | response","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_108":{"__typename":"Paragraph","id":"606c442e7c56_108","name":"aa4f","type":"BQ","href":null,"layout":null,"metadata":null,"text":"POST [File]","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":11,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*Ne0XJyeRTeWGduOzf8-cvA.png":{"__typename":"ImageMetadata","id":"1*Ne0XJyeRTeWGduOzf8-cvA.png","originalHeight":906,"originalWidth":1062,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_109":{"__typename":"Paragraph","id":"606c442e7c56_109","name":"e2c5","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*Ne0XJyeRTeWGduOzf8-cvA.png"},"text":"FastAPI document — POST File | request and response","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_110":{"__typename":"Paragraph","id":"606c442e7c56_110","name":"844e","type":"P","href":null,"layout":null,"metadata":null,"text":"ซึ่งใน docs สามารถบ่งบอกลักษณะของ request ในรูป cURL ได้ แล้วก็มีบอกว่า path function นี้จะ return อะไรไปบ้าง ในระดับ object เลยทีเดียว และก็สามารถแต่งเติมได้ตามอิสระ เช่นจะเขียนอธิบาย path ว่าให้รับอะไรบ้าง โดยเราสามารถเขียนได้ใน code ของ function เราเลย","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:aadc3f9844c038a64ae52a4245536ad4":{"__typename":"MediaResource","id":"aadc3f9844c038a64ae52a4245536ad4","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_111":{"__typename":"Paragraph","id":"606c442e7c56_111","name":"6744","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code — API docs modifeid","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:aadc3f9844c038a64ae52a4245536ad4"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_112":{"__typename":"Paragraph","id":"606c442e7c56_112","name":"33fa","type":"P","href":null,"layout":null,"metadata":null,"text":"เราสามารถลองปรับแต่งหน้าตา API docs ได้ตามต้องการ ตั้งแต่ app ที่เพิ่ม title , description, version และ insert_movies() เพิ่มคำอธิบายภายใต้ function จากนั้นให้เราไปดูที่ \u002Fdocs","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":58,"end":62,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":103,"end":119,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":170,"end":175,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*gh_8ZGEaCH_Ek46YWr9BMQ.png":{"__typename":"ImageMetadata","id":"1*gh_8ZGEaCH_Ek46YWr9BMQ.png","originalHeight":621,"originalWidth":826,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_113":{"__typename":"Paragraph","id":"606c442e7c56_113","name":"c0c4","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*gh_8ZGEaCH_Ek46YWr9BMQ.png"},"text":"Example of API document with Modified","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_114":{"__typename":"Paragraph","id":"606c442e7c56_114","name":"bb3b","type":"P","href":null,"layout":null,"metadata":null,"text":"จะเห็นว่า document ของตัว FastAPI อ้างอิงตาม code เราแทบจะเป๊ะ ๆ ๆ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_115":{"__typename":"Paragraph","id":"606c442e7c56_115","name":"6f91","type":"P","href":null,"layout":null,"metadata":null,"text":"เพิ่มเติมโดยอันที่จริงปรับแต่งได้มากกว่านี้หรือถ้าใครอยากเข้าไปในระดับ JSON เลยก็ให้ไปที่ \u002Fopenapi.json ได้เลย","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":90,"end":104,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_116":{"__typename":"Paragraph","id":"606c442e7c56_116","name":"ed77","type":"P","href":null,"layout":null,"metadata":null,"text":"เพิ่มเติมอีกรอบ ถ้าใครเบื่อหน้าตา \u002Fdocs ให้ลองเปลี่ยนไปที่ \u002Fredoc จะได้ style อีกแบบนึง","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":33,"end":39,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":59,"end":65,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*HoKGMMO-LLvsiKcPfaHVuA.png":{"__typename":"ImageMetadata","id":"1*HoKGMMO-LLvsiKcPfaHVuA.png","originalHeight":1045,"originalWidth":1840,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_117":{"__typename":"Paragraph","id":"606c442e7c56_117","name":"7909","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:1*HoKGMMO-LLvsiKcPfaHVuA.png"},"text":"FastAPI Documents — Redoc","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_118":{"__typename":"Paragraph","id":"606c442e7c56_118","name":"7f41","type":"P","href":null,"layout":null,"metadata":null,"text":"ในส่วนของการ modify API docs ลูกเล่นค่อนข้างเยอะ ถ้าเราต้องจะปรับแต่งก็สามารถทำได้ หรือลองศึกษา OpenAPI เพิ่มเติมดูครับ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_119":{"__typename":"Paragraph","id":"606c442e7c56_119","name":"f338","type":"P","href":null,"layout":null,"metadata":null,"text":"โดย path ทางเข้าของ API docs สามารถเปลี่ยนชื่อได้หรือแม้กระทั่งจะปิดการใช้มันก็สามารถทำได้เช่นกัน","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_120":{"__typename":"Paragraph","id":"606c442e7c56_120","name":"6dd4","type":"H3","href":null,"layout":null,"metadata":null,"text":"3. Dependencies, Middleware, Router","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":17,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_121":{"__typename":"Paragraph","id":"606c442e7c56_121","name":"6a3c","type":"P","href":null,"layout":null,"metadata":null,"text":"หลังจากที่เราผ่านการสร้าง API ในและวิธีใช้งาน Document เบื้องต้นแล้ว ผมมี feature ที่อยากจะนำเสนอ คือ Router และ Dependencies","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":102,"end":108,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":113,"end":125,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_122":{"__typename":"Paragraph","id":"606c442e7c56_122","name":"4a6e","type":"H3","href":null,"layout":null,"metadata":null,"text":"Middleware","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_123":{"__typename":"Paragraph","id":"606c442e7c56_123","name":"1071","type":"P","href":null,"layout":null,"metadata":null,"text":"แต่ก่อนอื่นอยากให้เห็นวิธีการใช้งาน Middleware ของ FastAPI สักหน่อย","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*t0h02I7Rz31BzkQVOPuTcw.png":{"__typename":"ImageMetadata","id":"1*t0h02I7Rz31BzkQVOPuTcw.png","originalHeight":312,"originalWidth":681,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_124":{"__typename":"Paragraph","id":"606c442e7c56_124","name":"6b3a","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*t0h02I7Rz31BzkQVOPuTcw.png"},"text":"FastAPI middleware","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_125":{"__typename":"Paragraph","id":"606c442e7c56_125","name":"bbc2","type":"P","href":null,"layout":null,"metadata":null,"text":"อันนี้เป็นตัวอย่างง่าย ๆ ก็คือเราปรับแต่งตัว middleware ว่าให้ทำการ เพิ่ม Header ชื่อ X-Process-Time ซึ่งก็คือระยะเวลาตั้งแต่ client request เข้ามา จนกระทั่ง response กลับไปหา client","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":86,"end":100,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_126":{"__typename":"Paragraph","id":"606c442e7c56_126","name":"e95e","type":"P","href":null,"layout":null,"metadata":null,"text":"ทดลองยิง request ดู","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*AOOKrquVE5Q-S-89piISAw.png":{"__typename":"ImageMetadata","id":"1*AOOKrquVE5Q-S-89piISAw.png","originalHeight":166,"originalWidth":959,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_127":{"__typename":"Paragraph","id":"606c442e7c56_127","name":"d9e2","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*AOOKrquVE5Q-S-89piISAw.png"},"text":"request via cURL to look up Header[“X-Process-Time”]","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_128":{"__typename":"Paragraph","id":"606c442e7c56_128","name":"ef42","type":"P","href":null,"layout":null,"metadata":null,"text":"จะเห็นว่า server return Header ที่ชื่อ x-process-time มาด้วย ซึ่งเป็นหน่วยระยะเวลาของกระบวน request จนกระทั่งจบ response","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_129":{"__typename":"Paragraph","id":"606c442e7c56_129","name":"7464","type":"H3","href":null,"layout":null,"metadata":null,"text":"Router","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_130":{"__typename":"Paragraph","id":"606c442e7c56_130","name":"ab11","type":"P","href":null,"layout":null,"metadata":null,"text":"พอเรางานเริ่ม scale ใหญ่ขึ้นเรื่อย ๆ ก็จะเกิดปัญหาให้ยุ่งเหยิงกันนิดหน่อย ถ้าเราไม่ได้จัดระเบียบไว้ตั้งแต่ตอน design","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_131":{"__typename":"Paragraph","id":"606c442e7c56_131","name":"4843","type":"P","href":null,"layout":null,"metadata":null,"text":"ก่อนอื่นผมอยากให้เห็น structure ของ project ก่อน","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_132":{"__typename":"Paragraph","id":"606c442e7c56_132","name":"f899","type":"PRE","href":null,"layout":null,"metadata":null,"text":".\n├── app\n│   ├── api\n│   │   ├── member.py\n│   │   └── movies.py\n│   ├── db.py\n│   ├── handlers.py\n│   ├── helper.py\n│   └── model.py\n├── main.py\n├── Pipfile\n├── Pipfile.lock\n├── README.md\n├── requirements.txt\n└── test_main.py","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_133":{"__typename":"Paragraph","id":"606c442e7c56_133","name":"a07d","type":"P","href":null,"layout":null,"metadata":null,"text":"ผมจะยกตัวอย่างตัว member.py ว่าการประกาศ APIRouter() นั้นทำอย่างไรในเบื้องต้น","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":18,"end":28,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":41,"end":50,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:a1a94503cce35a93c3d873c329ffa923":{"__typename":"MediaResource","id":"a1a94503cce35a93c3d873c329ffa923","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_134":{"__typename":"Paragraph","id":"606c442e7c56_134","name":"bc6f","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code — Router declare as decorator","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:a1a94503cce35a93c3d873c329ffa923"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_135":{"__typename":"Paragraph","id":"606c442e7c56_135","name":"5137","type":"P","href":null,"layout":null,"metadata":null,"text":"เริ่มต้นคือให้เรา Import APIRouter เข้ามา แล้ว assign ใส่ตัวแปรตัวนึงไว้ เพื่อให้เราใช้ในการสร้าง API Path กับ function","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_136":{"__typename":"Paragraph","id":"606c442e7c56_136","name":"a851","type":"P","href":null,"layout":null,"metadata":null,"text":"และฝั่ง handler.py จะเป็นไฟล์ที่กำหนด Router ซึ่งจะ import api\u002F….py เข้ามา","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":8,"end":19,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":38,"end":45,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":51,"end":52,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":58,"end":59,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:6b8d29adb759eb40216a6bfb212819b1":{"__typename":"MediaResource","id":"6b8d29adb759eb40216a6bfb212819b1","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_137":{"__typename":"Paragraph","id":"606c442e7c56_137","name":"8972","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code — Router in handlers","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:6b8d29adb759eb40216a6bfb212819b1"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_138":{"__typename":"Paragraph","id":"606c442e7c56_138","name":"38bc","type":"P","href":null,"layout":null,"metadata":null,"text":"ถ้าใครอยากเห็น code เต็มใน GitHub คลิกที่นี้เลยครับ","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":34,"end":44,"href":"https:\u002F\u002Fgithub.com\u002Fbozzlab\u002Ffastapi-movies","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*k1KkDxU50lYj3_LUzRwBiA.png":{"__typename":"ImageMetadata","id":"1*k1KkDxU50lYj3_LUzRwBiA.png","originalHeight":284,"originalWidth":524,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_139":{"__typename":"Paragraph","id":"606c442e7c56_139","name":"1d99","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*k1KkDxU50lYj3_LUzRwBiA.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_140":{"__typename":"Paragraph","id":"606c442e7c56_140","name":"8611","type":"P","href":null,"layout":null,"metadata":null,"text":"ถ้ามองเป็นภาพจะเห็นเป็นลักษณะตามรูปด้านบน คือเราไม่จำเป็นจะต้องเขียน \u002Fapi\u002Fv1 ที่ function การทำงาน api ของเราในทุก ๆ ครั้ง เราจะให้ router ใน handler จัดการในส่วนนี้รวมถึงการระบุ path prefix ของ API เรา","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":69,"end":76,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*WMil0LeQIzB8eRkLr3IFzg.png":{"__typename":"ImageMetadata","id":"1*WMil0LeQIzB8eRkLr3IFzg.png","originalHeight":492,"originalWidth":740,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_141":{"__typename":"Paragraph","id":"606c442e7c56_141","name":"988d","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*WMil0LeQIzB8eRkLr3IFzg.png"},"text":"Example FastAPI code — Prefix API Path","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_142":{"__typename":"Paragraph","id":"606c442e7c56_142","name":"6781","type":"P","href":null,"layout":null,"metadata":null,"text":"ซึ่งอ้างอิงจากครั้งก่อน code เราเป็นยังไง API docs เราเป็นอย่างนั้น โดยปริยาย","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*CBtYfXFj4QekN5ESfsQ_Nw.png":{"__typename":"ImageMetadata","id":"1*CBtYfXFj4QekN5ESfsQ_Nw.png","originalHeight":1049,"originalWidth":1670,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_143":{"__typename":"Paragraph","id":"606c442e7c56_143","name":"3167","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:1*CBtYfXFj4QekN5ESfsQ_Nw.png"},"text":"FastAPI documents with Router organized","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_144":{"__typename":"Paragraph","id":"606c442e7c56_144","name":"fe5a","type":"P","href":null,"layout":null,"metadata":null,"text":"อย่างภาพด้านบนคือผมได้ทำการแบ่ง member กับ movies เป็นคนละ router กัน","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_145":{"__typename":"Paragraph","id":"606c442e7c56_145","name":"27a5","type":"P","href":null,"layout":null,"metadata":null,"text":"ซึ่งในเคสนี้อาจจะมองเห็นภาพเล็กไปนิดนึง ถ้าสมมุติถ้างานใหญ่ขึ้น ตามรูปด้านล่าง จะเป็นประโยชน์มาก ในการแบ่งหน้าที่ของแต่ละ API service อย่างชัดเจน ไม่ตีกัน ไม่ต้องมาลุ้นว่า code เราจะไปอยู่ผิดที่ผิดทางไหม","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*i2IdEqkzeASguhh8Q7VVag.png":{"__typename":"ImageMetadata","id":"1*i2IdEqkzeASguhh8Q7VVag.png","originalHeight":629,"originalWidth":601,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_146":{"__typename":"Paragraph","id":"606c442e7c56_146","name":"eccd","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*i2IdEqkzeASguhh8Q7VVag.png"},"text":"Example of Router Path Prefix","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_147":{"__typename":"Paragraph","id":"606c442e7c56_147","name":"fec4","type":"H3","href":null,"layout":null,"metadata":null,"text":"Dependencies","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":12,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_148":{"__typename":"Paragraph","id":"606c442e7c56_148","name":"bc22","type":"P","href":null,"layout":null,"metadata":null,"text":"ถ้ากรณีที่เรามี function ที่ต้องคอยเช็ค header ในทุก ๆ request ที่เข้ามาใน path นั้น ๆ อยู่แล้ว หรือ function ที่ซ้ำซ้อนแบบใช้ทุกที่ วิธีแก้ไข ก็คงไม่พ้นทำ decorator หรือจะ Inherit class หลักมาก่อนแล้วค่อย implement แต่ถ้าใช้ FastAPI เราไม่ต้องกังวลเรื่องนี้ เพราะอะไรไปดูกัน (เขียนเองยังรู้สึกอวย)","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_149":{"__typename":"Paragraph","id":"606c442e7c56_149","name":"2213","type":"P","href":null,"layout":null,"metadata":null,"text":"ต่อจากตัวก่อน router ให้ลองคิดตามดูว่าถ้าทุก function API ต้องการ validate header ก่อน execute API นั้น function ที่ว่าควรจะอยู่ตรงไหน","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":14,"end":21,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:0132f22eb66dc79b7411e9fca7d9867c":{"__typename":"MediaResource","id":"0132f22eb66dc79b7411e9fca7d9867c","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_150":{"__typename":"Paragraph","id":"606c442e7c56_150","name":"7b76","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code — Dependencies","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:0132f22eb66dc79b7411e9fca7d9867c"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_151":{"__typename":"Paragraph","id":"606c442e7c56_151","name":"a2a5","type":"P","href":null,"layout":null,"metadata":null,"text":"จาก code ตัวอย่างคือ เราต้อง import Depends เข้ามาก่อน แล้วให้เพิ่ม dependencies ให้กับ router ของ movies ซึ่งก็คือ get_x_card_id_token() ส่งผลให้ต่อไปนี่้ทุก ๆ ครั้งที่มีการ request เข้ามาที่ api ของ movies จะทำการ validate header ก่อน ว่ามี X-Card-ID อยู่ใน header หรือไม่ และค่าของ X-Card-ID นั้นถูกต้องตรงกับ database รึเปล่า ถ้าไม่มีหรือมีแล้วก็ไม่ถูกก็จะ return 400 กลับไป","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":36,"end":43,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":116,"end":138,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":243,"end":252,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":285,"end":295,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*iQ_CSr_yQ_PuXqH_Awzexg.png":{"__typename":"ImageMetadata","id":"1*iQ_CSr_yQ_PuXqH_Awzexg.png","originalHeight":304,"originalWidth":531,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_152":{"__typename":"Paragraph","id":"606c442e7c56_152","name":"9be3","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*iQ_CSr_yQ_PuXqH_Awzexg.png"},"text":"Diagram API Router with Depedencies function","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_153":{"__typename":"Paragraph","id":"606c442e7c56_153","name":"e68b","type":"H3","href":null,"layout":null,"metadata":null,"text":"4. Testing","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":10,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_154":{"__typename":"Paragraph","id":"606c442e7c56_154","name":"2bf0","type":"P","href":null,"layout":null,"metadata":null,"text":"การทำ test ถือว่าเป็นเรื่องจำเป็นในการทำ software อยู่แล้ว ยกเว้นเราจะไม่ทำ ฮ่า ๆ ถ้าใครเคยเขียน test ด้วย python ก็น่าจะคุ้นเคยกับตัว unittest และ pytest ซึ่งก็ใช้กันอย่างแพร่หลาย โดย FastAPI ก็มีตัวช่วยให้ test api ให้ง่ายขึ้นเหมือนกัน (โคตรขาย เอาตรง ๆ ใช้ postman ก็ได้)","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":135,"end":144,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":147,"end":155,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:1ec4acbc641b8e7b5f666937bf258a37":{"__typename":"MediaResource","id":"1ec4acbc641b8e7b5f666937bf258a37","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Paragraph:606c442e7c56_155":{"__typename":"Paragraph","id":"606c442e7c56_155","name":"3c45","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Example FastAPI code — Testing","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:1ec4acbc641b8e7b5f666937bf258a37"}},"mixtapeMetadata":null},"Paragraph:606c442e7c56_156":{"__typename":"Paragraph","id":"606c442e7c56_156","name":"b34c","type":"P","href":null,"layout":null,"metadata":null,"text":"เริ่มต้นด้วยการสร้างไฟล์ test_xx.py ตามที่เราต้อง แต่ต้องขึ้นด้วย test_ และภายชื่อ function ก็ต้องขึ้นต้นด้วย test_ เหมือนกันครับ","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":25,"end":35,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":66,"end":71,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":110,"end":115,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_157":{"__typename":"Paragraph","id":"606c442e7c56_157","name":"76eb","type":"P","href":null,"layout":null,"metadata":null,"text":"ต่อด้วย import app ของเรามาก่อนและ fastapi.testclient เพื่อให้เราทำการ mockup app และ request ขึ้นมาได้","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":15,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":35,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_158":{"__typename":"Paragraph","id":"606c442e7c56_158","name":"9f30","type":"P","href":null,"layout":null,"metadata":null,"text":"จากนั้นก็ทำเขียน test ตาม testcase ของเรา อย่างตัวอย่าง code ด้านบนคือทดสอบว่า \u002Fapi\u002Fv1\u002Fmember สามารถทำงานได้ถูกต้องตามที่เราต้องการหรือไม่","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_159":{"__typename":"Paragraph","id":"606c442e7c56_159","name":"11cf","type":"P","href":null,"layout":null,"metadata":null,"text":"ทั้งนี้ผมใช้ pytest ช่วยเพื่อให้เห็นภาพมากขึ้นว่า testcase ของเราทำงานเป็นอย่างไรบ้าง ตามรูปด้านล่าง","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":13,"end":19,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*TFCheQi40DSOH2BMDTDAPA.png":{"__typename":"ImageMetadata","id":"1*TFCheQi40DSOH2BMDTDAPA.png","originalHeight":751,"originalWidth":1501,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_160":{"__typename":"Paragraph","id":"606c442e7c56_160","name":"ae62","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*TFCheQi40DSOH2BMDTDAPA.png"},"text":"Pytest , Testing with FastAPI","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_161":{"__typename":"Paragraph","id":"606c442e7c56_161","name":"79a0","type":"P","href":null,"layout":null,"metadata":null,"text":"จะเห็นว่าผ่านหมด 20 testcase ก็ไม่แปลกแหละ ผมเขียนเอง อันไหน error ก็ลบไป ล้อเล่น","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_162":{"__typename":"Paragraph","id":"606c442e7c56_162","name":"cd55","type":"H3","href":null,"layout":null,"metadata":null,"text":"5. Deployment","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":13,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_163":{"__typename":"Paragraph","id":"606c442e7c56_163","name":"bf48","type":"P","href":null,"layout":null,"metadata":null,"text":"อันนี้มีได้หลายท่ามาก ๆ ให้มองว่า FastAPI เป็นแค่ application ทั่วไปก็ยังได้ ไม่ได้มีอะไรซับซ้อน ซึ่งก็แล้วแต่ความต้องการว่าจะเอา project เราไป host ไว้ที่ไหน ไม่ว่าจะเป็น stateless หรือ stateful ก็ได้ทั้งนั้น จะใช้ gunicorn เหมือน Flask และ Django ก็ได้","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_164":{"__typename":"Paragraph","id":"606c442e7c56_164","name":"f521","type":"P","href":null,"layout":null,"metadata":null,"text":"แต่ท่าที่ผมจะใช้คือ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_165":{"__typename":"Paragraph","id":"606c442e7c56_165","name":"02db","type":"P","href":null,"layout":null,"metadata":null,"text":"Cloud Build ทำ CI\u002FCD แล้ว deploy บน Cloud Run","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":45,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_166":{"__typename":"Paragraph","id":"606c442e7c56_166","name":"62a4","type":"P","href":null,"layout":null,"metadata":null,"text":"และทุกอย่างจะอยู่บน Google Cloud ซึ่งก็จะมีพวก GitHub \u002F Docker \u002F Google Cloud บลา ๆ ผสมอยู่ด้วย ตาม flow รูปด้านล่าง","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":20,"end":33,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*l9ghcPRhNzwRnrJD6BE7gA.png":{"__typename":"ImageMetadata","id":"1*l9ghcPRhNzwRnrJD6BE7gA.png","originalHeight":562,"originalWidth":1131,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:606c442e7c56_167":{"__typename":"Paragraph","id":"606c442e7c56_167","name":"342d","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*l9ghcPRhNzwRnrJD6BE7gA.png"},"text":"CI\u002FCD Workflow","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_168":{"__typename":"Paragraph","id":"606c442e7c56_168","name":"e817","type":"P","href":null,"layout":null,"metadata":null,"text":"ดังนั้นถ้าใครมีความคุ้นเคย Docker\u002F Container หรือ GitLab CI\u002FCD, AWS CodeBuild พวกนี้ ก็ตามไปอ่านได้ครับ คลิกที่นี่ ถือว่าเปิดโลกฝั่ง Google Cloud","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":104,"end":114,"href":"https:\u002F\u002Fmedium.com\u002Fp\u002F56abf2472567\u002Fedit","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_169":{"__typename":"Paragraph","id":"606c442e7c56_169","name":"a954","type":"H3","href":null,"layout":null,"metadata":null,"text":"Conclusion","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_170":{"__typename":"Paragraph","id":"606c442e7c56_170","name":"c4a0","type":"P","href":null,"layout":null,"metadata":null,"text":"สิ่งที่ผมเขียนมาทั้งหมดนี้เป็นเพียงประมาณ 10–20 % ของเจ้าตัว FastAPI เท่านั้น ยังไม่ได้ลงลึงอะไรมาก แต่อย่างน้อยคิดว่าน่าจะพอช่วยเหลือคนที่กำลังเริ่มต้นกับ framework ตัวนี้ได้ ด้วยความที่ FastAPI เพิ่งมาไม่นานประมาณปลายปี 2019 ทำให้คนยังไม่รู้จักแพร่หลายเท่า Flask หรือ Django แน่นอน แต่คิดว่าอนาคตมาคงมาแน่ ๆ (เดาล้วน ๆ )","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_171":{"__typename":"Paragraph","id":"606c442e7c56_171","name":"3e7d","type":"P","href":null,"layout":null,"metadata":null,"text":"ส่วน Feature อื่น ๆ ที่สำคัญ เช่น WebSocket, GraphQL บลา ๆ ผมจะทดลองใช้ดู เผื่ออนาคตได้ใช้ขึ้นมาจริง ๆแล้วถ้าเวิคจะมาเขียนเป็นบล็อคแชร์ให้ทุกคนอ่านอีกทีครับ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_172":{"__typename":"Paragraph","id":"606c442e7c56_172","name":"b1ca","type":"P","href":null,"layout":null,"metadata":null,"text":"ทั้งนี้ ถ้าบทความนี้ ผิดพลาดในส่วนใด ๆ สามารถทักท้วงหรือคอมเม้นกันได้ครับ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_173":{"__typename":"Paragraph","id":"606c442e7c56_173","name":"b302","type":"P","href":null,"layout":null,"metadata":null,"text":"อ่อ ถ้าใครสนใจจะลองทำ CI\u002FCD ต่อ ลองอ่านอันนี้ได้ครับ","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":35,"end":45,"href":"https:\u002F\u002Fmedium.com\u002F@p.srinikorn\u002F%E0%B8%AA%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%87-ci-cd-pipeline-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-google-cloud-build-%E0%B8%A0%E0%B8%B2%E0%B8%A2%E0%B9%83%E0%B8%99-5-%E0%B8%99%E0%B8%B2%E0%B8%97%E0%B8%B5-56abf2472567","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:606c442e7c56_174":{"__typename":"Paragraph","id":"606c442e7c56_174","name":"a4e0","type":"P","href":null,"layout":null,"metadata":null,"text":"ขอบคุณครับ","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"UserViewerEdge:userId:ec6cad91b3d3-viewerId:lo_5ed50fbc40f5":{"__typename":"UserViewerEdge","id":"userId:ec6cad91b3d3-viewerId:lo_5ed50fbc40f5","isMuting":false},"PostViewerEdge:postId:148b10416a70-viewerId:lo_5ed50fbc40f5":{"__typename":"PostViewerEdge","shouldIndexPostForExternalSearch":true,"id":"postId:148b10416a70-viewerId:lo_5ed50fbc40f5"},"Tag:fastapi":{"__typename":"Tag","id":"fastapi","displayTitle":"Fastapi","normalizedTagSlug":"fastapi"},"Tag:python":{"__typename":"Tag","id":"python","displayTitle":"Python","normalizedTagSlug":"python"},"Tag:api":{"__typename":"Tag","id":"api","displayTitle":"API","normalizedTagSlug":"api"},"Tag:rest-api":{"__typename":"Tag","id":"rest-api","displayTitle":"Rest Api","normalizedTagSlug":"rest-api"},"Tag:flask":{"__typename":"Tag","id":"flask","displayTitle":"Flask","normalizedTagSlug":"flask"},"Post:148b10416a70":{"__typename":"Post","id":"148b10416a70","collection":null,"content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fp-srinikorn.medium.com\u002Freview-สร้าง-api-ด้วย-fastapi-เร็ว-แรง-ฟิ้ว-ๆ-148b10416a70\"}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"2809","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"1a4a","startIndex":3,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"9900","startIndex":7,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"3fa4","startIndex":23,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"faf1","startIndex":92,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"2925","startIndex":102,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"b4ac","startIndex":110,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"d1df","startIndex":120,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"c07f","startIndex":153,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"c759","startIndex":162,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"21e9","startIndex":169,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}],"paragraphs":[{"__ref":"Paragraph:606c442e7c56_0"},{"__ref":"Paragraph:606c442e7c56_1"},{"__ref":"Paragraph:606c442e7c56_2"},{"__ref":"Paragraph:606c442e7c56_3"},{"__ref":"Paragraph:606c442e7c56_4"},{"__ref":"Paragraph:606c442e7c56_5"},{"__ref":"Paragraph:606c442e7c56_6"},{"__ref":"Paragraph:606c442e7c56_7"},{"__ref":"Paragraph:606c442e7c56_8"},{"__ref":"Paragraph:606c442e7c56_9"},{"__ref":"Paragraph:606c442e7c56_10"},{"__ref":"Paragraph:606c442e7c56_11"},{"__ref":"Paragraph:606c442e7c56_12"},{"__ref":"Paragraph:606c442e7c56_13"},{"__ref":"Paragraph:606c442e7c56_14"},{"__ref":"Paragraph:606c442e7c56_15"},{"__ref":"Paragraph:606c442e7c56_16"},{"__ref":"Paragraph:606c442e7c56_17"},{"__ref":"Paragraph:606c442e7c56_18"},{"__ref":"Paragraph:606c442e7c56_19"},{"__ref":"Paragraph:606c442e7c56_20"},{"__ref":"Paragraph:606c442e7c56_21"},{"__ref":"Paragraph:606c442e7c56_22"},{"__ref":"Paragraph:606c442e7c56_23"},{"__ref":"Paragraph:606c442e7c56_24"},{"__ref":"Paragraph:606c442e7c56_25"},{"__ref":"Paragraph:606c442e7c56_26"},{"__ref":"Paragraph:606c442e7c56_27"},{"__ref":"Paragraph:606c442e7c56_28"},{"__ref":"Paragraph:606c442e7c56_29"},{"__ref":"Paragraph:606c442e7c56_30"},{"__ref":"Paragraph:606c442e7c56_31"},{"__ref":"Paragraph:606c442e7c56_32"},{"__ref":"Paragraph:606c442e7c56_33"},{"__ref":"Paragraph:606c442e7c56_34"},{"__ref":"Paragraph:606c442e7c56_35"},{"__ref":"Paragraph:606c442e7c56_36"},{"__ref":"Paragraph:606c442e7c56_37"},{"__ref":"Paragraph:606c442e7c56_38"},{"__ref":"Paragraph:606c442e7c56_39"},{"__ref":"Paragraph:606c442e7c56_40"},{"__ref":"Paragraph:606c442e7c56_41"},{"__ref":"Paragraph:606c442e7c56_42"},{"__ref":"Paragraph:606c442e7c56_43"},{"__ref":"Paragraph:606c442e7c56_44"},{"__ref":"Paragraph:606c442e7c56_45"},{"__ref":"Paragraph:606c442e7c56_46"},{"__ref":"Paragraph:606c442e7c56_47"},{"__ref":"Paragraph:606c442e7c56_48"},{"__ref":"Paragraph:606c442e7c56_49"},{"__ref":"Paragraph:606c442e7c56_50"},{"__ref":"Paragraph:606c442e7c56_51"},{"__ref":"Paragraph:606c442e7c56_52"},{"__ref":"Paragraph:606c442e7c56_53"},{"__ref":"Paragraph:606c442e7c56_54"},{"__ref":"Paragraph:606c442e7c56_55"},{"__ref":"Paragraph:606c442e7c56_56"},{"__ref":"Paragraph:606c442e7c56_57"},{"__ref":"Paragraph:606c442e7c56_58"},{"__ref":"Paragraph:606c442e7c56_59"},{"__ref":"Paragraph:606c442e7c56_60"},{"__ref":"Paragraph:606c442e7c56_61"},{"__ref":"Paragraph:606c442e7c56_62"},{"__ref":"Paragraph:606c442e7c56_63"},{"__ref":"Paragraph:606c442e7c56_64"},{"__ref":"Paragraph:606c442e7c56_65"},{"__ref":"Paragraph:606c442e7c56_66"},{"__ref":"Paragraph:606c442e7c56_67"},{"__ref":"Paragraph:606c442e7c56_68"},{"__ref":"Paragraph:606c442e7c56_69"},{"__ref":"Paragraph:606c442e7c56_70"},{"__ref":"Paragraph:606c442e7c56_71"},{"__ref":"Paragraph:606c442e7c56_72"},{"__ref":"Paragraph:606c442e7c56_73"},{"__ref":"Paragraph:606c442e7c56_74"},{"__ref":"Paragraph:606c442e7c56_75"},{"__ref":"Paragraph:606c442e7c56_76"},{"__ref":"Paragraph:606c442e7c56_77"},{"__ref":"Paragraph:606c442e7c56_78"},{"__ref":"Paragraph:606c442e7c56_79"},{"__ref":"Paragraph:606c442e7c56_80"},{"__ref":"Paragraph:606c442e7c56_81"},{"__ref":"Paragraph:606c442e7c56_82"},{"__ref":"Paragraph:606c442e7c56_83"},{"__ref":"Paragraph:606c442e7c56_84"},{"__ref":"Paragraph:606c442e7c56_85"},{"__ref":"Paragraph:606c442e7c56_86"},{"__ref":"Paragraph:606c442e7c56_87"},{"__ref":"Paragraph:606c442e7c56_88"},{"__ref":"Paragraph:606c442e7c56_89"},{"__ref":"Paragraph:606c442e7c56_90"},{"__ref":"Paragraph:606c442e7c56_91"},{"__ref":"Paragraph:606c442e7c56_92"},{"__ref":"Paragraph:606c442e7c56_93"},{"__ref":"Paragraph:606c442e7c56_94"},{"__ref":"Paragraph:606c442e7c56_95"},{"__ref":"Paragraph:606c442e7c56_96"},{"__ref":"Paragraph:606c442e7c56_97"},{"__ref":"Paragraph:606c442e7c56_98"},{"__ref":"Paragraph:606c442e7c56_99"},{"__ref":"Paragraph:606c442e7c56_100"},{"__ref":"Paragraph:606c442e7c56_101"},{"__ref":"Paragraph:606c442e7c56_102"},{"__ref":"Paragraph:606c442e7c56_103"},{"__ref":"Paragraph:606c442e7c56_104"},{"__ref":"Paragraph:606c442e7c56_105"},{"__ref":"Paragraph:606c442e7c56_106"},{"__ref":"Paragraph:606c442e7c56_107"},{"__ref":"Paragraph:606c442e7c56_108"},{"__ref":"Paragraph:606c442e7c56_109"},{"__ref":"Paragraph:606c442e7c56_110"},{"__ref":"Paragraph:606c442e7c56_111"},{"__ref":"Paragraph:606c442e7c56_112"},{"__ref":"Paragraph:606c442e7c56_113"},{"__ref":"Paragraph:606c442e7c56_114"},{"__ref":"Paragraph:606c442e7c56_115"},{"__ref":"Paragraph:606c442e7c56_116"},{"__ref":"Paragraph:606c442e7c56_117"},{"__ref":"Paragraph:606c442e7c56_118"},{"__ref":"Paragraph:606c442e7c56_119"},{"__ref":"Paragraph:606c442e7c56_120"},{"__ref":"Paragraph:606c442e7c56_121"},{"__ref":"Paragraph:606c442e7c56_122"},{"__ref":"Paragraph:606c442e7c56_123"},{"__ref":"Paragraph:606c442e7c56_124"},{"__ref":"Paragraph:606c442e7c56_125"},{"__ref":"Paragraph:606c442e7c56_126"},{"__ref":"Paragraph:606c442e7c56_127"},{"__ref":"Paragraph:606c442e7c56_128"},{"__ref":"Paragraph:606c442e7c56_129"},{"__ref":"Paragraph:606c442e7c56_130"},{"__ref":"Paragraph:606c442e7c56_131"},{"__ref":"Paragraph:606c442e7c56_132"},{"__ref":"Paragraph:606c442e7c56_133"},{"__ref":"Paragraph:606c442e7c56_134"},{"__ref":"Paragraph:606c442e7c56_135"},{"__ref":"Paragraph:606c442e7c56_136"},{"__ref":"Paragraph:606c442e7c56_137"},{"__ref":"Paragraph:606c442e7c56_138"},{"__ref":"Paragraph:606c442e7c56_139"},{"__ref":"Paragraph:606c442e7c56_140"},{"__ref":"Paragraph:606c442e7c56_141"},{"__ref":"Paragraph:606c442e7c56_142"},{"__ref":"Paragraph:606c442e7c56_143"},{"__ref":"Paragraph:606c442e7c56_144"},{"__ref":"Paragraph:606c442e7c56_145"},{"__ref":"Paragraph:606c442e7c56_146"},{"__ref":"Paragraph:606c442e7c56_147"},{"__ref":"Paragraph:606c442e7c56_148"},{"__ref":"Paragraph:606c442e7c56_149"},{"__ref":"Paragraph:606c442e7c56_150"},{"__ref":"Paragraph:606c442e7c56_151"},{"__ref":"Paragraph:606c442e7c56_152"},{"__ref":"Paragraph:606c442e7c56_153"},{"__ref":"Paragraph:606c442e7c56_154"},{"__ref":"Paragraph:606c442e7c56_155"},{"__ref":"Paragraph:606c442e7c56_156"},{"__ref":"Paragraph:606c442e7c56_157"},{"__ref":"Paragraph:606c442e7c56_158"},{"__ref":"Paragraph:606c442e7c56_159"},{"__ref":"Paragraph:606c442e7c56_160"},{"__ref":"Paragraph:606c442e7c56_161"},{"__ref":"Paragraph:606c442e7c56_162"},{"__ref":"Paragraph:606c442e7c56_163"},{"__ref":"Paragraph:606c442e7c56_164"},{"__ref":"Paragraph:606c442e7c56_165"},{"__ref":"Paragraph:606c442e7c56_166"},{"__ref":"Paragraph:606c442e7c56_167"},{"__ref":"Paragraph:606c442e7c56_168"},{"__ref":"Paragraph:606c442e7c56_169"},{"__ref":"Paragraph:606c442e7c56_170"},{"__ref":"Paragraph:606c442e7c56_171"},{"__ref":"Paragraph:606c442e7c56_172"},{"__ref":"Paragraph:606c442e7c56_173"},{"__ref":"Paragraph:606c442e7c56_174"}]},"validatedShareKey":"","shareKeyCreator":null},"creator":{"__ref":"User:ec6cad91b3d3"},"inResponseToEntityType":null,"isLocked":false,"isMarkedPaywallOnly":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","mediumUrl":"https:\u002F\u002Fp-srinikorn.medium.com\u002Freview-%E0%B8%AA%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%87-api-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-fastapi-%E0%B9%80%E0%B8%A3%E0%B9%87%E0%B8%A7-%E0%B9%81%E0%B8%A3%E0%B8%87-%E0%B8%9F%E0%B8%B4%E0%B9%89%E0%B8%A7-%E0%B9%86-148b10416a70","primaryTopic":null,"topics":[],"isLimitedState":false,"isPublished":true,"allowResponses":true,"responsesLocked":false,"visibility":"PUBLIC","latestPublishedVersion":"606c442e7c56","postResponses":{"__typename":"PostResponses","count":1},"responseDistribution":"NOT_DISTRIBUTED","clapCount":123,"title":"[Review] สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว ๆ","isSeries":false,"sequence":null,"uniqueSlug":"review-สร้าง-api-ด้วย-fastapi-เร็ว-แรง-ฟิ้ว-ๆ-148b10416a70","socialTitle":"","socialDek":"","canonicalUrl":"https:\u002F\u002Fp-srinikorn.medium.com\u002Freview-สร้าง-api-ด้วย-fastapi-เร็ว-แรง-ฟิ้ว-ๆ-148b10416a70","metaDescription":"","latestPublishedAt":1603032610934,"readingTime":7.702830188679245,"previewContent":{"__typename":"PreviewContent","subtitle":"เริ่มต้นเขียน API ด้วย Python และ FastAPI ฟิ้ว ฟิ้ว ๆ"},"previewImage":{"__ref":"ImageMetadata:1*du7p50wS_fIsaC_lR18qsg.png"},"isShortform":false,"seoMetaTags":{"__typename":"SEOMetaTags","jsonLd":"{\"@context\":\"https:\u002F\u002Fschema.org\",\"@id\":\"https:\u002F\u002Fp-srinikorn.medium.com\u002Freview-สร้าง-api-ด้วย-fastapi-เร็ว-แรง-ฟิ้ว-ๆ-148b10416a70\",\"@type\":\"SocialMediaPosting\",\"image\":[\"https:\u002F\u002Fmiro.medium.com\u002F1*du7p50wS_fIsaC_lR18qsg.png\"],\"url\":\"https:\u002F\u002Fp-srinikorn.medium.com\u002Freview-สร้าง-api-ด้วย-fastapi-เร็ว-แรง-ฟิ้ว-ๆ-148b10416a70\",\"dateCreated\":\"2020-09-08T14:16:23Z\",\"datePublished\":\"2020-09-08T14:16:23Z\",\"dateModified\":\"2020-10-18T14:50:10Z\",\"headline\":\"สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว !!!\",\"name\":\"สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว !!!\",\"description\":\"สร้าง API ด้วย FastAPI เร็ว แรง ฟิ้ว !!!\\nเริ่มต้นเขียน API ด้วย Python และ FastAPI ฟิ้ว ฟิ้ว …\",\"identifier\":\"148b10416a70\",\"author\":{\"@context\":\"https:\u002F\u002Fschema.org\",\"@id\":\"https:\u002F\u002Fmedium.com\u002F@p-srinikorn\",\"@type\":\"Person\",\"identifier\":\"p-srinikorn\",\"name\":\"Bozz Srinikorn\",\"url\":\"https:\u002F\u002Fmedium.com\u002F@p-srinikorn\"},\"creator\":{\"@context\":\"https:\u002F\u002Fschema.org\",\"@id\":\"https:\u002F\u002Fmedium.com\u002F@p-srinikorn\",\"@type\":\"Person\",\"identifier\":\"p-srinikorn\",\"name\":\"Bozz Srinikorn\",\"url\":\"https:\u002F\u002Fmedium.com\u002F@p-srinikorn\"},\"publisher\":{\"@context\":\"https:\u002F\u002Fschema.org\",\"@type\":\"Organization\",\"@id\":\"https:\u002F\u002Fmedium.com\",\"name\":\"Medium\",\"url\":\"https:\u002F\u002Fmedium.com\",\"logo\":{\"@type\":\"ImageObject\",\"width\":500,\"height\":110,\"url\":\"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:500\u002F7%2AV1_7XP4snlmqrc_0Njontw.png\"}},\"mainEntityOfPage\":\"https:\u002F\u002Fp-srinikorn.medium.com\u002Freview-สร้าง-api-ด้วย-fastapi-เร็ว-แรง-ฟิ้ว-ๆ-148b10416a70\",\"isAccessibleForFree\":true}"},"seoDescription":"","shortformType":"SHORTFORM_TYPE_LINK","firstPublishedAt":1599574583594,"viewerEdge":{"__ref":"PostViewerEdge:postId:148b10416a70-viewerId:lo_5ed50fbc40f5"},"seoTitle":"","isSuspended":false,"license":"ALL_RIGHTS_RESERVED","tags":[{"__ref":"Tag:fastapi"},{"__ref":"Tag:python"},{"__ref":"Tag:api"},{"__ref":"Tag:rest-api"},{"__ref":"Tag:flask"}],"isFeaturedInPublishedPublication":false,"isNewsletter":false,"statusForCollection":null,"pendingCollection":null,"detectedLanguage":"th","wordCount":1339,"layerCake":0}}</script><script>window.__MIDDLEWARE_STATE__={"session":{"xsrf":""},"cache":{"cacheStatus":"MISS"}}</script><script src="https://cdn-client.medium.com/lite/static/js/manifest.56d6bbff.js"></script><script src="https://cdn-client.medium.com/lite/static/js/723.093de8f1.js"></script><script src="https://cdn-client.medium.com/lite/static/js/main.ed99e23a.js"></script><script src="https://cdn-client.medium.com/lite/static/js/instrumentation.47ae8b31.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/reporting.851fdaca.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5052.eb638269.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/683.abfef39e.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6618.4aea0357.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2050.3c25fb60.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3326.9712e10d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7566.fa51707d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7908.908acb8a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3927.2f9f3eed.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8640.0d3bced2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9967.f31ca2af.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9214.a792bbcc.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1214.9ae8faaf.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/556.d95c90dd.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7381.c53435ab.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9768.a85f5560.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5522.3fb24bd9.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/792.e2703d53.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3507.aaf82712.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7561.fc7962fc.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4929.75144692.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6834.6c66e3cc.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1887.a9c74b1a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7979.35c5b2af.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7975.3f8d607c.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3877.96683729.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9256.629cdc7e.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8768.62c3639c.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/144.f38d4759.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3666.6579eeda.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1069.6236ad3b.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostPage.MainContent.e31fff2e.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2698.9eecb474.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3974.ee0dd7bf.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2527.358dc2fb.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostResponsesContent.3c0c12ee.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/responses.editor.d61aa7c4.chunk.js"></script>
<script id="__LOADABLE_REQUIRED_CHUNKS__" type="application/json">[]</script>
<script id="__LOADABLE_REQUIRED_CHUNKS___ext" type="application/json">{"namedChunks":[]}</script><script>window.main();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97444ffabeee7995',t:'MTc1NjA1Mzg0OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body></html>